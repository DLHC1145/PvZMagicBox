<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<title>è½¯ä»¶æœç´¢ä¸‹è½½</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: Arial, sans-serif;
			background-color: #f5f5f5;
			padding: 0;
			touch-action: pan-x pan-y;
			overflow-x: hidden;
			padding-bottom: 60px;
		}

		/* é˜²æ­¢é¡µé¢ç¼©æ”¾ */
		html {
			touch-action: manipulation;
			-webkit-text-size-adjust: none;
			-ms-text-size-adjust: none;
			text-size-adjust: none;
		}

		/* æœç´¢åŒºåŸŸ - ç™½è‰²èƒŒæ™¯ï¼Œä¸ä¸‹æ–¹èåˆï¼ˆç¬¬2å¼ å›¾æ ·å¼ï¼‰ */
		.search-section {
			background-color: white;
			padding: 8px 15px;
			border-bottom: none;
			position: relative;
		}
		.search-container {
			display: flex;
			align-items: center;
			background-color: white;
			border: 1px solid #ddd;
			border-radius: 25px;
			overflow: hidden;
			transition: all 0.3s ease;
			margin-left: -5px;
			width: calc(85% - 5px);
		}
		.search-container:focus-within {
			border-color: #2196F3;
		}
		
		/* æœç´¢å›¾æ ‡åŒºåŸŸ */
		.search-icon-area {
			width: 50px;
			height: 36px;
			background-image: url('æœç´¢.png');
			background-size: cover;
			background-position: center;
			background-repeat: no-repeat;
			background-color: #f5f5f5;
			flex-shrink: 0;
			margin-right: 0;
		}
		
		.search-box {
			flex: 1;
			padding: 8px 16px;
			border: none;
			font-size: 15px;
			outline: none;
			background-color: #f5f5f5;
			min-width: 0;
			transition: background-color 0.3s;
		}
		.search-box::placeholder {
			color: #999;
			font-size: 14px;
		}
		.search-actions {
			display: flex;
			align-items: center;
			padding: 0 8px 0 0;
			margin-left: 8px;
		}
		.refresh-btn, .download-btn {
			width: 26px;
			height: 26px;
			border: none;
			background: none;
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			border-radius: 50%;
			position: relative;
			font-size: 16px;
		}
		.refresh-btn:hover, .download-btn:hover {
			background-color: #f0f0f0;
		}

		/* çº¯æ–‡å­—æœç´¢æ ·å¼ */
		.search-text {
			color: #666;
			font-size: 14px;
			cursor: pointer;
			padding: 4px 8px;
			border-radius: 4px;
			transition: background-color 0.2s;
			white-space: nowrap;
		}
		.search-text:hover {
			background-color: #f0f0f0;
			color: #333;
		}

		/* å†å²è®°å½•æŒ‰é’® - å›¾ç‰‡æ ·å¼ */
		.history-btn {
			position: absolute;
			right: 15px;
			top: 50%;
			transform: translateY(-50%);
			width: 40px;
			height: 40px;
			background-image: url('å†å²è®°å½•.jpg');
			background-size: contain;
			background-position: center;
			background-repeat: no-repeat;
			background-color: transparent;
			border: none;
			cursor: pointer;
			padding: 0;
			transition: all 0.2s;
			border-radius: 6px;
		}

		.history-btn:hover {
			background-color: #f5f5f5;
			transform: translateY(-50%) scale(1.05);
		}

		.history-btn:active {
			transform: translateY(-50%) scale(0.95);
		}

		/* å–æ¶ˆæŒ‰é’® - è“è‰²å­—ä½“ */
		.cancel-btn {
			position: absolute;
			right: 15px;
			top: 50%;
			transform: translateY(-50%);
			background: none;
			border: none;
			color: #2196F3;
			font-size: 14px;
			padding: 6px 12px;
			cursor: pointer;
			transition: all 0.2s;
			font-weight: bold;
			white-space: nowrap;
		}
		.cancel-btn:hover {
			background-color: #f0f0f0;
			border-radius: 4px;
		}

		/* æœç´¢ç»“æœé¡µé¢ - å…¨ç™½èƒŒæ™¯ */
		.search-result-page {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: white;
			z-index: 1000;
			display: none;
			flex-direction: column;
		}
		.search-result-page.active {
			display: flex;
		}
		
		/* æœç´¢ç»“æœé¡µé¢çš„æœç´¢æ  - ä¿æŒä¸åŸæœç´¢æ¡†ç›¸åŒå®½åº¦ */
		.search-result-header {
			background-color: white;
			padding: 8px 15px;
			border-bottom: 1px solid #e5e5e5;
			display: flex;
			align-items: center;
			position: sticky;
			top: 0;
			z-index: 1001;
			width: 100%;
		}
		
		/* ä¿æŒä¸åŸæœç´¢æ¡†å®Œå…¨ç›¸åŒçš„å®¹å™¨ */
		.search-result-input-wrapper {
			display: flex;
			align-items: center;
			background-color: white;
			border: 1px solid #ddd;
			border-radius: 25px;
			overflow: hidden;
			transition: all 0.3s ease;
			margin-left: -5px;
			width: calc(85% - 5px);
			flex-shrink: 0;
		}
		.search-result-input-wrapper:focus-within {
			border-color: #2196F3;
		}
		
		.search-result-icon-area {
			width: 50px;
			height: 36px;
			background-image: url('æœç´¢.png');
			background-size: cover;
			background-position: center;
			background-repeat: no-repeat;
			background-color: #f5f5f5;
			flex-shrink: 0;
			margin-right: 0;
		}
		
		.search-result-input {
			flex: 1;
			padding: 8px 16px;
			border: none;
			font-size: 15px;
			outline: none;
			background-color: #f5f5f5;
			min-width: 0;
			transition: background-color 0.3s;
		}
		.search-result-input::placeholder {
			color: #999;
			font-size: 14px;
		}
		
		.search-result-actions {
			display: flex;
			align-items: center;
			padding: 0 8px 0 0;
			margin-left: 8px;
		}

		/* è½¯ä»¶åˆ—è¡¨ */
		.software-list {
			padding: 0;
			flex: 1;
			overflow-y: auto;
			background-color: white;
		}
		.software-item {
			display: flex;
			align-items: center;
			padding: 15px;
			background-color: white;
			border-bottom: 1px solid #f0f0f0;
			transition: background-color 0.2s;
		}
		.software-item:hover {
			background-color: #f9f9f9;
		}
		.software-img {
			width: 50px;
			height: 50px;
			border-radius: 8px;
			margin-right: 15px;
			object-fit: cover;
		}
		.software-info {
			flex: 1;
			display: flex;
			flex-direction: column;
		}
		.software-name {
			font-size: 16px;
			font-weight: bold;
			color: #333;
			margin-bottom: 5px;
		}
		.software-score {
			color: #ff6b35;
			font-weight: bold;
			font-size: 14px;
		}
		.download-btn-main {
			padding: 8px 16px;
			background-color: #2196F3;
			color: white;
			border: none;
			border-radius: 15px;
			cursor: pointer;
			font-size: 14px;
			transition: background-color 0.3s;
			text-decoration: none;
		}
		.download-btn-main:hover {
			background-color: #1976D2;
		}
		.no-results {
			text-align: center;
			padding: 40px;
			color: #666;
			font-size: 16px;
			background-color: white;
		}
		.software-list.hidden {
			display: none;
		}

		/* å†å²è®°å½•é¡µé¢ - ä»ç¬¬ä¸€ä¸ªä»£ç ç§»æ¤çš„æ ·å¼ */
		.history-page {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: #f5f5f5;
			z-index: 1000;
			display: none;
			overflow-y: auto;
		}
		.history-page.active {
			display: block;
		}
		.history-header {
			background-color: white;
			padding: 8px 15px;
			border-bottom: 1px solid #e5e5e5;
			display: flex;
			align-items: center;
			position: sticky;
			top: 0;
			z-index: 1001;
		}
		.back-btn {
			background: none;
			border: none;
			font-size: 18px;
			color: #2196F3;
			margin-right: 15px;
			cursor: pointer;
			padding: 5px;
			border-radius: 50%;
			width: 35px;
			height: 35px;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		.back-btn:hover {
			background-color: #f0f0f0;
		}
		.history-title {
			font-size: 16px;
			font-weight: bold;
			color: #333;
			flex: 1;
		}
		.history-content {
			padding: 15px;
		}
		.history-search-item {
			background-color: white;
			margin-bottom: 15px;
			border-radius: 8px;
			overflow: hidden;
			box-shadow: 0 2px 8px rgba(0,0,0,0.1);
		}
		.history-search-header {
			background-color: #f8f9fa;
			padding: 12px 15px;
			display: flex;
			justify-content: space-between;
			align-items: center;
			border-bottom: 1px solid #e5e5e5;
		}
		.history-search-keyword {
			font-size: 14px;
			color: #666;
			flex: 1;
		}
		.history-search-keyword strong {
			color: #333;
		}
		.history-search-btn {
			background-color: #81C784;
			color: white;
			border: none;
			border-radius: 15px;
			padding: 6px 12px;
			font-size: 12px;
			cursor: pointer;
			display: flex;
			align-items: center;
			gap: 4px;
			transition: background-color 0.3s;
		}
		.history-search-btn:hover {
			background-color: #66BB6A;
		}
		.history-search-results {
			padding: 0;
		}
		.history-result-item {
			display: flex;
			align-items: center;
			padding: 12px 15px;
			border-bottom: 1px solid #f0f0f0;
			transition: background-color 0.2s;
		}
		.history-result-item:last-child {
			border-bottom: none;
		}
		.history-result-item:hover {
			background-color: #f9f9f9;
		}
		.history-result-img {
			width: 40px;
			height: 40px;
			border-radius: 6px;
			margin-right: 12px;
			object-fit: cover;
		}
		.history-result-info {
			flex: 1;
			display: flex;
			flex-direction: column;
		}
		.history-result-name {
			font-size: 14px;
			font-weight: bold;
			color: #333;
			margin-bottom: 3px;
		}
		.history-result-score {
			font-size: 12px;
			color: #ff6b35;
		}
		.empty-history {
			text-align: center;
			padding: 60px 20px;
			color: #999;
			font-size: 14px;
		}

		/* é”å®šé¡µé¢çš„é®ç½©å±‚ */
		.page-lock-overlay {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: transparent;
			z-index: 99;
			display: none;
		}
		.page-lock-overlay.active {
			display: block;
		}

		/* å¼¹çª—é®ç½©å±‚ */
		.modal-overlay {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: rgba(0, 0, 0, 0.5);
			z-index: 2000;
			display: none;
			align-items: center;
			justify-content: center;
		}
		.modal-overlay.active {
			display: flex;
		}

		/* å¤§å¼¹çª—æ ·å¼ */
		.large-modal {
			background-color: white;
			border-radius: 16px;
			width: 90%;
			max-width: 400px;
			max-height: 80vh;
			overflow-y: auto;
			position: relative;
			animation: modalSlideIn 0.3s ease-out;
		}
		@keyframes modalSlideIn {
			from {
				opacity: 0;
				transform: scale(0.8) translateY(-20px);
			}
			to {
				opacity: 1;
				transform: scale(1) translateY(0);
			}
		}

		.large-modal-header {
			padding: 20px;
			border-bottom: 1px solid #eee;
			position: relative;
		}

		.large-modal-close {
			position: absolute;
			top: 15px;
			right: 15px;
			background: none;
			border: none;
			font-size: 24px;
			color: #999;
			cursor: pointer;
			width: 30px;
			height: 30px;
			display: flex;
			align-items: center;
			justify-content: center;
			border-radius: 50%;
			transition: all 0.2s;
		}

		.large-modal-close:hover {
			background-color: #f5f5f5;
			color: #333;
		}

		.large-modal-title {
			font-size: 20px;
			font-weight: bold;
			color: #333;
			margin: 0;
			padding-right: 40px;
		}

		.large-modal-body {
			padding: 20px;
		}

		.large-modal-text {
			font-size: 14px;
			color: #666;
			line-height: 1.5;
			margin-bottom: 30px;
		}

		.large-modal-button {
			display: block;
			width: 120px;
			margin: 0 auto;
			padding: 12px 24px;
			background-color: #2196F3;
			color: white;
			border: none;
			border-radius: 25px;
			font-size: 16px;
			font-weight: bold;
			cursor: pointer;
			transition: background-color 0.3s;
			text-decoration: none;
			text-align: center;
		}

		.large-modal-button:hover {
			background-color: #1976D2;
		}

		/* é•¿æ–¹å½¢é€‰æ‹©å¼¹çª— - æ›¿æ¢åŸæ¥çš„åœ†å½¢å¼¹çª— */
		.rectangle-modal {
			background-color: white;
			border-radius: 16px;
			width: 90%;
			max-width: 320px;
			min-height: 250px;
			position: relative;
			animation: rectangleModalSlideIn 0.3s ease-out;
			display: flex;
			flex-direction: column;
			align-items: center;
			padding: 30px 20px 20px;
			max-height: 80vh;
			overflow-y: auto;
		}
		@keyframes rectangleModalSlideIn {
			from {
				opacity: 0;
				transform: scale(0.8) translateY(-20px);
			}
			to {
				opacity: 1;
				transform: scale(1) translateY(0);
			}
		}

		.rectangle-modal-title {
			font-size: 18px;
			font-weight: bold;
			color: #333;
			margin-bottom: 20px;
			text-align: center;
		}

		.rectangle-modal-options {
			display: flex;
			flex-direction: column;
			gap: 12px;
			width: 100%;
		}

		.rectangle-modal-option {
			padding: 12px 20px;
			background-color: #f5f5f5;
			border: none;
			border-radius: 8px;
			font-size: 14px;
			color: #333;
			cursor: pointer;
			transition: all 0.2s;
			text-align: center;
		}

		.rectangle-modal-option:hover {
			background-color: #2196F3;
			color: white;
			transform: translateY(-1px);
		}

		.rectangle-modal-option:active {
			transform: translateY(0);
		}

		.rectangle-modal-close {
			position: absolute;
			top: 15px;
			right: 15px;
			background: none;
			border: none;
			font-size: 20px;
			color: #999;
			cursor: pointer;
			width: 25px;
			height: 25px;
			display: flex;
			align-items: center;
			justify-content: center;
			border-radius: 50%;
			transition: all 0.2s;
		}

		.rectangle-modal-close:hover {
			background-color: #f5f5f5;
			color: #333;
		}

		/* åº•éƒ¨å¯¼èˆªæ  */
		.bottom-nav {
			position: fixed;
			bottom: 0;
			left: 0;
			width: 100%;
			height: 60px;
			background-color: #fff;
			border-top: 1px solid #e5e5e5;
			display: flex;
			justify-content: space-around;
			align-items: center;
			z-index: 200;
			box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
		}
		.nav-item {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			flex: 1;
			height: 100%;
			text-decoration: none;
			color: #999;
			transition: color 0.3s;
			position: relative;
		}
		.nav-item.active {
			color: #4CAF50;
		}
		.nav-item:hover {
			color: #4CAF50;
		}
		.nav-icon {
			width: 24px;
			height: 24px;
			margin-bottom: 4px;
			font-size: 20px;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		.nav-text {
			font-size: 12px;
			font-weight: normal;
		}
		.icon-home::before { content: "ğŸ "; }
		.icon-page::before { content: "ğŸ“„"; }
		.icon-profile::before { content: "ğŸ‘¤"; }
	</style>
</head>
<body>

	<!-- åŸå§‹é¡µé¢ -->
	<div class="search-section">
		<div class="search-container">
			<div class="search-icon-area"></div>
			<input type="text" id="searchInput" class="search-box" placeholder="æœç´¢è½¯ä»¶åç§°">
			<div class="search-actions">
				<span id="searchText" class="search-text">æœç´¢</span>
			</div>
		</div>
		<button id="historyBtn" class="history-btn"></button>
		<button id="cancelBtn" class="cancel-btn" style="display: none;">å–æ¶ˆ</button>
	</div>

	<!-- è½¯ä»¶åˆ—è¡¨ -->
	<div id="softwareList" class="software-list">
		<!-- JS åŠ¨æ€ç”Ÿæˆ -->
	</div>

	<!-- æœç´¢ç»“æœé¡µé¢ - å…¨ç™½èƒŒæ™¯ -->
	<div id="searchResultPage" class="search-result-page">
		<div class="search-result-header">
			<!-- ä½¿ç”¨å®Œå…¨ç›¸åŒçš„æœç´¢æ¡†ç»“æ„ -->
			<div class="search-result-input-wrapper">
				<div class="search-result-icon-area"></div>
				<input type="text" id="searchResultInput" class="search-result-input" placeholder="æœç´¢è½¯ä»¶åç§°">
				<div class="search-result-actions">
					<span class="search-text">æœç´¢</span>
				</div>
			</div>
			<button id="resultCancelBtn" class="cancel-btn">å–æ¶ˆ</button>
		</div>
		<div id="resultSoftwareList" class="software-list">
			<!-- æœç´¢ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
		</div>
	</div>

	<!-- å†å²è®°å½•é¡µé¢ - ä»ç¬¬ä¸€ä¸ªä»£ç ç§»æ¤ -->
	<div id="historyPage" class="history-page">
		<div class="history-header">
			<button id="backBtn" class="back-btn">â†</button>
			<div class="history-title">å†å²è®°å½•</div>
		</div>
		<div id="historyContent" class="history-content">
			<!-- JS åŠ¨æ€ç”Ÿæˆ - æ˜¾ç¤ºæœç´¢å†å²å’Œå¯¹åº”ç»“æœ -->
		</div>
	</div>

	<!-- å¤§å¼¹çª— -->
	<div id="largeModal" class="modal-overlay">
		<div class="large-modal">
			<div class="large-modal-header">
				<h2 id="largeModalTitle" class="large-modal-title"></h2>
				<button id="largeModalClose" class="large-modal-close">Ã—</button>
			</div>
			<div class="large-modal-body">
				<p id="largeModalText" class="large-modal-text"></p>
				<button id="largeModalButton" class="large-modal-button">è·å–</button>
			</div>
		</div>
	</div>

	<!-- é•¿æ–¹å½¢é€‰æ‹©å¼¹çª— - æ›¿æ¢åŸæ¥çš„åœ†å½¢å¼¹çª— -->
	<div id="rectangleModal" class="modal-overlay">
		<div class="rectangle-modal">
			<button id="rectangleModalClose" class="rectangle-modal-close">Ã—</button>
			<h3 id="rectangleModalTitle" class="rectangle-modal-title"></h3>
			<div id="rectangleModalOptions" class="rectangle-modal-options">
				<!-- åŠ¨æ€ç”Ÿæˆé€‰é¡¹ -->
			</div>
		</div>
	</div>

<!-- åº•éƒ¨å¯¼èˆªæ  -->
<div class="bottom-nav">
	<!-- ä¸»é¡µæŒ‰é’®ï¼šæ·»åŠ onclické˜»æ­¢é»˜è®¤è¡Œä¸º -->
	<a href="index.html" class="nav-item active" data-page="home" onclick="return false;">
		<div class="nav-icon icon-home"></div>
		<div class="nav-text">ä¸»é¡µ</div>
	</a>
	<a href="index2.html" class="nav-item" data-page="page">
		<div class="nav-icon icon-page"></div>
		<div class="nav-text">ä½œè€…</div>
	</a>
	<a href="index3.html" class="nav-item" data-page="profile">
		<div class="nav-icon icon-profile"></div>
		<div class="nav-text">æˆ‘çš„</div>
	</a>
</div>

	<script>
		// è½¯ä»¶æ•°æ® - åªç»™ç¹èŒ‚ç‰ˆæ·»åŠ äº† downloadText å­—æ®µ
		const softwareData = [
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å®˜æ–¹ç‰ˆ",
				score: "8.7åˆ†  åŸæ±åŸå‘³çš„ä¸­æ–‡å®˜æ–¹ç‰ˆæœ¬",
				download: "https://pvz2apk-cdn.ditwan.cn/1730/baokai_3.9.0_1730_381_dj2.0-3.0.0.apk",
				download2: null,
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2.jpg"
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2æ—¶ç©ºå†æ—…1.0.4",
				score: "8.8åˆ†  ä½œè€…ï¼šæƒ³ä¸å‡ºåå­—ã€Mzå·¥ä½œå®¤",
				download: "é“¾æ¥",
				download2: "æ—¶ç©ºå†æ—….html",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2æ—¶ç©ºå†æ—….jpg"
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2Arkç‰ˆ",
				score: "8.7åˆ†  ä½œè€…ï¼šä»Šéœ„æ˜¯é£˜é€¸çš„åˆ©å·±ä¸»ä¹‰è€…",
				download: "https://www.123684.com/s/zWgIjv-XcA8",
				download2: "æ—¶ç©ºå†æ—….html",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2ark.jpg"
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2è¡ç”Ÿç‰ˆ",
				score: "7.8åˆ†  ä½œè€…ï¼šä¸œåŒ—é›¨å§çš„ç²‰ä¸",
				download: "https://www.123684.com/s/zWgIjv-ncA8",
				download2: "æ—¶ç©ºå†æ—….html",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2è¡ç”Ÿ.jpg"
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å›½é™…ç‰ˆï¼ˆæ±‰åŒ–+æ¢å¤æ‹“å±•+æ¢å¤éŸ³ä¹ï¼‰",
				score: "9.0åˆ†  ä½œè€…ï¼šç‰¹åˆ«çš„ä¼Šå°†å†› ç‰ˆæœ¬12.7.1",
				download: "http://www.123865.com/s/Xpv9-ndDxh",
				download2: "æ—¶ç©ºå†æ—….html",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å›½é™…ç‰ˆæ±‰åŒ–.jpg"
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2è¿”èŒ‚ç‰ˆï¼ˆPvZ 2: Reflourishedï¼‰",
				score: "8.9åˆ†  æ€»ä½œè€…ï¼šPvZABFanï¼†PeaMix",
				download: "",
				download2: "",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2è¿”èŒ‚.jpg",
				downloadText: "è·å–" // åªä¸ºç¹èŒ‚ç‰ˆæ·»åŠ äº†è‡ªå®šä¹‰ä¸‹è½½æŒ‰é’®æ–‡æœ¬
			},
			{
				rank: 1,
				name: "Team Sparks Il PvZ2 Moddersï¼ˆéœ€è¦é­”æ³•ï¼‰",
				score: "8åˆ† ä¸€ä¸ªç”±ç”»å¸ˆå’Œæ¨¡ç»„ä½œè€…ç»„æˆçš„å›¢é˜Ÿï¼Œè‡´åŠ›äºåˆ›å»ºã€åŠ¨ç”»å’Œç¼–å†™ç´ æï¼Œä¾›æ¨¡ç»„ç¤¾åŒºå…è´¹ä½¿ç”¨!",
				download: "https://discord.gg/fAuHJNRM2y",
				download2: "",
				image: "TeamSpark.jpg",
				downloadText: "å‰å¾€" // åªä¸ºç¹èŒ‚ç‰ˆæ·»åŠ äº†è‡ªå®šä¹‰ä¸‹è½½æŒ‰é’®æ–‡æœ¬
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2ï¼šè¿·å®«å›å“",
				score: "7.9åˆ†  ä¸€æ¬¾ä¸é”™çš„è¿·å®«æ”¹ç‰ˆï¼Œå†…å«ä¸°å¯Œçš„æ¸¸æˆå†…å®¹ï¼",
				download: "",
				download2: "",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2è¿·å®«å›å“.jpg",
				downloadText: "å‰å¾€" // åªä¸ºç¹èŒ‚ç‰ˆæ·»åŠ äº†è‡ªå®šä¹‰ä¸‹è½½æŒ‰é’®æ–‡æœ¬
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2ï¼šè¿·å®«æ‹“å±•ç‰ˆ",
				score: "8.1åˆ†  å®Œæˆåº¦å¾ˆçš„è¿·å®«æ”¹ç‰ˆï¼Œæ‹¥æœ‰å¦™è¶£æ¨ªç”Ÿçš„æ¸¸æˆä½“éªŒï¼",
				download: "",
				download2: "",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2è¿·å®«æ‹“å±•.jpg",
				downloadText: "å‰å¾€" // åªä¸ºç¹èŒ‚ç‰ˆæ·»åŠ äº†è‡ªå®šä¹‰ä¸‹è½½æŒ‰é’®æ–‡æœ¬
			},
			{
				rank: 1,
				name: "å°é©¬å®è‰å¤§æˆ˜åƒµå°¸5",
				score: "8.6åˆ†  å°é©¬å®è‰å¤§æˆ˜åƒµå°¸çš„ç¬¬äº”éƒ¨ï¼Œå°é©¬å¤§æˆ˜åƒµå°¸æ”¶å®˜ä¹‹ä½œï¼",
				download: "",
				download2: "",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å°é©¬.jpg",
				downloadText: "å‰å¾€" // åªä¸ºç¹èŒ‚ç‰ˆæ·»åŠ äº†è‡ªå®šä¹‰ä¸‹è½½æŒ‰é’®æ–‡æœ¬
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å¤©ç©ºä¹‹åŸå†…è´­ç ´è§£",
				score: "7.9åˆ†  ç»å…¸è¿·å®«ç‰ˆv1.6.1å†…è´­ç ´è§£ç‰ˆï¼æ— é¡»èŠ±é’±å³å¯è·å–èµ„æº æ­¤ç‰ˆæœ¬çº¯ç¨æ›²ï¼",
				download: "https://www.123684.com/s/zWgIjv-VcA8",
				download2: "",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å¤©ç©ºä¹‹åŸ.jpg",
				
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸æ— å°½ç‰ˆå†…è´­ç ´è§£",
				score: "7.7åˆ†  ç»å…¸ä¸€ä»£å®˜æ–¹ç‰ˆæœ¬å†…è´­ç ´è§£ï¼ŒåŒ…å«è¥¿æ¸¸ã€é¾™å®«ã€é•¿åŸä¸‰å¤§å†…å®¹ï¼",
				download: "https://www.123684.com/s/zWgIjv-VcA8",
				download2: "",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸æ— å°½ç‰ˆ.jpg",
				
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸å…¨æ˜æ˜Ÿqwqç‰ˆ",
				score: "8.5åˆ†  ç»å…¸å…¨æ˜æ˜Ÿç‰ˆæœ¬çš„æ”¹ç‰ˆï¼å†…æ¶µä¸°å¯Œå†…å®¹å’Œæ— ä¸ä¼¦æ¯”çš„æ–°å¥‡ä½“éªŒ",
				download: "æ— ",
				download2: "1",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸å…¨æ˜æ˜Ÿqwq.jpg",
				
			},
			{
				rank: 1,
				name: "Plants vs Zombiesï¼šBrave New World",
				score: "8.8åˆ†  ç›®å‰ä»…æ”¯æŒç”µè„‘ç«¯æ¸¸ç©ï¼ŒåŠ å…¥ç¾¤èŠåœ¨ç¾¤æ–‡ä»¶ä¸­ä¸‹è½½æ¸¸æˆåŒ…",
				download: "æ— ",
				download2: "1",
				image: "PlantsvsZombiesï¼šBraveNewWorld.jpg",
				
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸ï¼šä¹Padç‰ˆ",
				score: "6.8åˆ† åœ¨ä¸€ä¼—ä¸€ä»£ç‰ˆæœ¬ä¸­ï¼Œæ­¤ç‰ˆæœ¬ååˆ†é«˜æ¸…ï¼å¯¹é«˜ç‰ˆæœ¬ç³»ç»Ÿçš„é€‚é…ä¹Ÿæ˜¯ä¸€æµçš„ã€‚",
				download: "æ— ",
				download2: "1",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸ä¹padç‰ˆ.jpg",
				
			}
		];

		// å¼¹çª—æ•°æ®
		const popupData = [
			{
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2è¿”èŒ‚ç‰ˆï¼ˆPvZ 2: Reflourishedï¼‰",
				text: "åŠ å…¥å®˜æ–¹ä»£ç†ç¤¾åŒºï¼",
				downloads: [
					{
						url: "é“¾æ¥1",
						text: "åŠ å…¥QQ5ç¾¤"
					},
					{
						url: "é“¾æ¥2",
						text: "åŠ å…¥QQ3ç¾¤"
					},
					{
						url: "é“¾æ¥3",
						text: "åŠ å…¥QQ2ç¾¤"
					},
					{
						url: "é“¾æ¥4",
						text: "åŠ å…¥QQ4ç¾¤"
					},
					{
						url: "https://discord.gg/ba9rC7Qdkb",
						text: "åŠ å…¥Discordï¼ï¼ˆéœ€è¦æ‚¨ä¼šé­”æ³•ï¼‰"
					}
				]
			},
			{
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2ï¼šè¿·å®«å›å“",
				text: "åŠ å…¥å®˜æ–¹ç¾¤ï¼åœ¨ç¾¤å†…è·å–æ¸¸æˆèµ„æº",
				downloads: [
					{
						url: "https://qun.qq.com/universal-share/share?ac=1&authKey=cvrccBe19rE5c9UGSdpw7ZphWwWT1GHHlThgDodYXqVkSyDgW9FQP%2BKKWYii1rVk&busi_data=eyJncm91cENvZGUiOiI4MzIyODcwOTgiLCJ0b2tlbiI6Im1Xb3ZwMWI5dEVlbkxaL2pzQllkaC9JWS9lbGJ6M1hsaGkyK2VqVndReXFBQy9RVHBPUVlId2NDbVNTRlFlTEciLCJ1aW4iOiIxMzIyMDMzNTkyIn0=&data=oi3-XRWXuYVNGnErhbB3YMpemyq_gnifJmv3NtJNXfPxB3riOG97HAeXzQBiEobSQaMNPjGzKHgUjG1Hu0StcV3D9gw3VD2QsMXZMow3iUM&svctype=5&tempid=h5_group_info",
						text: "åŠ å…¥QQäº¤æµç¾¤è·å–"
					}
				]
			},
			{
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸å…¨æ˜æ˜Ÿqwqç‰ˆ",
				text: "åŠ å…¥å®˜æ–¹ç¾¤ï¼åœ¨ç¾¤å†…è·å–æ¸¸æˆèµ„æº",
				downloads: [
					{
						url: "https://qun.qq.com/universal-share/share?ac=1&authKey=VrThaikUN6pnRjni858gy8f7Dc7VrkJcRHHAgfT6wVFp6l6Q6x2ZUy7pYeaiqK2k&busi_data=eyJncm91cENvZGUiOiIxMDUzMjcwMzA2IiwidG9rZW4iOiJpSHcxWmlaL1d6N0ovU2tKSGVtMXplM2pXZFI1RDlsYWdKYTBzTDBZZGpacy95ZW13MDF1UGVVK0VoNVZIa1ZTIiwidWluIjoiMjAxOTk0NzA4NSJ9&data=_U9WSDDR7BNvN6vDUl-XmJCqSen9uSB2caP3hsd34DiAb6547Uu7ZxlAFXaFobAnkeeTggnrreyN_6ZU46IZsTtk1sRnumBcbAIcYr9UCLo&svctype=5&tempid=h5_group_info",
						text: "åŠ å…¥QQäº¤æµç¾¤è·å–"
					}
				]
			},
			{
				name: "Team Sparks Il PvZ2 Moddersï¼ˆéœ€è¦é­”æ³•ï¼‰",
				text: "åŠ å…¥å®˜æ–¹Discordç¤¾åŒºï¼",
				downloads: [
					{
						url: "https://discord.gg/fAuHJNRM2y",
						text: "åŠ å…¥Discord"
					}
				]
			},
			{
				name: "å°é©¬å®è‰å¤§æˆ˜åƒµå°¸5",
				text: "ç»å¤šå¹´å®ˆå«æ§ä½åƒµå°¸ï¼Œä½†å°é©¬è°·å·²æˆåºŸå¢Ÿã€‚æ˜Ÿå…‰ç† ç† å†³å®šç©¿è¶Šåˆ°ç¬¬ä¸€å¤©å‰¿ç­åƒµå°¸ï¼Œé‡å¯æ—¶ç©ºæ‰­è½¬æ®‹å±€ï¼",
				downloads: [
					{
						url: "https://qun.qq.com/universal-share/share?ac=1&authKey=ICKWdXFQqBR%2BaHrB9/JPygRkqF6DEspJxwRCDW/D74YpMuDTGYQfhaPWiU8sOKmu&busi_data=eyJncm91cENvZGUiOiI1NDc2NTgyOTUiLCJ0b2tlbiI6ImZHSUpDT09Zc2tmYWt2aXRHY0ZDZy9hMW5ibFBFd1VpRnFkWWlQR0dxTzRCZ1k5aE1CSE5zS2pGQW1GT2huTCsiLCJ1aW4iOiIyMDE5OTQ3MDg1In0=&data=ZbIpXGFKVTxPpzZ6cgQI-1O9cD5gWFfsfbf4cNwmOUJIA1Hy9D-UzcjY135YMCmtzfBl4RIulZJJbU5AIseRT8cIvcvCgWXIS0aFTmLLago&svctype=5&tempid=h5_group_info",
						text: "åŠ å…¥QQå®˜æ–¹ç¾¤è·å–"
					},
					{
						url: "https://www.123684.com/s/zWgIjv-tcA8",
						text: "åœ¨çº¿123äº‘ç›˜ä¸‹è½½"
					}
				]
			},
			{
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2ï¼šè¿·å®«æ‹“å±•ç‰ˆ",
				text: "åŠ å…¥å®˜æ–¹QQç¾¤ï¼ä¸‹è½½æœ€æ–°æ¸¸æˆèµ„æº",
				downloads: [
					{
						url: "https://qun.qq.com/universal-share/share?ac=1&authKey=4CX14sTwi007tFiMdmoY8%2BdRZ9MPsDJ0gKuxL850OQw6xP6KVOQvnmGCQM/vp%2B4g&busi_data=eyJncm91cENvZGUiOiIxMDQ0OTMyNjM2IiwidG9rZW4iOiJLSDU3Z2padlhlMVFaR2lScjJCM3FkVGMxN1NTM2NtWHl3bkNXRGlpbUxRMVZMUktxcHlJbEFpV2dZRzJpMCtpIiwidWluIjoiMjAxOTk0NzA4NSJ9&data=yf5Zly7jOcjnvn1SGtouhSK2YIFKTngQnOP17PrbdFKVQ6HM0r_QR8oYjYJNJEblDLZm_Q91KN4cuTVxFk-FNUSrUSfTT7nPJWx-YLAwvQ8&svctype=5&tempid=h5_group_info",
						text: "æŸ¥çœ‹ç¾¤ç®€ä»‹ï¼ŒåŠ å…¥æ‹“å±•QQå®˜æ–¹ç¾¤"
					},
					{
						url: "https://1drv.ms/f/c/ca303ad2d43918b2/ErIYOdTSOjAggMqpAAAAAAABaYJBklXNYVebE24ZXcG_yQ",
						text: "ä½¿ç”¨onedriveåœ¨çº¿ä¸‹è½½ï¼ˆéœ€è¦é­”æ³•ï¼‰"
					}
				]
			},
			{
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸æ— å°½ç‰ˆå†…è´­ç ´è§£",
				text: "è¯¥ç‰ˆæœ¬è¾ƒä¸ºè¿œå¤ï¼Œå†…è´­ç ´è§£ä¼šé—ªé€€ï¼Œä½†å¯æ­£å¸¸åˆ°è´¦ã€‚é«˜ç³»ç»Ÿæ‰‹æœºå¯åŠ¨æ—¶å°æ¦‚ç‡é—ªé€€ï¼Œä½†ç¬¬ä¸‰æ¬¡å¿…å®šè¿›å…¥ã€‚",
				downloads: [
					{
						url: "https://www.123684.com/s/zWgIjv-deA8",
						text: "äº‘ç›˜ä¸‹è½½"
					}
				]
			},
			{
				name: "Plants vs Zombiesï¼šBrave New World",
				text: "ã€Šæ¤ç‰©å¤§æˆ˜åƒµå°¸ï¼šç¾ä¸½æ–°ä¸–ç•Œã€‹é‡æ‹¾ç³»åˆ—ç»å…¸ç©æ³•ã€‚å¼€æ”¾æ›´å¤šçš„è‡ªå®šä¹‰æ’ä»¶é¡¹ç›®ï¼Œå¸¦æ¥æ— ä¸ä¼¦æ¯”çš„ä½“éªŒã€‚ç©å®¶å°†å†åº¦å¼€å¯è·¨æ—¶ç©ºå†’é™©ï¼Œæ”¶é›†å¹¶è¿ç”¨æ¤ç‰©ï¼Œå…¨åŠ›æŠµå¾¡åƒµå°¸æµªæ½®çš„å…¥ä¾µï¼Œé‡æ¸©åŸå‘³å¡”é˜²ä½“éªŒã€‚",
				downloads: [
					{
						url: "https://qun.qq.com/universal-share/share?ac=1&authKey=Kc5oaRXj%2Byj5JFQBXIb6%2BahpROq501Hkc37JlZJV39e5LRpkLK6T7f7nCs%2BLB6VX&busi_data=eyJncm91cENvZGUiOiI5NDU4MzkyNzUiLCJ0b2tlbiI6ImcxMFBXTjlEdHpwS2tFV0pwWWFsVjdVSXhqT291VDlwSFk2THBCMGJGQWZ3VnBIYlNrN0hUdm01Tk50ZjlNQVIiLCJ1aW4iOiIyMDE5OTQ3MDg1In0%3D&data=nRCXpJvEAtbQCGSi49sXjuGj_uFc1dwXcLyMfNpqV72DHD68TxSqnQi4LQB2US8s7cINSag_xnr0VPPc27gEJNtEQXQfVGMeoQGGdX5auEg&svctype=5&tempid=h5_group_info",
						text: "ç‚¹å‡»åŠ ç¾¤è·å–"
					}
				]
			},
			{
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸ï¼šä¹Padç‰ˆ",
				text: "ç‰ˆæœ¬ç›¸å¯¹äºåŸç‰ˆæ²¡æœ‰èŠ±å›­ã€è§£è°œå…ƒç´ ï¼Œä½†æ˜¯åœ¨å…³å¡ä¸­ä¼šå‡ºç°çŒæœ¨ä¸›ã€‚è€Œå¯¹æ¯”ç§»åŠ¨ç«¯çš„å…¶ä»–ç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„ç‰¹ç‚¹åœ¨äºæ”¯æŒ1280x800åˆ†è¾¨ç‡ç”»é¢ã€‚ä¸”å¯¹äºPADçš„é€‚é…æ›´å¥½ï¼",
				downloads: [
					{
						url: "https://www.123684.com/s/zWgIjv-xeA8",
						text: "äº‘ç›˜ä¸‹è½½"
					}
				]
			}
		];

		const searchInput = document.getElementById('searchInput');
		const searchResultInput = document.getElementById('searchResultInput');
		const softwareList = document.getElementById('softwareList');
		const resultSoftwareList = document.getElementById('resultSoftwareList');
		const searchResultPage = document.getElementById('searchResultPage');
		const searchText = document.getElementById('searchText');
		const resultSearchText = document.querySelector('.search-result-actions .search-text');
		const historyBtn = document.getElementById('historyBtn');
		const cancelBtn = document.getElementById('cancelBtn');
		const resultCancelBtn = document.getElementById('resultCancelBtn');
		const historyPage = document.getElementById('historyPage');
		const backBtn = document.getElementById('backBtn');
		const historyContent = document.getElementById('historyContent');

		// å¼¹çª—å…ƒç´  - æ›¿æ¢ä¸ºé•¿æ–¹å½¢å¼¹çª—
		const largeModal = document.getElementById('largeModal');
		const largeModalTitle = document.getElementById('largeModalTitle');
		const largeModalText = document.getElementById('largeModalText');
		const largeModalButton = document.getElementById('largeModalButton');
		const largeModalClose = document.getElementById('largeModalClose');

		const rectangleModal = document.getElementById('rectangleModal');
		const rectangleModalTitle = document.getElementById('rectangleModalTitle');
		const rectangleModalOptions = document.getElementById('rectangleModalOptions');
		const rectangleModalClose = document.getElementById('rectangleModalClose');

		// æŒ‰åˆ†æ•°ä»é«˜åˆ°ä½æ’åº
		const sortedSoftware = [...softwareData].sort((a, b) => {
			const scoreA = parseFloat(a.score);
			const scoreB = parseFloat(b.score);
			return scoreB - scoreA;
		});

		// æœç´¢å†å²è®°å½•
		let searchHistory = JSON.parse(localStorage.getItem('searchHistory') || '[]');
		
		// æ¸²æŸ“è½¯ä»¶åˆ—è¡¨
		function renderSoftwareList(softwareToShow, container = softwareList) {
			if (softwareToShow.length === 0) {
				container.innerHTML = '<div class="no-results">æ²¡æœ‰æ‰¾åˆ°ç›¸å…³è½¯ä»¶</div>';
				return;
			}
			const listHTML = softwareToShow.map(item => {
				let downloadButton = '';
				
				// ç¡®å®šä¸‹è½½æŒ‰é’®æ–‡æœ¬
				let buttonText = item.downloadText || 'ä¸‹è½½';
				
				// æ£€æŸ¥æ˜¯å¦æœ‰å¯¹åº”çš„å¼¹çª—æ•°æ®
				const popupInfo = popupData.find(popup => popup.name === item.name);
				
				// å¦‚æœæœ‰å¼¹çª—æ•°æ®ï¼Œæ€»æ˜¯æ˜¾ç¤ºå¼¹çª—ï¼ˆæ— è®ºæœ‰å¤šå°‘ä¸ªä¸‹è½½é€‰é¡¹ï¼‰
				if (popupInfo) {
					const buttonAction = `onclick="showPopup('${item.name}')"`;
					downloadButton = `<button class="download-btn-main" ${buttonAction}>${buttonText}</button>`;
				} else if (item.download && item.download !== 'é“¾æ¥' && item.download !== 'null' && item.download.trim() !== '') {
					// åªæœ‰ç›´æ¥ä¸‹è½½é“¾æ¥ä¸”æ²¡æœ‰å¼¹çª—æ•°æ®æ—¶ï¼Œæ‰ç›´æ¥ä¸‹è½½
					downloadButton = `<a href="${item.download}" class="download-btn-main" target="_blank">${buttonText}</a>`;
				} else if (item.download2 && item.download2 !== 'null' && item.download2.trim() !== '' && !item.download2.endsWith('.html')) {
					// å¦‚æœdownload2ä¸æ˜¯.htmlæ–‡ä»¶ï¼Œç†è®ºä¸Šåº”è¯¥ä¹Ÿæœ‰å¼¹çª—æ•°æ®ï¼Œä½†ä»¥é˜²ä¸‡ä¸€
					downloadButton = `<a href="${item.download2}" class="download-btn-main" target="_blank">${buttonText}</a>`;
				} else if (item.download2 && item.download2 !== 'null' && item.download2.trim() !== '' && item.download2.endsWith('.html')) {
					// .htmlæ–‡ä»¶ç›´æ¥è·³è½¬
					downloadButton = `<a href="${item.download2}" class="download-btn-main" target="_blank">${buttonText}</a>`;
				} else {
					downloadButton = `<span class="download-btn-main" style="background-color: #ccc; cursor: not-allowed;">æš‚æ— ä¸‹è½½</span>`;
				}
				
				return `
					<div class="software-item">
						<img src="${item.image}" class="software-img" alt="${item.name}">
						<div class="software-info">
							<div class="software-name">${item.name}</div>
							<div class="software-score">${item.score}</div>
						</div>
						${downloadButton}
					</div>
				`;
			}).join('');
			container.innerHTML = listHTML;
		}

		// æ˜¾ç¤ºå¼¹çª—
		function showPopup(softwareName) {
			const popupInfo = popupData.find(popup => popup.name === softwareName);
			if (!popupInfo) return;

			// æ˜¾ç¤ºé•¿æ–¹å½¢é€‰æ‹©å¼¹çª—
			showRectangleModal(popupInfo);
		}

		// æ˜¾ç¤ºå¤§å¼¹çª—
		function showLargeModal(title, text, url) {
			largeModalTitle.textContent = title;
			largeModalText.textContent = text;
			largeModalButton.onclick = () => {
				window.open(url, '_blank');
				hideLargeModal();
			};
			largeModal.classList.add('active');
		}

		// éšè—å¤§å¼¹çª—
		function hideLargeModal() {
			largeModal.classList.remove('active');
		}

		// æ˜¾ç¤ºé•¿æ–¹å½¢é€‰æ‹©å¼¹çª— - ä¿®å¤åçš„ç‰ˆæœ¬ï¼Œæ˜¾ç¤ºæè¿°æ–‡æœ¬
		function showRectangleModal(popupInfo) {
			rectangleModalTitle.textContent = popupInfo.name; // ä½¿ç”¨è½¯ä»¶åç§°ä½œä¸ºæ ‡é¢˜
			
			// æ¸…ç©ºç°æœ‰é€‰é¡¹
			rectangleModalOptions.innerHTML = '';
			
			// å…ˆæ·»åŠ æè¿°æ–‡æœ¬
			const descriptionDiv = document.createElement('div');
			descriptionDiv.style.cssText = `
				font-size: 14px;
				color: #666;
				line-height: 1.5;
				margin-bottom: 20px;
				text-align: center;
				padding: 0 10px;
			`;
			descriptionDiv.textContent = popupInfo.text;
			rectangleModalOptions.appendChild(descriptionDiv);
			
			// æ·»åŠ åˆ†å‰²çº¿
			const divider = document.createElement('div');
			divider.style.cssText = `
				width: 100%;
				height: 1px;
				background-color: #e5e5e5;
				margin-bottom: 15px;
			`;
			rectangleModalOptions.appendChild(divider);
			
			// æ·»åŠ ä¸‹è½½é€‰é¡¹æ ‡é¢˜
			const optionsTitle = document.createElement('div');
			optionsTitle.style.cssText = `
				font-size: 14px;
				font-weight: bold;
				color: #333;
				margin-bottom: 12px;
				text-align: center;
			`;
			optionsTitle.textContent = 'è¯·é€‰æ‹©ä¸‹è½½æ–¹å¼ï¼š';
			rectangleModalOptions.appendChild(optionsTitle);
			
			// æ·»åŠ é€‰é¡¹
			popupInfo.downloads.forEach((download, index) => {
				const option = document.createElement('button');
				option.className = 'rectangle-modal-option';
				option.textContent = download.text;
				option.onclick = () => {
					window.open(download.url, '_blank');
					hideRectangleModal();
				};
				rectangleModalOptions.appendChild(option);
			});
			
			rectangleModal.classList.add('active');
		}

		// éšè—é•¿æ–¹å½¢é€‰æ‹©å¼¹çª—
		function hideRectangleModal() {
			rectangleModal.classList.remove('active');
		}

		// ä¿å­˜æœç´¢å†å²
		function saveSearchHistory(keyword) {
			if (!keyword.trim()) return;
			
			// ç§»é™¤é‡å¤çš„å…³é”®è¯
			searchHistory = searchHistory.filter(item => item.keyword !== keyword);
			
			// æ·»åŠ æ–°çš„æœç´¢è®°å½•åˆ°å¼€å¤´
			searchHistory.unshift({
				keyword: keyword,
				timestamp: Date.now()
			});
			
			// åªä¿ç•™æœ€è¿‘10æ¬¡æœç´¢
			if (searchHistory.length > 10) {
				searchHistory = searchHistory.slice(0, 10);
			}
			
			localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
		}

		// æ‰§è¡Œæœç´¢
		function performSearch(keyword, container = resultSoftwareList) {
			console.log('æ‰§è¡Œæœç´¢:', keyword);
			
			if (!keyword.trim()) {
				renderSoftwareList(sortedSoftware, container);
				return;
			}
			
			// ä¿å­˜æœç´¢å†å²
			saveSearchHistory(keyword);
			
			const filteredSoftware = sortedSoftware.filter(item =>
				item.name.toLowerCase().includes(keyword.toLowerCase())
			);
			renderSoftwareList(filteredSoftware, container);
		}

		// æ˜¾ç¤ºæœç´¢ç»“æœé¡µé¢
		function showSearchResultPage() {
			searchResultPage.classList.add('active');
			// å°†åŸæœç´¢æ¡†çš„å†…å®¹å¤åˆ¶åˆ°ç»“æœé¡µé¢çš„æœç´¢æ¡†
			searchResultInput.value = searchInput.value;
			searchResultInput.focus();
		}

		// éšè—æœç´¢ç»“æœé¡µé¢
		function hideSearchResultPage() {
			searchResultPage.classList.remove('active');
			searchInput.value = '';
			searchResultInput.value = '';
		}

		// æ¸²æŸ“å†å²è®°å½•é¡µé¢ - ä»ç¬¬ä¸€ä¸ªä»£ç ç§»æ¤çš„åŠŸèƒ½
		function renderHistoryPage() {
			if (searchHistory.length === 0) {
				historyContent.innerHTML = '<div class="empty-history">æš‚æ— æœç´¢å†å²</div>';
				return;
			}

			// ç”¨äºè·Ÿè¸ªå·²ç»æ˜¾ç¤ºè¿‡çš„è½¯ä»¶
			const displayedSoftware = new Set();
			let historyHTML = '';

			// æŒ‰é¡ºåºå¤„ç†æ¯ä¸ªæœç´¢å…³é”®è¯ï¼Œè·³è¿‡å·²æ˜¾ç¤ºçš„è½¯ä»¶
			searchHistory.forEach(historyItem => {
				// å¯¹è¯¥å…³é”®è¯æœç´¢è½¯ä»¶ï¼Œæ’é™¤å·²æ˜¾ç¤ºçš„
				const results = sortedSoftware.filter(item => {
					const isMatch = item.name.toLowerCase().includes(historyItem.keyword.toLowerCase());
					const isNotDisplayed = !displayedSoftware.has(item.name);
					return isMatch && isNotDisplayed;
				}).slice(0, 2); // æ¯ä¸ªå…³é”®è¯æœ€å¤šæ˜¾ç¤º2ä¸ªç»“æœ

				if (results.length > 0) {
					// å°†ç»“æœæ˜¾ç¤ºå¹¶æ ‡è®°ä¸ºå·²æ˜¾ç¤º
					const resultsHTML = results.map(result => {
						// æ ‡è®°è¯¥è½¯ä»¶ä¸ºå·²æ˜¾ç¤º
						displayedSoftware.add(result.name);
						
						return `
							<div class="history-result-item">
								<img src="${result.image}" class="history-result-img" alt="${result.name}">
								<div class="history-result-info">
									<div class="history-result-name">${result.name}</div>
									<div class="history-result-score">${result.score}</div>
								</div>
								<a href="${result.download && result.download !== 'é“¾æ¥' ? result.download : result.download2}" 
								   class="download-btn-main" target="_blank" style="padding: 6px 12px; font-size: 12px;">
									ä¸‹è½½
								</a>
							</div>
						`;
					}).join('');

					historyHTML += `
						<div class="history-search-item">
							<div class="history-search-header">
								<div class="history-search-keyword">
									æœç´¢ï¼š<strong>"${historyItem.keyword}"</strong>
								</div>
								<button class="history-search-btn" onclick="quickSearch('${historyItem.keyword}')">
									æœç´¢
								</button>
							</div>
							<div class="history-search-results">
								${resultsHTML}
							</div>
						</div>
					`;
				}
			});

			// æ£€æŸ¥æ˜¯å¦æœ‰ç»“æœæ˜¾ç¤º
			if (historyHTML === '') {
				historyContent.innerHTML = '<div class="empty-history">æ‰€æœ‰è½¯ä»¶å·²åœ¨ä¸Šæ–¹æ˜¾ç¤ºå®Œæ¯•</div>';
			} else {
				historyContent.innerHTML = historyHTML;
			}
		}

		// å¿«é€Ÿæœç´¢å‡½æ•° - åœ¨å†å²è®°å½•ä¸­ç‚¹å‡»æœç´¢æŒ‰é’®æ—¶è°ƒç”¨
		function quickSearch(keyword) {
			// å…³é—­å†å²è®°å½•é¡µé¢
			historyPage.classList.remove('active');
			
			// è®¾ç½®æœç´¢æ¡†çš„å€¼
			searchInput.value = keyword;
			searchResultInput.value = keyword;
			
			// æ‰§è¡Œæœç´¢
			performSearch(keyword, resultSoftwareList);
			
			// æ˜¾ç¤ºæœç´¢ç»“æœé¡µé¢
			showSearchResultPage();
			
			// èšç„¦åˆ°æœç´¢æ¡†
			searchResultInput.focus();
		}

		// åˆå§‹åŒ–
		renderSoftwareList(sortedSoftware);

		// æœç´¢æ¡†è·å¾—ç„¦ç‚¹ - æ˜¾ç¤ºç™½è‰²æœç´¢é¡µé¢
		searchInput.addEventListener('focus', () => {
			showSearchResultPage();
			cancelBtn.style.display = 'block';
			historyBtn.style.display = 'none';
		});

		// åŸå§‹é¡µé¢æœç´¢æŒ‰é’®ç‚¹å‡»äº‹ä»¶
		searchText.addEventListener('click', () => {
			const keyword = searchInput.value.trim();
			if (keyword) {
				performSearch(keyword, softwareList);
			}
		});

		// æœç´¢ç»“æœé¡µé¢æœç´¢æŒ‰é’®ç‚¹å‡»äº‹ä»¶
		resultSearchText.addEventListener('click', () => {
			const keyword = searchResultInput.value.trim();
			if (keyword) {
				performSearch(keyword, resultSoftwareList);
			}
		});

		// åŸå§‹é¡µé¢å–æ¶ˆæŒ‰é’®
		cancelBtn.addEventListener('click', () => {
			hideSearchResultPage();
			cancelBtn.style.display = 'none';
			historyBtn.style.display = 'block';
		});

		// æœç´¢ç»“æœé¡µé¢å–æ¶ˆæŒ‰é’®
		resultCancelBtn.addEventListener('click', () => {
			hideSearchResultPage();
			cancelBtn.style.display = 'none';
			historyBtn.style.display = 'block';
		});

		// å†å²è®°å½•æŒ‰é’®ç‚¹å‡»äº‹ä»¶
		historyBtn.addEventListener('click', () => {
			renderHistoryPage();
			historyPage.classList.add('active');
		});

		// è¿”å›æŒ‰é’®ç‚¹å‡»äº‹ä»¶
		backBtn.addEventListener('click', () => {
			historyPage.classList.remove('active');
		});

		// æœç´¢ç»“æœé¡µé¢è¾“å…¥æ¡†å›è½¦æœç´¢
		searchResultInput.addEventListener('keypress', e => {
			if (e.key === 'Enter') {
				const keyword = searchResultInput.value.trim();
				performSearch(keyword, resultSoftwareList);
			}
		});

		// åŸå§‹é¡µé¢è¾“å…¥æ¡†å›è½¦æœç´¢
		searchInput.addEventListener('keypress', e => {
			if (e.key === 'Enter') {
				const keyword = searchInput.value.trim();
				if (keyword) {
					performSearch(keyword, softwareList);
				}
			}
		});

		// åŒæ­¥ä¸¤ä¸ªæœç´¢æ¡†çš„å†…å®¹
		searchInput.addEventListener('input', () => {
			searchResultInput.value = searchInput.value;
		});

		searchResultInput.addEventListener('input', () => {
			searchInput.value = searchResultInput.value;
		});

		// å¼¹çª—å…³é—­äº‹ä»¶
		largeModalClose.addEventListener('click', hideLargeModal);
		rectangleModalClose.addEventListener('click', hideRectangleModal);

		// ç‚¹å‡»é®ç½©å±‚å…³é—­å¼¹çª—
		largeModal.addEventListener('click', (e) => {
			if (e.target === largeModal) {
				hideLargeModal();
			}
		});

		rectangleModal.addEventListener('click', (e) => {
			if (e.target === rectangleModal) {
				hideRectangleModal();
			}
		});

		// åº•éƒ¨å¯¼èˆªæ¿€æ´»çŠ¶æ€
		document.addEventListener('DOMContentLoaded', () => {
			const navItems = document.querySelectorAll('.nav-item');
			navItems.forEach(item => {
				item.addEventListener('click', function(e) {
					const targetPage = this.getAttribute('data-page');
					const currentPage = window.location.pathname.split('/').pop() || 'index.html';
					if ((targetPage === 'home' && currentPage === 'index.html') ||
						(targetPage === 'page' && currentPage === 'index2.html') ||
						(targetPage === 'profile' && currentPage === 'index3.html')) {
						e.preventDefault();
						return false;
					}
					navItems.forEach(i => i.classList.remove('active'));
					this.classList.add('active');
				});
			});
			const currentPage = window.location.pathname.split('/').pop() || 'index.html';
			if (currentPage === 'index.html') setActiveNavItem('home');
			else if (currentPage === 'index2.html') setActiveNavItem('page');
			else if (currentPage === 'index3.html') setActiveNavItem('profile');
		});

		function setActiveNavItem(targetPage) {
			const navItems = document.querySelectorAll('.nav-item');
			navItems.forEach(item => {
				item.classList.toggle('active', item.getAttribute('data-page') === targetPage);
			});
		}
	</script>
</body>
</html>