<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<title>æ¤åˆ›é­”ç›’</title>
	<style>
.software-item-special {
	position: relative;
	border-radius: 12px;
	overflow: hidden;
	box-shadow: 0 4px 12px rgba(0,0,0,0.2);
	margin: 10px 0;
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 20px;
	background-size: cover;
	background-position: center;
	width: 100%;
}

.special-content {
	display: flex;
	align-items: center;
	width: 100%;
}

.software-item-special .software-img {
	width: 120px;
	height: 120px;
	object-fit: cover;
	border-radius: 8px;
	margin-right: 20px;
	margin-top: -110px;
}

.software-item-special .software-info {
	flex-grow: 1;
	text-align: left;
	display: flex;
	flex-direction: row;
	align-items: center;
	gap: 10px;
}.software-item-special .software-name {
  font-size: 1.5em;
  font-weight: bold;
  color: #fff;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.7);
  
  white-space: normal;
  overflow: visible;
  text-overflow: clip;
  word-break: break-word;

  /* é«˜åº¦å¯è°ƒ */
  height: var(--name-height, 130px); /* é»˜è®¤ 130pxï¼Œå¯è‡ªå®šä¹‰ */

  /* æ–°å¢ï¼šå®½åº¦å¯è°ƒ */
  width: var(--name-width, 100%);   /* é»˜è®¤ 100%ï¼Œå¯è‡ªå®šä¹‰ */
  max-width: 100%;                  /* é˜²æ­¢æº¢å‡º */
  min-width: 0;                     /* æ”¯æŒ flex æ”¶ç¼© */
}

.software-item-special .software-score {
	position: absolute;
	top: 200px;
	left: 40px;
	bottom: 2px;
	font-size: 1.2em;
	color: #ffeb3b;
	text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
	white-space: normal;
	overflow: visible;
	text-overflow: clip;
	word-break: break-word;
	overflow-wrap: break-word;
}
		:root {
			--nav-icon-size: 24px;
			--nav-text-size: 12px;
			--nav-height: 60px;
			--nav-icon-text-gap: 4px;
			--primary-color: #4CAF50;
			--text-secondary: #999;
		}
		* { margin: 0; padding: 0; box-sizing: border-box; }
		body {
			font-family: Arial, sans-serif;
			background-color: #f5f5f5;
			padding: 0;
			touch-action: pan-x pan-y;
			overflow-x: hidden;
			padding-bottom: var(--nav-height);
		}
		html {
			touch-action: manipulation;
			-webkit-text-size-adjust: none;
			-ms-text-size-adjust: none;
			text-size-adjust: none;
		}.white-overlay {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background-color: white;
	z-index: 4000;
	animation: fadeOut 0.3s ease-in-out forwards;
	pointer-events: none;
}/* å¼¹æ€§è¾¹ç¼˜æ•ˆæœ */
.elastic-edge {
  position: absolute;
  left: 0;
  width: 100%;
  height: 0;
  background: rgba(0, 150, 255, 0.1);
  z-index: 1;
  pointer-events: none;
  transition: height 0.3s ease;
  overflow: hidden;
  opacity: 0;
}

.top-elastic {
  top: 0;
  border-bottom: 2px dashed rgba(0, 150, 255, 0.3);
}

.bottom-elastic {
  bottom: 0;
  border-top: 2px dashed rgba(0, 150, 255, 0.3);
}
@keyframes fadeOut {
	0% { opacity: 1; }
	50% { opacity: 1; }
	100% { opacity: 0; }
}
		.search-section {
			background-color: white;
			padding: 8px 15px;
			border-bottom: none;
			position: relative;
		}
		.search-container {
			display: flex;
			align-items: center;
			background-color: white;
			border: 1px solid #ddd;
			border-radius: 25px;
			overflow: hidden;
			transition: all 0.3s ease;
			margin-left: -5px;
			width: calc(85% - 5px);
		}
		.search-container:focus-within {
			border-color: #2196F3;
		}
		.search-icon-area {
			width: 50px; height: 36px;
			background-image: url('æœç´¢.png');
			background-size: cover;
			background-position: center;
			background-repeat: no-repeat;
			background-color: #f5f5f5;
			flex-shrink: 0;
			margin-right: 0;
		}
		.search-box {
			flex: 1;
			padding: 8px 16px;
			border: none;
			font-size: 15px;
			outline: none;
			background-color: #f5f5f5;
			min-width: 0;
			transition: background-color 0.3s;
		}
		.search-box::placeholder {
			color: #999; font-size: 14px;
		}
		.search-actions {
			display: flex;
			align-items: center;
			padding: 0 8px 0 0;
			margin-left: 8px;
		}
		.search-text {
			color: #666;
			font-size: 14px;
			cursor: pointer;
			padding: 4px 8px;
			border-radius: 4px;
			transition: background-color 0.2s;
			white-space: nowrap;
		}
		.search-text:hover {
			background-color: #f0f0f0;
			color: #333;
		}

		.history-btn {
			position: absolute;
			right: 15px; top: 50%;
			transform: translateY(-50%);
			width: 40px; height: 40px;
			background-image: url('å†å²è®°å½•.jpg');
			background-size: contain;
			background-position: center;
			background-repeat: no-repeat;
			background-color: transparent;
			border: none; cursor: pointer;
			padding: 0; transition: all 0.2s;
			border-radius: 6px;
		}
		.history-btn:hover {
			background-color: #f5f5f5;
			transform: translateY(-50%) scale(1.05);
		}
		.history-btn:active {
			transform: translateY(-50%) scale(0.95);
		}

		.cancel-btn {
			position: absolute;
			right: 15px; top: 50%;
			transform: translateY(-50%);
			background: none; border: none;
			color: #2196F3;
			font-size: 14px;
			padding: 6px 12px;
			cursor: pointer;
			transition: all 0.2s;
			font-weight: bold;
			white-space: nowrap;
		}
		.cancel-btn:hover {
			background-color: #f0f0f0;
			border-radius: 4px;
		}

		.search-result-page {
			position: fixed;
			top: 0; left: 0;
			width: 100%; height: 100%;
			background-color: white;
			z-index: 1000;
			display: none;
			flex-direction: column;
		}
		.search-result-page.active {
			display: flex;
		}
		.search-result-header {
			background-color: white;
			padding: 8px 15px;
			border-bottom: 1px solid #e5e5e5;
			display: flex;
			align-items: center;
			position: sticky;
			top: 0; z-index: 1001;
			width: 100%;
		}
		.search-result-input-wrapper {
			display: flex;
			align-items: center;
			background-color: white;
			border: 1px solid #ddd;
			border-radius: 25px;
			overflow: hidden;
			transition: all 0.3s ease;
			margin-left: -5px;
			width: calc(85% - 5px);
			flex-shrink: 0;
		}
		.search-result-input-wrapper:focus-within {
			border-color: #2196F3;
		}
		.search-result-icon-area {
			width: 50px; height: 36px;
			background-image: url('æœç´¢.png');
			background-size: cover;
			background-position: center;
			background-repeat: no-repeat;
			background-color: #f5f5f5;
			flex-shrink: 0;
			margin-right: 0;
		}
		.search-result-input {
			flex: 1;
			padding: 8px 16px;
			border: none;
			font-size: 15px;
			outline: none;
			background-color: #f5f5f5;
			min-width: 0;
			transition: background-color 0.3s;
		}
		.search-result-input::placeholder {
			color: #999; font-size: 14px;
		}
		.search-result-actions {
			display: flex;
			align-items: center;
			padding: 0 8px 0 0;
			margin-left: 8px;
		}

		.software-list {
			padding: 0;
			flex: 1;
			overflow-y: auto;
			background-color: white;
		}
		.software-item {
			display: flex;
			align-items: center;
			padding: 15px;
			background-color: white;
			border-bottom: 1px solid #f0f0f0;
			transition: background-color 0.2s;
		}
		.software-item:hover {
			background-color: #f9f9f9;
		}
		.software-img {
			width: 50px; height: 50px;
			border-radius: 8px;
			margin-right: 15px;
			object-fit: cover;
		}
		.software-info {
			flex: 1;
			display: flex;
			flex-direction: column;
			min-width: 0;
		}
		.software-name {
			font-size: 16px;
			font-weight: bold;
			color: #333;
			margin-bottom: 5px;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			max-width: 100%;
		}
		.software-score {
			color: #ff6b35;
			font-weight: bold;
			font-size: 14px;
		}
		.download-btn-main {
			padding: 8px 16px;
			background-color: #2196F3;
			color: white;
			border: none;
			border-radius: 15px;
			cursor: pointer;
			font-size: 14px;
			transition: background-color 0.3s;
			text-decoration: none;
			display: inline-block;
			text-align: center;
		}
		.download-btn-main:hover {
			background-color: #1976D2;
		}
		.download-btn-main[disabled] {
			background-color: #ccc;
			cursor: not-allowed;
		}
		.no-results {
			text-align: center;
			padding: 40px;
			color: #666;
			font-size: 16px;
			background-color: white;
		}

		.history-page {
			position: fixed;
			top: 0; left: 0;
			width: 100%; height: 100%;
			background-color: #f5f5f5;
			z-index: 1000;
			display: none;
			overflow-y: auto;
		}
		.history-page.active {
			display: block;
		}
		.history-header {
			background-color: white;
			padding: 8px 15px;
			border-bottom: 1px solid #e5e5e5;
			display: flex;
			align-items: center;
			position: sticky;
			top: 0; z-index: 1001;
		}
		.back-btn {
			background: none; border: none;
			font-size: 18px;
			color: #2196F3;
			margin-right: 15px;
			cursor: pointer;
			padding: 5px;
			border-radius: 50%;
			width: 35px; height: 35px;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		.back-btn:hover {
			background-color: #f0f0f0;
		}
		.history-title {
			font-size: 16px;
			font-weight: bold;
			color: #333;
			flex: 1;
		}
		.history-content {
			padding: 15px;
		}
		.history-search-item {
			background-color: white;
			margin-bottom: 15px;
			border-radius: 8px;
			overflow: hidden;
			box-shadow: 0 2px 8px rgba(0,0,0,0.1);
		}
		.history-search-header {
			background-color: #f8f9fa;
			padding: 12px 15px;
			display: flex;
			justify-content: space-between;
			align-items: center;
			border-bottom: 1px solid #e5e5e5;
		}
		.history-search-keyword {
			font-size: 14px;
			color: #666;
			flex: 1;
		}
		.history-search-keyword strong {
			color: #333;
		}
		.history-search-btn {
			background-color: #81C784;
			color: white;
			border: none;
			border-radius: 15px;
			padding: 6px 12px;
			font-size: 12px;
			cursor: pointer;
			display: flex;
			align-items: center;
			gap: 4px;
			transition: background-color 0.3s;
		}
		.history-search-btn:hover {
			background-color: #66BB6A;
		}
		.history-search-results {
			padding: 0;
		}
		.history-result-item {
			display: flex;
			align-items: center;
			padding: 12px 15px;
			border-bottom: 1px solid #f0f0f0;
			transition: background-color 0.2s;
		}
		.history-result-item:last-child {
			border-bottom: none;
		}
		.history-result-item:hover {
			background-color: #f9f9f9;
		}
		.history-result-img {
			width: 40px; height: 40px;
			border-radius: 6px;
			margin-right: 12px;
			object-fit: cover;
		}
		.history-result-info {
			flex: 1;
			display: flex;
			flex-direction: column;
		}
		.history-result-name {
			font-size: 14px;
			font-weight: bold;
			color: #333;
			margin-bottom: 3px;
		}
		.history-result-score {
			font-size: 12px;
			color: #ff6b35;
			font-weight: bold;
		}
		.empty-history {
			text-align: center;
			padding: 60px 20px;
			color: #999;
			font-size: 14px;
		}

		/* åº”ç”¨è¯¦æƒ…é¡µèƒŒæ™¯æ”¹ä¸ºæµ…è“ç™½è‰² */
		#fullscreenModal {
			background-color: #ffffff;
		}
		#fullscreenModal .fullscreen-modal-content {
			background-color: #ffffff;
		}
		#fullscreenModal .fullscreen-modal-header {
			background-color: #ffffff;
			border-bottom: 1px solid #ffffff;
		}
		#fullscreenModal .fullscreen-modal-title {
			color: #1a365d;
		}
		#fullscreenModal .fullscreen-score {
			color: #2c5282;
		}
		#fullscreenModal .fullscreen-desc {
			color: #4a5568;
		}
		#fullscreenModal .fullscreen-download-title {
			color: #2d3748;
		}

		/* æ¸¸æˆå±•ç¤ºåŒºåŸŸèƒŒæ™¯æ”¹ä¸ºæ·¡è“è‰² */
		#imageShowcase {
			background-color: #e6f3ff;
			border: 1px solid #cce7ff;
		}
		#imageShowcase .image-showcase-title {
			color: #1a365d;
		}

		/* ä¸‹è½½æŒ‰é’®æ”¹ä¸ºèƒ¶å›Šå½¢ */
		#fullscreenDownloadOptions .fullscreen-download-option {
			border-radius: 25px;
		}
		/* ä¸‹è½½æŒ‰é’®é«˜äº®è“è‰² */
		#fullscreenDownloadOptions .fullscreen-download-option {
			background: #4285F4;
		}
		#fullscreenDownloadOptions .fullscreen-download-option:hover {
			background: #5A9FFF;
		}

		/* popupæ­£æ–‡åœ†æ¡†å®¹å™¨ */
		.fullscreen-desc-container {
			background-color: white;
			border: 2px solid #cce0ff;
			border-radius: 12px;
			padding: 20px;
			margin: 15px 0 25px 0;
			box-shadow: 0 4px 12px rgba(33, 150, 243, 0.1);
			position: relative;
		}
		.fullscreen-desc-container::before {
			content: '';
			position: absolute;
			top: -2px; left: -2px; right: -2px; bottom: -2px;
			background: linear-gradient(135deg, #2196F3, #64B5F6);
			border-radius: 12px;
			z-index: -1;
			opacity: 0.3;
		}
		.fullscreen-desc-container .fullscreen-desc {
			margin: 0; padding: 0;
			background-color: transparent;
			color: #2d3748;
			line-height: 1.7;
			font-size: 15px;
		}

		/* ä¸‹è½½æŒ‰é’®å°ºå¯¸è°ƒæ•´ */
/* ä¸‹è½½æŒ‰é’®å°ºå¯¸è°ƒæ•´ */
#fullscreenDownloadOptions .fullscreen-download-option {
	/* ä¿®å¤å®½åº¦é—®é¢˜ */
	min-width: 100%;  /* æ”¹ä¸º100% */
	width: 100%;      /* æ”¹ä¸º100% */
	
	/* ç»Ÿä¸€padding */
	padding: 18px 21px; /* åˆå¹¶æˆä¸€ä¸ª */
	
	/* å¢åŠ ä¸Šä¸‹é—´è· */
	margin: 10px 0;  /* ä¸Šä¸‹15pxï¼Œå·¦å³0 */
	
	display: block;
	font-size: 15px;
	/* åˆ é™¤é‡å¤çš„padding-topå’Œpadding-bottom */
}
		#fullscreenDownloadOptions {
			padding: 0 5%;
		}
		#fullscreenDownloadTitle {
			margin: 25px 15px 25px 15px;
		}
		.fullscreen-modal-content {
			padding-bottom: 30px;
		}

		/* æ¨¡æ€æ¡†åŸºç¡€æ ·å¼ */
		.fullscreen-modal-overlay {
			position: fixed;
			top: 0; left: 0;
			width: 100%; height: 100%;
			z-index: 3000;
			display: none;
			flex-direction: column;
			overflow: hidden;
		}
		.fullscreen-modal-overlay.active {
			display: flex;
		}
		.fullscreen-modal-header {
			padding: 15px;
			border-bottom: 1px solid #e5e5e5;
			display: flex;
			align-items: center;
			position: sticky;
			top: 0;
			z-index: 3001;
			box-shadow: 0 2px 8px rgba(0,0,0,0.1);
		}
		
		/* æ ‡é¢˜æ å·¦ä¾§å›¾æ ‡ */
		.fullscreen-modal-icon {
			width: 32px;
			height: 32px;
			border-radius: 6px;
			object-fit: cover;
			margin-right: 12px;
			vertical-align: middle;
			background-color: #eee;
		}
		.fullscreen-modal-title {
			font-size: 20px;
			font-weight: 900;
			flex: 1;
			line-height: 1.4;
			display: flex;
			align-items: center;
		}
		.fullscreen-modal-close {
			background: none;
			border: none;
			font-size: 24px;
			color: #999;
			cursor: pointer;
			width: 40px;
			height: 40px;
			display: flex;
			align-items: center;
			justify-content: center;
			border-radius: 50%;
			transition: all 0.2s;
			margin-right: 15px;
			flex-shrink: 0;
		}
		.fullscreen-modal-close:hover {
			background-color: #f5f5f5;
			color: #333;
		}
		.fullscreen-modal-content {
			flex: 1;
			overflow-y: auto;
			padding: 20px;
		}
		.fullscreen-score {
			font-size: 14px;
			font-weight: 900;
			margin: 0 15px 10px 15px;
			text-align: center;
		}
		.image-showcase {
			margin: 10px 0 15px 0;
			border-radius: 12px;
			padding: 0;
			box-shadow: 0 2px 8px rgba(0,0,0,0.1);
			overflow: hidden;
		}
		.image-showcase-title {
			font-size: 16px;
			font-weight: bold;
			margin: 15px 0 10px 15px;
			text-align: center;
		}
		.image-slider-container {
			position: relative;
			width: 100%;
			overflow: hidden;
			background-color: #000;
		}
		.image-slider {
			display: flex;
			transition: transform 0.3s ease;
			gap: 0;
		}
		.slider-image {
			flex-shrink: 0;
			width: 100%;
			height: auto;
			max-height: 70vh;
			object-fit: contain;
			border-radius: 0;
			background-color: #000;
			display: block
		}
		.slider-nav {
			display: flex;
			justify-content: flex-end;
			align-items: center;
			margin: 15px 148px 6px 0;
			gap: 8px;
		}
		.slider-dot {
			width: 8px;
			height: 8px;
			border-radius: 50%;
			background-color: #ddd;
			cursor: pointer;
			transition: all 0.2s;
		}
		.slider-dot.active {
			background-color: #2196F3;
			transform: scale(1.2);
		}
		.fullscreen-desc {
			font-size: 14px;
			line-height: 1.6;
			margin: 15px 0 25px 0;
			padding: 0 5px;
			text-align: justify;
		}
		.fullscreen-divider {
			margin: 10px 0;
		}
		.fullscreen-download-title {
			font-size: 16px;
			font-weight: bold;
			margin: 20px 15px 20px 15px;
			text-align: center;
		}
		.fullscreen-download-options {
			display: flex;
			flex-direction: column;
			gap: 12px;
			padding: 0 15px;
		}
		.fullscreen-download-option {
			padding: 15px 20px;
			background: linear-gradient(135deg, #2196F3, #1976D2);
			color: white;
			border: none;
			font-size: 15px;
			cursor: pointer;
			transition: all 0.2s;
			text-align: center;
			display: flex;
			align-items: center;
			justify-content: center;
			box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
			position: relative;
			overflow: hidden;
		}
		.fullscreen-download-option::before {
			content: '';
			position: absolute;
			top: 0;
			left: -100%;
			width: 100%;
			height: 100%;
			background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
			transition: left 0.5s;
		}
		.fullscreen-download-option:hover::before {
			left: 100%;
		}

		.bottom-nav {
			position: fixed;
			bottom: 0; left: 0;
			width: 100%;
			height: var(--nav-height);
			background-color: #fff;
			border-top: 1px solid #e5e5e5;
			display: flex;
			justify-content: space-around;
			align-items: center;
			z-index: 200;
			box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
		}
		.nav-item {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			flex: 1;
			height: 100%;
			text-decoration: none;
			color: var(--text-secondary);
			transition: color 0.3s;
			position: relative;
		}
		.nav-item.active {
			color: var(--primary-color);
		}
		.nav-item:hover {
			color: var(--primary-color);
		}
		.nav-icon-img {
			width: var(--nav-icon-size);
			height: var(--nav-icon-size);
			object-fit: contain;
			margin-bottom: var(--nav-icon-text-gap);
		}
		.nav-text {
			font-size: var(--nav-text-size);
			font-weight: normal;
			line-height: 1;
			height: auto;
		}
	</style>
</head>
<body>
	<div class="search-section">
		<div class="search-container">
			<div class="search-icon-area"></div>
			<input type="text" id="searchInput" class="search-box" placeholder="æœç´¢è½¯ä»¶åç§°">
			<div class="search-actions">
				<span id="searchText" class="search-text">æœç´¢</span>
			</div>
		</div>
		<button id="historyBtn" class="history-btn"></button>
		<button id="cancelBtn" class="cancel-btn" style="display: none;">å–æ¶ˆ</button>
	</div>

	<div id="softwareList" class="software-list"></div>

	<div id="searchResultPage" class="search-result-page">
		<div class="search-result-header">
			<div class="search-result-input-wrapper">
				<div class="search-result-icon-area"></div>
				<input type="text" id="searchResultInput" class="search-result-input" placeholder="æœç´¢è½¯ä»¶åç§°">
				<div class="search-result-actions">
					<span class="search-text">æœç´¢</span>
				</div>
			</div>
			<button id="resultCancelBtn" class="cancel-btn">å–æ¶ˆ</button>
		</div>
		<div id="resultSoftwareList" class="software-list"></div>
	</div>

	<div id="historyPage" class="history-page">
		<div class="history-header">
			<button id="backBtn" class="back-btn">â†</button>
			<div class="history-title">å†å²è®°å½•</div>
		</div>
		<div id="historyContent" class="history-content"></div>
	</div>

<!-- åº”ç”¨è¯¦æƒ…å¼¹çª— -->
<div id="fullscreenModal" class="fullscreen-modal-overlay">
	<div class="fullscreen-modal-header">
		<button id="fullscreenModalClose" class="fullscreen-modal-close">Ã—</button>
		<div id="fullscreenModalTitle" class="fullscreen-modal-title">
			<span id="fullscreenModalTitleText"></span>
		</div>
	</div>
	<div class="fullscreen-modal-content">
		<div id="fullscreenScore" class="fullscreen-score"></div>
		
		<!-- ç®€åŒ–åçš„å›¾ç‰‡å±•ç¤ºåŒºåŸŸ -->
		<div id="imageShowcase" style="display: none;">
			<div class="image-slider-container round-bottom-corners">
				<div id="imageSlider" class="image-slider"></div>
			</div>
			<div id="sliderNav" class="slider-nav round-bottom-corners"></div>
		</div>
		
		<div id="fullscreenDescWrapper" class="fullscreen-desc-container">
			<div id="fullscreenDesc" class="fullscreen-desc"></div>
		</div>
		<div class="fullscreen-divider"></div>
		<div id="fullscreenDownloadTitle" class="fullscreen-download-title">è¯·é€‰æ‹©ä¸‹è½½æ–¹å¼ï¼š</div>
		<div id="fullscreenDownloadOptions" class="fullscreen-download-options"></div>
	</div>
</div>

	<div class="bottom-nav" id="bottomNav"></div>

	<script>

let isEnglishMode = false;
function saveLanguageState(isEnglish) {
}
function getLanguageState() {	return false;
}
function detectBrowserLanguage() {return false; 
}
function translateText(text, targetLang = 'en') {
	return text;
}
function checkLanguageState() {
	isEnglishMode = false;
}
function getTranslatedSoftwareData() {
	return originalSoftwareData;
}

		// ========== åº•éƒ¨å¯¼èˆªæ¸²æŸ“ ==========
		const NAV_CONFIG = [
			{ icon: 'home.png', text: { zh: 'ä¸»é¡µ', en: 'Home' }, link: 'index.html', active: true },
			{ icon: 'author.png', text: { zh: 'å‘ç°', en: 'Discover' }, link: 'index2.html' },
			{ icon: 'my.png', text: { zh: 'æˆ‘çš„', en: 'Profile' }, link: 'index3.html' }
		];

		function renderBottomNav() {
			const nav = document.getElementById('bottomNav');
			if (!nav) return;
			nav.innerHTML = NAV_CONFIG.map(item => {
				const text = isEnglishMode ? item.text.en : item.text.zh;
				const activeClass = item.active ? 'active' : '';
				return `<a href="${item.link}" class="nav-item ${activeClass}" data-page="${text}"><img src="${item.icon}" class="nav-icon-img" alt="${text}"><div class="nav-text">${text}</div></a>`;
			}).join('');
			nav.querySelectorAll('.nav-item').forEach(el => {
				el.addEventListener('click', function(e) {
					const curr = location.pathname.split('/').pop() || 'index.html';
					const targetText = this.dataset.page;
					const pageMap = {};
					NAV_CONFIG.forEach(n => {
						const textKey = isEnglishMode ? 'en' : 'zh';
						pageMap[n.text[textKey]] = n.link.split('/').pop();
					});
					if (curr === pageMap[targetText]) {
						e.preventDefault();
						return false;
					}
					nav.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
					this.classList.add('active');
				});
			});
			const current = location.pathname.split('/').pop() || 'index.html';
			nav.querySelectorAll('.nav-item').forEach(el => {
				const targetText = el.dataset.page;
				const pageMap = {};
				NAV_CONFIG.forEach(n => {
					const textKey = isEnglishMode ? 'en' : 'zh';
					pageMap[n.text[textKey]] = n.link.split('/').pop();
				});
				el.classList.toggle('active', current === pageMap[targetText]);
			});
		}

const originalSoftwareData = [
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å®˜æ–¹ç‰ˆ",
				score: "6.9åˆ†  åŸæ±åŸå‘³çš„ä¸­æ–‡å®˜æ–¹ç‰ˆæœ¬",
				downloadUrl: "http://game.talkweb.com.cn/",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2.jpg"
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2æ—¶ç©ºå†æ—…1.0.4",
				score: "7.4åˆ†  ä½œè€…ï¼šæƒ³ä¸å‡ºåå­—ã€Mzå·¥ä½œå®¤",
				downloadUrl: "æ—¶ç©ºå†æ—….html",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2æ—¶ç©ºå†æ—….jpg",
				popup: {
					text: "å‰å¾€QQç¾¤è·å–æœ€æ–°ç‰ˆæœ¬ï¼Œç¬¬ä¸€æ—¶é—´è·å–æœ€æ–°ç‰ˆæœ¬æ›´æ–°ï¼ä½¿ç”¨123äº‘ç›˜ä¸‹è½½ï¼Œç›´æ¥åœ¨çº¿ä¸‹è½½ï¼",
					downloads: [
						{
							url: "https://qun.qq.com/universal-share/share?ac=1&authKey=pMvpgZU0YPz7bZCqelq7X1Mr8tY16MbElo0AVgeyirj8d%2BIMxxPkir4znIuzKpDw&busi_data=eyJncm91cENvZGUiOiI2MTU4ODQyMzAiLCJ0b2tlbiI6IjZnVGY1MTdrTzEwSTdIR2tIYUR2eFhRN2NGeEN1NXV5YXNwMGhwWm1neDJaV3JPZXZteTNDbm1mWWFhNE9xa28iLCJ1aW4iOiIyMDE5OTQ3MDg1In0%3D&data=Jqwb4iWeIUYCZWtT7RbO0BNx8su2riRaiXx1Aj7sLpM1T81ggFQ7fwBwn-X8ZODiX9YxVfk0wmeP3-wjvPCfEA&svctype=4&tempid=h5_group_info",
							text: "åŠ å…¥QQäº¤æµç¾¤è·å–"
						},
						{
							url: "https://www.123684.com/s/zWgIjv-1o98",
							text: "åœ¨çº¿123äº‘ç›˜ä¸‹è½½"
						}
					]
				}
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2Arkç‰ˆ",
				score: "8.3åˆ†  ä½œè€…ï¼šä»Šéœ„æ˜¯é£˜é€¸çš„åˆ©å·±ä¸»ä¹‰è€…",
				downloadUrl: "https://www.123684.com/s/zWgIjv-XcA8",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2ark.jpg",
					popup: {
					text: "æ¸¸æˆå®šä½æ˜¯å‰§æƒ…ä¸ºä¸»ï¼Œéš¾åº¦ä¼‘é—²åå¾®æŒ‘æˆ˜ï¼",
					downloads: [
						{
							url: "",
							text: "QQ:1005196747"
						},
						{
							url: "https://www.123684.com/s/zWgIjv-XcA8",
							text: "åœ¨çº¿ä½¿ç”¨äº‘ç›˜ä¸‹è½½"
						}
					]
				}
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å¤å…´ï¼šåŠå‘¨å¹´",
				score: "9.0åˆ†  ä½œè€…ï¼šç”µåŠ›çº¢èŒ¶ ä¸€æ¬¾å›½äººè‡ªåˆ¶çš„æ°‘é—´æ”¹ç‰ˆ",
				downloadUrl: "https://www.123684.com/s/zWgIjv-XcA8",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å¤å…´.png",
					popup: {
					text: "æ¸¸æˆå®šä½æ˜¯å‰§æƒ…ä¸éš¾åº¦æŒ‘æˆ˜ç›¸ç»“åˆï¼æµç¨‹ä½“éªŒç‹¬ç‰¹ï¼",
					downloads: [
						{
							url: "https://qun.qq.com/universal-share/share?ac=1&authKey=IjuB0HbXYhYZrafBgnqCQu5Wu5rZR%2FBhmr9C6UmMs89M4fBnHXLyTSciyk7mMN4V&busi_data=eyJncm91cENvZGUiOiIxMDUxNDIzMDQ3IiwidG9rZW4iOiJxaUsvTk5KVWJNaWxwTjdJTi9kUDhlZk1vbDJvajhjd3ZWUS95emZDNk8vTjB3c1ZrRVRIajJ6TEJMSEI5dzd4IiwidWluIjoiMjAxOTk0NzA4NSJ9&data=IYioZooAsurk3wlh5FsUIKysczSr0hnkvNGvLR2_VxeNVRZ905Qt4htlZodhG9NleKMPMwM3VxVGYjUIHPJuYA&svctype=4&tempid=h5_group_info",
							text: "åŠ å…¥QQç¾¤ä¸‹è½½"
						}
					]
				}
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2:Edgest",
				isSpecial: true,
				score: "8.6åˆ†  Plants vs. Zombies 2: Edgest X shuttle X Reflourished â€œæœˆè™¹å¸‚åœºâ€è”åŠ¨è¿›è¡Œä¸­",
				forceFirst: true,
				textpng: ["edgestå›¾1.jpg","edgestå›¾2.jpg"],
				downloadUrl: "https://www.123684.com/s/zWgIjv-XcA8",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2ï¼šEdgest.png",
					popup: {
					text: "ã€Šæ¤ç‰©å¤§æˆ˜åƒµå°¸2EDGESTã€‹æ˜¯ç»å…¸å¡”é˜²æ¸¸æˆã€Šæ¤ç‰©å¤§æˆ˜åƒµå°¸2ã€‹çš„æ”¹ç‰ˆä½œå“ï¼Œåœ¨è¯¥ä½œå“ä¸­ï¼Œç©å®¶ä¸ä»…èƒ½ä¹˜åæ½˜å¦®æ—¶å…‰æœºç©¿æ¢­åˆ°ä¸åŒçš„æ—¶ç©ºå¯»æ‰¾ç‰ç±³å·ï¼Œè¿˜èƒ½éšç€æˆ´å¤«å‰å¾€ä¸œæ–¹å¹»æƒ³ä¹¡çš„ä¸–ç•Œå»é¢†ç•¥å¼‚åŸŸé£æƒ…ã€‚æ¸¸ç©ã€Šæ¤ç‰©å¤§æˆ˜åƒµå°¸2EDGESTã€‹ï¼Œä½ å¯ä»¥ä¸Šåˆ°è›®è’è¥¿éƒ¨ä¸ç‰›ä»”æ–—æ™ºæ–—å‹‡ï¼Œä¸‹åˆ°å·¨æµªæ²™æ»©ä¸é²¨é±¼ä¸€èµ·å†²æµªï¼Œæˆ–è€…å‰å¾€åœ£äººçš„é“åœºå»æ¢ç©¶æ°¸ç”Ÿçš„å¥¥ç§˜ï¼Œäº¦æˆ–è€…å‰å¾€å¸‚åœºä¹‹ç¥ä¸¾åŠçš„é›†å¸‚æ¬£èµå…‰æ€ªé™†ç¦»çš„æ˜Ÿç©º.....æ›´å¤šçš„æ¤ç‰©ï¼Œæ›´å¤šçš„åƒµå°¸ï¼Œæ›´å¤šçš„ä¸–ç•Œï¼Œæ›´å¤šçš„æŒ‘æˆ˜ï¼Œæ›´å¤šçš„å¯èƒ½ï¼ï¼å½“ç„¶ï¼Œä¸è¦å¿˜è®°å‡†å¤‡å‡ æ ¹é¦™è•‰æ¥åº”å¯¹åƒµå°¸çŒ´å“¦ã€‚",
					downloads: [
						{
							url: "https://qun.qq.com/universal-share/share?ac=1&authKey=nXo8yR3KMRSSJbHgAzZFeeR%2B9AOrOUSCr/Ycb8TGdKS1KE0r2KbjZDEsHrOUmhFF&busi_data=eyJncm91cENvZGUiOiI0MTYwMzc2OTYiLCJ0b2tlbiI6IlIxbkFFQWlHc1VHOUttSGFLbHJmcGtLTjNNVUtVU0luU1psVUl5Rm94MzFoTDgzbEtibFZnaklzSndIYUNuSjEiLCJ1aW4iOiIyMDE5OTQ3MDg1In0=&data=YteVhSjxoJZSrbrZn9B8GWwGmBl6hskkPO9S9LtatjIaqeYJb69ZUXqIltpoLdk4R_odIBO99eCORXrmOFUXmQ&svctype=4&tempid=h5_group_info",
							text: "åŠ å…¥QQç¾¤ä¸‹è½½ï¼ˆå®¡æ ¸ç¾¤ï¼‰"
						},
						{
							url: "https://pan.quark.cn/s/ae34de5f6266",
							text: "åœ¨çº¿ä¸‹è½½ç›´è£…ç‰ˆ"
						}
					]
				}
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸å°ç¨‹åºç§»æ¤ç‰ˆ",
				score: "6.7åˆ†  æ¥è‡ª PVZ1 å°ç¨‹åºç§»æ¤çš„ç‰ˆæœ¬ã€‚",
				downloadUrl: "https://www.123684.com/s/zWgIjv-XcA8",
				image: "PVZ1å°ç¨‹åº.png",
					popup: {
					text: "æ¥è‡ª PVZ1 å°ç¨‹åºç§»æ¤çš„ç‰ˆæœ¬ã€‚ğŸ¥°",
					downloads: [
						{
							url: "https://qun.qq.com/universal-share/share?ac=1&authKey=1HTTKrrWSwGhTsItXCUkM9vi91TScsqvvZCCWEmi6POWuXQkfjrqMmhWCokdhKnY&busi_data=eyJncm91cENvZGUiOiI4NTczMTMyNDIiLCJ0b2tlbiI6InpDaUw3YjFId1BDamhvZ2wreXczREpkU2YwUTJMMWVoLzJGeUdRZ2M5d0FmM0JvUm9Bc1lPVnl6bGZBY2xZSWMiLCJ1aW4iOiIyMDE5OTQ3MDg1In0%3D&data=gTUV2TNeLmlkpRZ_4shNBtmv-SE5WnsGXLtaOXi85XtvDJlAgloAj8oBuXzSjVFr4S2pO06IsJm85-qha_khjQ&svctype=4&tempid=h5_group_info",
							text: "åŠ å…¥QQç¾¤ä¸‹è½½"
						}
					]
				}
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2è¿·å®«æ··æ²Œç‰ˆ",
				score: "8.5åˆ†  ä½œè€…ï¼šç‰ç±³ åœ¨ã€Šæ¤ç‰©å¤§æˆ˜åƒµå°¸ï¼šè¿·å®«Â·æ··æ²Œã€‹ä¸­ï¼Œè¿‡å¾€çš„ä¼ å¥‡ä¸å†æ˜¯æƒ³è±¡ä¸å›å¿†ã€‚",
				downloadUrl: "https://www.123684.com/s/zWgIjv-XcA8",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2æ··æ²Œ.jpg",
					popup: {
					text: "è¥¿éƒ¨çš„æŸåº§é¬¼é•‡ï¼Œæµ·æ¹¾è¾¹çš„æµ·ç›—ä»¬ï¼ŒåŸƒåŠçš„æ³•è€ç‹... ä¼ å¥‡çš„è¿·å®«å´ä¸çŸ¥ä¸ºä½•æ¶ˆé€çš„æ— å½±æ— è¸ªã€‚ æ€»åœ¨å›å¿†ç€ï¼ŒæŸåº§å°é•‡ã€æŸæ”¯é’¥åŒ™ã€æŸä¸ªæœºå™¨æ‰€è¯´çš„å¤§è„‘çš„æ–­è£‚ã€‚ ä½ç”»è´¨ä¸é˜‰å‰²çš„å°æ›²å´åŒ…å«ç€è€ç©å®¶çš„å›å¿†ï¼Œè¿™æ˜¯å›ä¸å»çš„..å—? æ”¹ç‰ˆã€Šæ¤ç‰©å¤§æˆ˜åƒµå°¸2:è¿·å®«Â·æ··æ²Œã€‹æ¬¢è¿æ‚¨æ¥ä½“éªŒï¼",
					downloads: [
						{
							url: "https://www.123684.com/s/zWgIjv-o5A8",
							text: "åœ¨çº¿ä½¿ç”¨äº‘ç›˜ä¸‹è½½ï¼ˆç›´è£…åŒ…ï¼‰"
						},
						{
							url: "https://www.123684.com/s/zWgIjv-45A8",
							text: "ä¸‹è½½å¿…è¦æ–‡ä»¶ï¼ˆé’ˆå¯¹éƒ¨åˆ†è®¾å¤‡ï¼‰"
						},
						{
							url: "https://qun.qq.com/universal-share/share?ac=1&authKey=Okd%2FuENO%2BfyYysJiR2N8HZby1U7AqM8skUgUaSI3GzCGL9KfJYpdPy4GQXXEXI62&busi_data=eyJncm91cENvZGUiOiIzMTQwOTE2NzMiLCJ0b2tlbiI6IjRaSEVMems3ZWlPRDV3RWxzR0lUNmsybEpxT0hvcldIVkczTGUxd1crcGlMOXlNZCtBZkxQYjdIRWo3aVdPTDYiLCJ1aW4iOiIyMDE5OTQ3MDg1In0%3D&data=pbcT5R33MPQ-fj_QqCISbXIxTvbwNpfuzTLZvg9GbrSR1K1pe3nYwE_rduikQeYdJFTyJYSmoB38ZR60kFsrbg&svctype=4&tempid=h5_group_info",
							text: "åŠ å…¥QQäº¤æµç¾¤è·å–"
						}
					]
				}
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2è¡ç”Ÿç‰ˆ",
				score: "6.8åˆ†  ä½œè€…ï¼šå°ç±³é£Ÿå ‚å¨å¸ˆé•¿",
				downloadUrl: "https://www.123684.com/s/zWgIjv-SA98",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2è¡ç”Ÿ.jpg"
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å›½é™…ç‰ˆï¼ˆæ±‰åŒ–+æ¢å¤æ‹“å±•+æ¢å¤éŸ³ä¹ï¼‰",
				score: "9.0åˆ†  ä½œè€…ï¼šç‰¹åˆ«çš„ä¼Šå°†å†› ç‰ˆæœ¬12.7.1",
				downloadUrl: "http://www.123865.com/s/Xpv9-ndDxh",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å›½é™…ç‰ˆæ±‰åŒ–.jpg",
					textpng: ["å›½é™…ç‰ˆ1.WEBP","å›½é™…ç‰ˆ2.WEBP"],
			popup: {
					text: "é€‚åˆå¤§å¤šæ•°ç©å®¶",
					downloads: [
						{ url: "http://www.123865.com/s/Xpv9-ndDxh", text: "è·å–" }
					]
				}
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å›½é™…ç‰ˆï¼šDLC",
				score: "9.1åˆ†  ä½œè€…ï¼šDaybs PVZ2: DLCç³»åˆ—è‡´åŠ›äºå¸¦æ¥å†ç»­å›½é™…ç‰ˆä¸»çº¿çš„ç‹¬ç‰¹ä½“éªŒã€‚ å¦‚â€œæ³³æ± æ´¾å¯¹â€â€œç½—é©¬å¸å›½â€ï¼ç‰ˆæœ¬25.1.0",
				downloadUrl: "http://www.123865.com/s/Xpv9-ndDxh",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2DLC.jpg",
				textpng: ["åº”ç”¨å¿«ç…§ï¼šdlc1.jpg"],
				popup: {
					text: "PVZ2: DLCåŸç‰ˆè‡ªåˆ¶å…³å¡ç³»åˆ—ç”±Daybsç‹¬ç«‹åˆ¶ä½œï¼Œè‡´åŠ›äºå¸¦ç»™ç©å®¶å†ç»­å›½é™…ç‰ˆä¸»çº¿çš„ç‹¬ç‰¹ä½“éªŒã€‚æ‹¥æœ‰ç»è¿‡ç²¾å¿ƒè®¾è®¡çš„å¦‚â€œæ³³æ± æ´¾å¯¹â€â€œç½—é©¬å¸å›½â€çš„ä¸»çº¿ä¸–ç•Œï¼",
					downloads: [
						{ url: "https://qun.qq.com/universal-share/share?ac=1&authKey=RnWhP%2BiImfcUj62qfVCB6tmL%2BdjlKkqP%2B6kaXQzKWbb2%2FI3oqmmYpdriQMFt3Kv8&busi_data=eyJncm91cENvZGUiOiI3MTQyNjExMTkiLCJ0b2tlbiI6IjZ0UjUzZG5Da3ZRWXpIdyszajdxSFovV241VkxWTHpkNUNyUERhcWd1QjJEVTNuc0xvUHI1UHY4am90SUd4Z0UiLCJ1aW4iOiIyMDE5OTQ3MDg1In0%3D&data=214zvOX6zKMzpEQ3GP0s_yhE4edwjKHN3fYwDTQsAKbWszB7qPHyBN_L96AYQjK5TWK88hU3uZhvF03s2HnrcA&svctype=4&tempid=h5_group_info", text: "åŠ å…¥QQäº¤æµç¾¤è·å–" }
					]
				}
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2è¿”èŒ‚ç‰ˆï¼ˆPvZ 2: Reflourishedï¼‰",
				score: "8.8åˆ†  æ€»ä½œè€…ï¼šPvZABFanï¼†PeaMix",
				downloadUrl: "",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2è¿”èŒ‚.jpg",
				downloadText: "è·å–",
				popup: {
					text: "åŠ å…¥å®˜æ–¹ä»£ç†ç¤¾åŒºï¼",
					downloads: [
						{ url: "https://qun.qq.com/universal-share/share?ac=1&authKey=Q%2B0UlGy20lQ3QZK0EerwxmGB1bAObqvRIf2bS3er9hre5FlCc1QqmsMteMM28Ict&busi_data=eyJncm91cENvZGUiOiI3Mjg5MTI1OTAiLCJ0b2tlbiI6InJIZnRKeDBRTzA2RytIOHhLRkJGMVFVb2dNODJrU2U4Vmxjc01aeWNsQkZ5bTdEVThJZytsRmhkVEdYNDNrcDciLCJ1aW4iOiIzNjQyNzk4NTAxIn0=&data=g0g3S977SBHDZA3bmqCEcm8N0-Xqpkj1OaEXnbAIQLpkR-k6YJ5klqoAHnSPPuqRuBZ-iw4DRs1VUp7RWF5z08gEiPig6LaFxd-CV2lMdvs&svctype=5&tempid=h5_group_info", text: "åŠ å…¥QQ5ç¾¤" },
						{ url: "https://qun.qq.com/universal-share/share?ac=1&authKey=NmdtopylzCH3nLWwJA2wk9H254Wokda/gPlatCmvddF%2Bp9S2jo5s5E8IraQLanpl&busi_data=eyJncm91cENvZGUiOiI5MzExMTA5ODIiLCJ0b2tlbiI6Ik40TEQzQmJycDNYVVVwRHMzSVlQRlBCWm9oamJUS01UME1GdTV1VlJjcUlkVlVER3Vwb2xiQ204dVVwK0txWVkiLCJ1aW4iOiIzNjQyNzk4NTAxIn0=&data=VkL34vGAhrxyF1eRUjQOMyHE5GHPE4Xv_OP-7LtaOV5r1Vk3ikzaik78ZgjMj9SOc7jbVctCKgQXNYiJQopv1M7gu_C8DlU9UgDsMwNhysw&svctype=5&tempid=h5_group_info", text: "åŠ å…¥QQ3ç¾¤" },
						{ url: "https://qun.qq.com/universal-share/share?ac=1&authKey=lzXZ6HoGY45kdTvb0Nor65sGZMp/CmymA%2BvID75AFF9elpR4H7MTeJkQMWi%2BI2St&busi_data=eyJncm91cENvZGUiOiI2NjA5NTg5MzciLCJ0b2tlbiI6ImJwOUg0QWFmL2l0RE9LUFpLcENmbkRoT2UzNUFDUVgvS3dBb1R5eVlQbHhjSmorbktCdkxDdXRJandMcEorclAiLCJ1aW4iOiIzNjQyNzk4NTAxIn0=&data=w31o7ZlGSKFgFFZnxlQLXJpwbTWgofOkOFHoiNghDKGwhqtZ5RUbHwVXgUET4W8OIq-uTTJ9Q2mgeUucwH2mtB9pXh1dODJZqRwK4jqiVPQ&svctype=5&tempid=h5_group_info", text: "åŠ å…¥QQ2ç¾¤" },
						{ url: "https://qun.qq.com/universal-share/share?ac=1&authKey=ikzndDW%2BIZ9sDmXioQS6wUD9n5ZOhtpfFtCCeB0Xg5eAIu4UYotsz1wcWVZSfHZt&busi_data=eyJncm91cENvZGUiOiI2OTY5ODI0OTUiLCJ0b2tlbiI6Im5UVDIraURyYnI5cW9ibjBZZVZvdVpzbE1hQkpkaWF3QThoRkFWRXBVNm1lSUhxelRmZExyemdKdnloV3lkSFoiLCJ1aW4iOiIzNjQyNzk4NTAxIn0=&data=J9sfWOoc7EvNXYx95rO6lqOUxHDLkHtpZTyVmK_2F3CcPhdSUA49dS2oe4Ws4KFjDo8nbfeL0HZ8E7-GoA-L7yDclR-8-tc6rvk4BStmQq4&svctype=5&tempid=h5_group_info", text: "åŠ å…¥QQ4ç¾¤" },
						{ url: "https://discord.gg/ba9rC7Qdkb", text: "åŠ å…¥Discordï¼ï¼ˆéœ€è¦æ‚¨ä¼šé­”æ³•ï¼‰" }
					]
				}
			},
			{
				rank: 1,
				name: "Team Sparks Il PvZ2 Moddersï¼ˆéœ€è¦é­”æ³•ï¼‰",
				score: "7åˆ† ä¸€ä¸ªç”±ç”»å¸ˆå’Œæ¨¡ç»„ä½œè€…ç»„æˆçš„å›¢é˜Ÿï¼Œè‡´åŠ›äºåˆ›å»ºã€åŠ¨ç”»å’Œç¼–å†™ç´ æï¼Œä¾›æ¨¡ç»„ç¤¾åŒºå…è´¹ä½¿ç”¨!",
				downloadUrl: "https://discord.gg/fAuHJNRM2y",
				image: "TeamSpark.jpg",
				downloadText: "å‰å¾€",
				popup: {
					text: "åŠ å…¥å®˜æ–¹Discordç¤¾åŒºï¼",
					downloads: [
						{ url: "https://discord.gg/fAuHJNRM2y", text: "åŠ å…¥Discord" }
					]
				}
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2ï¼šè¿·å®«å›å“",
				score: "7.5åˆ†  ä¸€æ¬¾ä¸é”™çš„è¿·å®«æ”¹ç‰ˆï¼Œå†…å«ä¸°å¯Œçš„æ¸¸æˆå†…å®¹ï¼",
				downloadUrl: "",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2è¿·å®«å›å“.jpg",
				downloadText: "å‰å¾€",
				popup: {
					text: "åŠ å…¥å®˜æ–¹ç¾¤ï¼åœ¨ç¾¤å†…è·å–æ¸¸æˆèµ„æº",
					downloads: [
						{
							url: "https://qun.qq.com/universal-share/share?ac=1&authKey=cvrccBe19rE5c9UGSdpw7ZphWwWT1GHHlThgDodYXqVkSyDgW9FQP%2BKKWYii1rVk&busi_data=eyJncm91cENvZGUiOiI4MzIyODcwOTgiLCJ0b2tlbiI6Im1Xb3ZwMWI5dEVlbkxaL2pzQllkaC9JWS9lbGJ6M1hsaGkyK2VqVndReXFBQy9RVHBPUVlId2NDbVNTRlFlTEciLCJ1aW4iOiIxMzIyMDMzNTkyIn0=&data=oi3-XRWXuYVNGnErhbB3YMpemyq_gnifJmv3NtJNXfPxB3riOG97HAeXzQBiEobSQaMNPjGzKHgUjG1Hu0StcV3D9gw3VD2QsMXZMow3iUM&svctype=5&tempid=h5_group_info",
							text: "åŠ å…¥QQäº¤æµç¾¤è·å–"
						}
					]
				}
			},
				{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2ï¼šæƒŠå˜-èåˆ",
				score: "9.2åˆ† å°†Mcç»å…¸ModæƒŠå˜100å¤©æºæ‰‹æ¤ç‰©èåˆç©æ³•ï¼Œé‡ç£…åŠ å…¥Pvz2ï¼",
				downloadUrl: "",
				image: "PVZæƒŠå˜.jpg",
				downloadText: "å‰å¾€",
				popup: {
					text: "ä½œè€…ï¼šç”µåŠ›çº¢èŒ¶ã€ç¬¨è›‹è±Œè±†ã€‚",
					downloads: [
						{
							url: "https://qun.qq.com/universal-share/share?ac=1&authKey=jYzDrVvZgdVsdKiuWjc%2BP5dFK8U6hy88ApbO3RPLTE14YxINaMKNpOWcKheDusax&busi_data=eyJncm91cENvZGUiOiIxMDc2Nzg2NjMxIiwidG9rZW4iOiIyVmtpd1krR0RsYWYrcjVPa3ZsV0s3am90UW1ST2tLWHF6RW5hRktmSmFvKzZ2VlFPbjdwaHZrbFNUZzN2eHl5IiwidWluIjoiMjAxOTk0NzA4NSJ9&data=mhn6EJIZaGcCAitv64jesjSiNDUYZWdYstp2tE8RyJrwokfdhbW7g2X_5-fbulYLTlKzFaVjeHP8TqPHZDWonw&svctype=4&tempid=h5_group_info",
							text: "åŠ å…¥QQäº¤æµç¾¤è·å–"
						}
					]
				}
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2ï¼šè¿·å®«æ‹“å±•ç‰ˆ",
				score: "7.5åˆ†  ä¸€æ¬¾ä¸é”™çš„è¿·å®«æ”¹ç‰ˆï¼Œå†…å«ä¸°å¯Œçš„æ¸¸æˆå†…å®¹ï¼",
				downloadUrl: "",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2è¿·å®«æ‹“å±•.jpg",
				downloadText: "å‰å¾€",
				popup: {
					text: "åŠ å…¥å®˜æ–¹QQç¾¤ï¼ä¸‹è½½æœ€æ–°æ¸¸æˆèµ„æº",
					downloads: [
						{
							url: "https://qun.qq.com/universal-share/share?ac=1&authKey=4CX14sTwi007tFiMdmoY8%2BdRZ9MPsDJ0gKuxL850OQw6xP6KVOQvnmGCQM/vp%2B4g&busi_data=eyJncm91cENvZGUiOiIxMDQ0OTMyNjM2IiwidG9rZW4iOiJLSDU3Z2padlhlMVFaR2lScjJCM3FkVGMxN1NTM2NtWHl3bkNXRGlpbUxRMVZLUktxcHlJbEFpV2dZRzJpMCtpIiwidWluIjoiMjAxOTk0NzA4NSJ9&data=yf5Zly7jOcjnvn1SGtouhSK2YIFKTngQnOP17PrbdFKVQ6HM0r_QR8oYjYJNJEblDLZm_Q91KN4cuTVxFk-FNUSrUSfTT7nPJWx-YLAwvQ8&svctype=5&tempid=h5_group_info",
							text: "æŸ¥çœ‹ç¾¤ç®€ä»‹ï¼ŒåŠ å…¥æ‹“å±•QQå®˜æ–¹ç¾¤"
						},
						{
							url: "https://1drv.ms/f/c/ca303ad2d43918b2/ErIYOdTSOjAggMqpAAAAAAABaYJBklXNYVebE24ZXcG_yQ",
							text: "ä½¿ç”¨onedriveåœ¨çº¿ä¸‹è½½ï¼ˆéœ€è¦é­”æ³•ï¼‰"
						}
					]
				}
			},
			{
				rank: 1,
				name: "å°é©¬å®è‰å¤§æˆ˜åƒµå°¸5",
				score: "8.4åˆ†  å°é©¬å®è‰å¤§æˆ˜åƒµå°¸çš„ç¬¬äº”éƒ¨ï¼Œå°é©¬å¤§æˆ˜åƒµå°¸æ”¶å®˜ä¹‹ä½œï¼",
				downloadUrl: "",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å°é©¬.jpg",
				downloadText: "å‰å¾€",
				popup: {
					text: "ç»å¤šå¹´å®ˆå«æ§ä½åƒµå°¸ï¼Œä½†å°é©¬è°·å·²æˆåºŸå¢Ÿã€‚æ˜Ÿå…‰ç† ç† å†³å®šç©¿è¶Šåˆ°ç¬¬ä¸€å¤©å‰¿ç­åƒµå°¸ï¼Œé‡å¯æ—¶ç©ºæ‰­è½¬æ®‹å±€ï¼",
					downloads: [
						{
							url: "https://qun.qq.com/universal-share/share?ac=1&authKey=ICKWdXFQqBR%2BaHrB9/JPygRkqF6DEspJxwRCDW/D74YpMuDTGYQfhaPWiU8sOKmu&busi_data=eyJncm91cENvZGUiOiI1NDc2NTgyOTUiLCJ0b2tlbiI6ImZHSUpDT09Zc2tmYWt2aXRHY0ZDZy9hMW5ibFBFd1VpRnFkWWlQR0dxTzRCZ1k5aE1CSE5zS2pGQW1GT2huTCsiLCJ1aW4iOiIyMDE5OTQ3MDg1In0=&data=ZbIpXGFKVTxPpzZ6cgQI-1O9cD5gWFfsfbf4cNwmOUJIA1Hy9D-UzcjY135YMCmtzfBl4RIulZJJbU5AIseRT8cIvcvCgWXIS0aFTmLLago&svctype=5&tempid=h5_group_info",
							text: "åŠ å…¥QQå®˜æ–¹ç¾¤è·å–"
						},
						{
							url: "https://www.123684.com/s/zWgIjv-tcA8",
							text: "åœ¨çº¿123äº‘ç›˜ä¸‹è½½"
						}
					]
				}
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å¤©ç©ºä¹‹åŸå†…è´­ç ´è§£",
				score: "7.9åˆ†  ç»å…¸è¿·å®«ç‰ˆv1.6.1å†…è´­ç ´è§£ç‰ˆï¼æ— é¡»èŠ±é’±å³å¯è·å–èµ„æº æ­¤ç‰ˆæœ¬çº¯ç¨æ›²ï¼",
				downloadUrl: "https://www.123684.com/s/zWgIjv-VcA8",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å¤©ç©ºä¹‹åŸ.jpg"
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸æ— å°½ç‰ˆå†…è´­ç ´è§£",
				score: "7.7åˆ†  ç»å…¸ä¸€ä»£å®˜æ–¹ç‰ˆæœ¬å†…è´­ç ´è§£ï¼ŒåŒ…å«è¥¿æ¸¸ã€é¾™å®«ã€é•¿åŸä¸‰å¤§å†…å®¹ï¼",
				downloadUrl: "https://www.123684.com/s/zWgIjv-VcA8",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸æ— å°½ç‰ˆ.jpg",
				popup: {
					text: "è¯¥ç‰ˆæœ¬è¾ƒä¸ºè¿œå¤ï¼Œå†…è´­ç ´è§£ä¼šé—ªé€€ï¼Œä½†å¯æ­£å¸¸åˆ°è´¦ã€‚é«˜ç³»ç»Ÿæ‰‹æœºå¯åŠ¨æ—¶å°æ¦‚ç‡é—ªé€€ï¼Œä½†ç¬¬ä¸‰æ¬¡å¿…å®šè¿›å…¥ã€‚",
					downloads: [
						{
							url: "https://www.123684.com/s/zWgIjv-deA8",
							text: "äº‘ç›˜ä¸‹è½½"
						}
					]
				}
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å¤±è½ä¹‹åŸ1.7.5",
				score: "8.2åˆ†  å†…å«å†…è´­ç ´è§£ã€ç”»è´¨é«˜æ¸…ä¿®å¤ï¼ä½œè€…ï¼šç‰ç±³ï¼Œ7000iï¼Œå±‘fell",
				downloadUrl: "https://www.123684.com/s/zWgIjv-VcA8",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸2å¤±è½ä¹‹åŸ.jpg",
				popup: {
					text: "1.7.5ç»å…¸è¿·å®«ç‰ˆæœ¬ï¼å†…å«å†…è´­ç ´è§£ã€ç”»è´¨é«˜æ¸…ä¿®å¤ï¼æ˜¯æœ€åä¸€ä¸ªè¿·å®«ç‰ˆæœ¬ï¼",
					downloads: [
						{
							url: "https://www.123684.com/s/zWgIjv-mzA8",
							text: "123äº‘ç›˜ä¸‹è½½"
						}
					]
				}
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸å…¨æ˜æ˜Ÿqwqç‰ˆ",
				score: "7.4åˆ†  ç»å…¸å…¨æ˜æ˜Ÿç‰ˆæœ¬çš„æ”¹ç‰ˆï¼å†…æ¶µä¸°å¯Œå†…å®¹å’Œæ— ä¸ä¼¦æ¯”çš„æ–°å¥‡ä½“éªŒ",
				downloadUrl: "",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸å…¨æ˜æ˜Ÿqwq.jpg",
				downloadText: "å‰å¾€",
				popup: {
					text: "åŠ å…¥å®˜æ–¹ç¾¤ï¼åœ¨ç¾¤å†…è·å–æ¸¸æˆèµ„æº",
					downloads: [
						{
							url: "https://qun.qq.com/universal-share/share?ac=1&authKey=VrThaikUN6pnRjni858gy8f7Dc7VrkJcRHHAgfT6wVFp6l6Q6x2ZUy7pYeaiqK2k&busi_data=eyJncm91cENvZGUiOiIxMDUzMjcwMzA2IiwidG9rZW4iOiJpSHcxWmlaL1d6N0ovU2tKSGVtMXplM2pXZFI1RDlsYWdKYTBzTDBZZGpacy95ZW13MDF1UGVVK0VoNVZIa1ZTIiwidWluIjoiMjAxOTk0NzA4NSJ9&data=_U9WSDDR7BNvN6vDUl-XmJCqSen9uSB2caP3hsd34DiAb6547Uu7ZxlAFXaFobAnkeeTggnrreyN_6ZU46IZsTtk1sRnumBcbAIcYr9UCLo&svctype=5&tempid=h5_group_info",
							text: "åŠ å…¥QQäº¤æµç¾¤è·å–"
						}
					]
				}
			},
			{
				rank: 1,
				name: "Plants vs Zombiesï¼šBrave New World",
				score: "7.7åˆ†  ç›®å‰ä»…æ”¯æŒç”µè„‘ç«¯æ¸¸ç©ï¼ŒåŠ å…¥ç¾¤èŠåœ¨ç¾¤æ–‡ä»¶ä¸­ä¸‹è½½æ¸¸æˆåŒ…",
				downloadUrl: "",
				image: "PlantsvsZombiesï¼šBraveNewWorld.jpg",
				downloadText: "å‰å¾€",
				popup: {
					text: "ã€Šæ¤ç‰©å¤§æˆ˜åƒµå°¸ï¼šç¾ä¸½æ–°ä¸–ç•Œã€‹é‡æ‹¾ç³»åˆ—ç»å…¸ç©æ³•ã€‚å¼€æ”¾æ›´å¤šçš„è‡ªå®šä¹‰æ’ä»¶é¡¹ç›®ï¼Œå¸¦æ¥æ— ä¸ä¼¦æ¯”çš„ä½“éªŒã€‚ç©å®¶å°†å†åº¦å¼€å¯è·¨æ—¶ç©ºå†’é™©ï¼Œæ”¶é›†å¹¶è¿ç”¨æ¤ç‰©ï¼Œå…¨åŠ›æŠµå¾¡åƒµå°¸æµªæ½®çš„å…¥ä¾µï¼Œé‡æ¸©åŸå‘³å¡”é˜²ä½“éªŒã€‚",
					downloads: [
						{
							url: "https://qun.qq.com/universal-share/share?ac=1&authKey=is9p6%2B3SPyFTida4NFvw7i0tXajcjzykKvSxGxWE1L2SDOIJ%2BIfGBt3Ig70fER53&busi_data=eyJncm91cENvZGUiOiI4NTczMTMyNDIiLCJ0b2tlbiI6IktZSGpPYjNHSktzTWc2R3dGMC9xTDJIOE1XUlRGNEhuTGtyaGV6UDFweDVvczJsS1BsNVlJZHhDcGxFSnQ0TVAiLCJ1aW4iOiIyMDE5OTQ3MDg1In0%3D&data=iQTw8uCwcF3AppkQOBukZqTGn_atXnV6xITfVNzviz5VXsFlzS6L_ihYtcs3xNAGsBQdmT7G7qVM9jN5gyLeIw&svctype=4&tempid=h5_group_info",
							text: "ç‚¹å‡»åŠ ç¾¤è·å–"
						}
					]
				}
			},
			{
				rank: 1,
				name: "æ¤ç‰©å¤§æˆ˜åƒµå°¸ï¼šä¹Padç‰ˆ",
				score: "6.5åˆ† åœ¨ä¸€ä¼—ä¸€ä»£ç‰ˆæœ¬ä¸­ï¼Œæ­¤ç‰ˆæœ¬ååˆ†é«˜æ¸…ï¼å¯¹é«˜ç‰ˆæœ¬ç³»ç»Ÿçš„é€‚é…ä¹Ÿæ˜¯ä¸€æµçš„ã€‚",
				downloadUrl: "",
				image: "æ¤ç‰©å¤§æˆ˜åƒµå°¸ä¹padç‰ˆ.jpg",
				downloadText: "å‰å¾€",
				popup: {
					text: "ç‰ˆæœ¬ç›¸å¯¹äºåŸç‰ˆæ²¡æœ‰èŠ±å›­ã€è§£è°œå…ƒç´ ï¼Œä½†æ˜¯åœ¨å…³å¡ä¸­ä¼šå‡ºç°çŒæœ¨ä¸›ã€‚è€Œå¯¹æ¯”ç§»åŠ¨ç«¯çš„å…¶ä»–ç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„ç‰¹ç‚¹åœ¨äºæ”¯æŒ1280x800åˆ†è¾¨ç‡ç”»é¢ã€‚ä¸”å¯¹äºPADçš„é€‚é…æ›´å¥½ï¼",
					downloads: [
						{
							url: "https://www.123684.com/s/zWgIjv-xeA8",
							text: "äº‘ç›˜ä¸‹è½½"
						}
					]
				}
			}
		];
		
		
		let translatedSoftwareData = [];
		let sortedSoftware = [];
		const searchInput = document.getElementById('searchInput');
		const searchResultInput = document.getElementById('searchResultInput');
		const softwareListEl = document.getElementById('softwareList');
		const resultSoftwareListEl = document.getElementById('resultSoftwareList');
		const searchResultPage = document.getElementById('searchResultPage');
		const searchText = document.getElementById('searchText');
		const resultSearchText = document.querySelector('.search-result-actions .search-text');
		const historyBtn = document.getElementById('historyBtn');
		const cancelBtn = document.getElementById('cancelBtn');
		const resultCancelBtn = document.getElementById('resultCancelBtn');
		const historyPage = document.getElementById('historyPage');
		const backBtn = document.getElementById('backBtn');
		const historyContent = document.getElementById('historyContent');
		const fullscreenModal = document.getElementById('fullscreenModal');
		const fullscreenModalTitle = document.getElementById('fullscreenModalTitle');
		const fullscreenModalClose = document.getElementById('fullscreenModalClose');
		const fullscreenDesc = document.getElementById('fullscreenDesc');
		const fullscreenScore = document.getElementById('fullscreenScore');
		const imageShowcase = document.getElementById('imageShowcase');
		const imageSlider = document.getElementById('imageSlider');
		const sliderNav = document.getElementById('sliderNav');
		const fullscreenDownloadTitle = document.getElementById('fullscreenDownloadTitle');
		const fullscreenDownloadOptions = document.getElementById('fullscreenDownloadOptions');

		let searchHistory = JSON.parse(localStorage.getItem('searchHistory') || '[]');
		let currentImageIndex = 0;
function renderSoftwareList(softwareToShow, container = softwareListEl) {
	if (!softwareToShow.length) {
		const noResultsText = isEnglishMode ? 'No software found' : 'æ²¡æœ‰æ‰¾åˆ°ç›¸å…³è½¯ä»¶';
		container.innerHTML = `<div class="no-results">${noResultsText}</div>`;
		return;
	}

	const listHTML = softwareToShow.map(item => {
		if (item.isSpecial) {
			// ç‰¹æ®Šåº”ç”¨ï¼šä¸‰å€é«˜åº¦ + è‡ªå®šä¹‰èƒŒæ™¯
			return `
			<div class="software-item software-item-special" style="background: ${item.specialBackground || '#f0f8ff'}; height: 300px;">
				<div class="special-content">
					<img src="${item.image}" class="software-img" alt="${item.name}">
					<div class="software-info">
						<div class="software-name">${item.name}</div>
						<div class="software-score">${item.score}</div>
					</div>
					${getDownloadButton(item)}
				</div>
			</div>`;
		} else {
			// æ™®é€šåº”ç”¨
			return `
			<div class="software-item">
				<img src="${item.image}" class="software-img" alt="${item.name}">
				<div class="software-info">
					<div class="software-name">${item.name}</div>
					<div class="software-score">${item.score}</div>
				</div>
				${getDownloadButton(item)}
			</div>`;
		}
	}).join('');

	container.innerHTML = listHTML;
}

// æå–ä¸‹è½½æŒ‰é’®ç”Ÿæˆé€»è¾‘ï¼Œé¿å…é‡å¤
function getDownloadButton(item) {
	const btnText = item.downloadText || (isEnglishMode ? 'Download' : 'ä¸‹è½½');
	if (item.popup) {
		return `<button class="download-btn-main" onclick="showFullscreenPopup('${item.name}')">${btnText}</button>`;
	} else if (item.downloadUrl && item.downloadUrl.trim() !== '' && item.downloadUrl !== 'æ— ') {
		const isHtml = item.downloadUrl.endsWith('.html');
		return `<a href="${item.downloadUrl}" class="download-btn-main" target="_blank">${btnText}</a>`;
	} else {
		const noDownloadText = isEnglishMode ? 'No download' : 'æš‚æ— ä¸‹è½½';
		return `<span class="download-btn-main" disabled>${noDownloadText}</span>`;
	}
}

		function showFullscreenPopup(name) {
			const item = translatedSoftwareData.find(s => s.name === name) || originalSoftwareData.find(s => translateText(s.name) === name);
			if (!item || !item.popup) return;
			fullscreenModalTitle.textContent = item.name;
			fullscreenScore.textContent = item.score;
			if (item.textpng && item.textpng.length > 0) {
				imageShowcase.style.display = 'block';
				renderImageSlider(item.textpng);
			} else {
				imageShowcase.style.display = 'none';
			}
		// ç™½è‰²é®ç½©æ•ˆæœ
const overlay = document.createElement('div');
overlay.className = 'white-overlay';
document.body.appendChild(overlay);
setTimeout(() => overlay.remove(), 1000);
			// è®¾ç½®æè¿°æ–‡å­—å†…å®¹
			fullscreenDesc.textContent = item.popup.text;
			
			fullscreenDownloadOptions.innerHTML = '';
			if (item.popup.downloads) {
				const titleText = isEnglishMode ? 'Please choose download method:' : 'è¯·é€‰æ‹©ä¸‹è½½æ–¹å¼ï¼š';
				fullscreenDownloadTitle.textContent = titleText;
				item.popup.downloads.forEach(opt => {
					const btn = document.createElement('button');
					btn.className = 'fullscreen-download-option';
					btn.textContent = opt.text;
					btn.onclick = () => { opt.url && window.open(opt.url, '_blank'); hideFullscreenModal(); };
					fullscreenDownloadOptions.appendChild(btn);
				});
			} else {
				fullscreenDownloadTitle.textContent = '';
			}
			fullscreenModal.classList.add('active');
		}

		function renderImageSlider(images) {
			imageSlider.innerHTML = '';
			sliderNav.innerHTML = '';
			images.forEach((src, index) => {
				const img = document.createElement('img');
				img.src = src;
				img.className = 'slider-image';
				img.alt = `å±•ç¤º ${index + 1}`;
				imageSlider.appendChild(img);
				const dot = document.createElement('div');
				dot.className = 'slider-dot';
				if (index === 0) dot.classList.add('active');
				dot.addEventListener('click', () => goToSlide(index));
				sliderNav.appendChild(dot);
			});
			currentImageIndex = 0;
			updateSliderPosition();
		}

		function updateSliderPosition() {
			const slideWidth = imageSlider.children[0]?.offsetWidth || 0;
			imageSlider.style.transform = `translateX(-${currentImageIndex * slideWidth}px)`;
			document.querySelectorAll('.slider-dot').forEach((dot, index) => {
				dot.classList.toggle('active', index === currentImageIndex);
			});
		}

		function goToSlide(index) {
			if (index >= 0 && index < imageSlider.children.length) {
				currentImageIndex = index;
				updateSliderPosition();
			}
		}

		function nextSlide() {
			currentImageIndex < imageSlider.children.length - 1 && currentImageIndex++;
			updateSliderPosition();
		}

		function prevSlide() {
			currentImageIndex > 0 && currentImageIndex--;
			updateSliderPosition();
		}

		function hideFullscreenModal() {
			fullscreenModal.classList.remove('active');
		}

		function saveSearchHistory(kw) {
			if (!kw.trim()) return;
			searchHistory = searchHistory.filter(h => h.keyword !== kw);
			searchHistory.unshift({ keyword: kw, timestamp: Date.now() });
			searchHistory.length > 10 && (searchHistory = searchHistory.slice(0, 10));
			localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
		}

		function performSearch(kw, container = resultSoftwareListEl) {
			if (!kw.trim()) {
				renderSoftwareList(sortedSoftware, container);
				return;
			}
			saveSearchHistory(kw);
			const filtered = translatedSoftwareData.filter(s => 
				s.name.toLowerCase().includes(kw.toLowerCase()) || 
				originalSoftwareData.find(orig => orig.name.toLowerCase().includes(kw.toLowerCase()) && translateText(orig.name) === s.name)
			);
			renderSoftwareList(filtered, container);
		}

		function showSearchResultPage() {
			searchResultPage.classList.add('active');
			searchResultInput.value = searchInput.value;
			searchResultInput.focus();
		}

		function hideSearchResultPage() {
			searchResultPage.classList.remove('active');
			searchInput.value = '';
			searchResultInput.value = '';
		}

		function renderHistoryPage() {
			if (!searchHistory.length) {
				const emptyText = isEnglishMode ? 'No search history' : 'æš‚æ— æœç´¢å†å²';
				historyContent.innerHTML = `<div class="empty-history">${emptyText}</div>`;
				return;
			}
			const shown = new Set();
			let html = '';
			searchHistory.forEach(hist => {
				const results = translatedSoftwareData.filter(s => 
					s.name.toLowerCase().includes(hist.keyword.toLowerCase()) && !shown.has(s.name)
				).slice(0, 2);
				if (!results.length) return;
				results.forEach(r => shown.add(r.name));
				const resHtml = results.map(r => {
					const link = r.downloadUrl && r.downloadUrl.trim() && r.downloadUrl !== 'æ— ' ? r.downloadUrl : '#';
					const disabled = (!link || link === '#') ? 'disabled' : '';
					const downloadText = isEnglishMode ? 'Download' : 'ä¸‹è½½';
					return `
					<div class="history-result-item">
						<img src="${r.image}" class="history-result-img" alt="${r.name}">
						<div class="history-result-info">
							<div class="history-result-name">${r.name}</div>
							<div class="history-result-score">${r.score}</div>
						</div>
						<a href="${link}" class="download-btn-main" target="_blank" ${disabled} style="padding:6px 12px;font-size:12px;">${downloadText}</a>
					</div>`;
				}).join('');
				const searchLabel = isEnglishMode ? 'Search:' : 'æœç´¢ï¼š';
				html += `
				<div class="history-search-item">
					<div class="history-search-header">
						<div class="history-search-keyword">${searchLabel}<strong>"${hist.keyword}"</strong></div>
						<button class="history-search-btn" onclick="quickSearch('${hist.keyword}')">${isEnglishMode ? 'Search' : 'æœç´¢'}</button>
					</div>
					<div class="history-search-results">${resHtml}</div>
				</div>`;
			});
			historyContent.innerHTML = html || `<div class="empty-history">${isEnglishMode ? 'All software displayed above' : 'æ‰€æœ‰è½¯ä»¶å·²åœ¨ä¸Šæ–¹æ˜¾ç¤ºå®Œæ¯•'}</div>`;
		}

		function quickSearch(kw) {
			historyPage.classList.remove('active');
			searchInput.value = kw;
			searchResultInput.value = kw;
			performSearch(kw, resultSoftwareListEl);
			showSearchResultPage();
			searchResultInput.focus();
		}

		function initLanguageState() {
			checkLanguageState();
			translatedSoftwareData = getTranslatedSoftwareData();
			sortedSoftware = [...translatedSoftwareData].sort((a, b) => {
				const scoreA = parseFloat(a.score.match(/\d+\.?\d*/)[0]) || 0;
				const scoreB = parseFloat(b.score.match(/\d+\.?\d*/)[0]) || 0;
				return scoreB - scoreA;
			});
			updatePageText();
			renderBottomNav();
		}

		function updatePageText() {
			document.getElementById('searchInput').placeholder = isEnglishMode ? 'Search software name' : 'æœç´¢è½¯ä»¶åç§°';
			document.getElementById('searchResultInput').placeholder = isEnglishMode ? 'Search software name' : 'æœç´¢è½¯ä»¶åç§°';
			document.getElementById('searchText').textContent = isEnglishMode ? 'Search' : 'æœç´¢';
			document.querySelector('.search-result-actions .search-text').textContent = isEnglishMode ? 'Search' : 'æœç´¢';
			document.getElementById('cancelBtn').textContent = isEnglishMode ? 'Cancel' : 'å–æ¶ˆ';
			document.getElementById('resultCancelBtn').textContent = isEnglishMode ? 'Cancel' : 'å–æ¶ˆ';
			document.querySelector('.history-title').textContent = isEnglishMode ? 'History' : 'å†å²è®°å½•';
			document.title = isEnglishMode ? 'Software Search & Download' : 'æ¤åˆ›é­”ç›’';
		}
function init() {
	initLanguageState();
	
	// å…ˆæ‰¾å‡º forceFirst çš„é¡¹
	const forcedItems = translatedSoftwareData.filter(s => s.forceFirst);
	// å‰©ä¸‹çš„æŒ‰è¯„åˆ†æ’åº
	const normalItems = translatedSoftwareData
		.filter(s => !s.forceFirst)
		.sort((a, b) => {
			const scoreA = parseFloat(a.score.match(/\d+\.?\d*/)[0]) || 0;
			const scoreB = parseFloat(b.score.match(/\d+\.?\d*/)[0]) || 0;
			return scoreB - scoreA;
		});
	
	// åˆå¹¶ï¼šå¼ºåˆ¶ç½®é¡¶çš„æ”¾å‰é¢
	sortedSoftware = [...forcedItems, ...normalItems];
	
	renderSoftwareList(sortedSoftware);
}

		init();

		searchInput.addEventListener('focus', showSearchResultPage);
		searchText.addEventListener('click', () => { const kw = searchInput.value.trim(); kw && performSearch(kw, softwareListEl); });
		resultSearchText.addEventListener('click', () => { const kw = searchResultInput.value.trim(); kw && performSearch(kw, resultSoftwareListEl); });
		cancelBtn.addEventListener('click', hideSearchResultPage);
		resultCancelBtn.addEventListener('click', hideSearchResultPage);
		historyBtn.addEventListener('click', () => { renderHistoryPage(); historyPage.classList.add('active'); });
		backBtn.addEventListener('click', () => historyPage.classList.remove('active'));
		[searchResultInput, searchInput].forEach(inp => {
			inp.addEventListener('keypress', e => {
				if (e.key === 'Enter') {
					const kw = inp.value.trim();
					const targetContainer = inp.id === 'searchResultInput' ? resultSoftwareListEl : softwareListEl;
					kw && performSearch(kw, targetContainer);
				}
			});
			inp.addEventListener('input', () => {
				const other = inp.id === 'searchInput' ? searchResultInput : searchInput;
				other.value = inp.value;
			});
		});
		fullscreenModalClose.addEventListener('click', hideFullscreenModal);
		fullscreenModal.addEventListener('click', e => e.target === fullscreenModal && hideFullscreenModal());
		let startX = 0;
		imageSlider.addEventListener('touchstart', e => startX = e.touches[0].clientX);
		imageSlider.addEventListener('touchend', e => {
			const endX = e.changedTouches[0].clientX;
			const diffX = startX - endX;
			Math.abs(diffX) > 50 && (diffX > 0 ? nextSlide() : prevSlide());
		});

		window.showFullscreenPopup = showFullscreenPopup;
		window.quickSearch = quickSearch;
	</script>
</body>
</html>