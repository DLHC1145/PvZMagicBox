<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<title>æ¤åˆ›é­”ç›’</title>
	<style>
		*{margin:0;padding:0;box-sizing:border-box}
		body{font-family:Arial,sans-serif;background:#f5f5f5;padding:0;touch-action:pan-x pan-y;overflow-x:hidden;padding-bottom:60px}
		html{touch-action:manipulation;-webkit-text-size-adjust:none;-ms-text-size-adjust:none;text-size-adjust:none}
		.user-info-bar{background:#45a049;height:40px;display:flex;align-items:center;justify-content:space-between;padding:0 15px;color:#fff;font-size:14px}
		.welcome-text{font-weight:bold}
		.login-btn,.logout-btn{background:rgba(255,255,255,.2);color:#fff;border:1px solid rgba(255,255,255,.3);border-radius:15px;padding:5px 12px;cursor:pointer;font-size:12px}
		.login-btn:hover,.logout-btn:hover{background:rgba(255,255,255,.3)}
		.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:1000;display:none;justify-content:center;align-items:center}
		.modal-overlay.show{display:flex}
		.login-modal{background:#fff;border-radius:10px;padding:30px;width:90%;max-width:400px;box-shadow:0 10px 30px rgba(0,0,0,.3)}
		.modal-header h2{color:#333;font-size:20px;margin-bottom:15px;text-align:center}
		.form-group{margin-bottom:20px}
		.form-group label{display:block;margin-bottom:8px;color:#333;font-weight:bold}
		.form-input{width:100%;padding:12px;border:2px solid #ddd;border-radius:8px;font-size:16px}
		.form-input:focus{outline:none;border-color:#4CAF50}
		.error-message{color:#f44336;font-size:12px;margin-top:5px;display:none}
		.modal-buttons{display:flex;gap:10px;justify-content:end}
		.btn{padding:10px 20px;border:none;border-radius:8px;cursor:pointer;font-size:14px;font-weight:bold}
		.btn-primary{background:#4CAF50;color:#fff}
		.btn-secondary{background:#f5f5f5;color:#666}
		.bottom-nav{position:fixed;bottom:0;left:0;width:100%;height:60px;background:#fff;border-top:1px solid #e5e5e5;display:flex;justify-content:space-around;align-items:center;z-index:200}
		.nav-item{display:flex;flex-direction:column;align-items:center;justify-content:center;flex:1;height:100%;text-decoration:none;color:#999;transition:color .3s}
		.nav-item.active{color:#4CAF50}
		.nav-icon{width:24px;height:24px;margin-bottom:4px;font-size:20px}
		.nav-icon img{width:100%;height:100%;object-fit:contain}
		.nav-text{font-size:12px}
		.function-list{background:#fff;margin:20px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,.1);overflow:hidden;transition:all .3s}
		.list-item{display:flex;align-items:center;justify-content:space-between;padding:15px 20px;border-bottom:1px solid #f0f0f0;cursor:pointer;transition:background .3s}
		.list-item:last-child{border-bottom:none}
		.list-item:hover{background:#f9f9f9}
		.list-item-left{display:flex;align-items:center}
		.list-icon{width:20px;height:20px;margin-right:12px;font-size:16px}
		.list-text{font-size:16px;color:#333}
		.view-btn{background:#2196F3;color:#fff;border:none;border-radius:6px;padding:6px 12px;font-size:12px;cursor:pointer;transition:background .3s}
		.view-btn:hover{background:#1976D2}
		.contact-modal{background:#fff;border-radius:10px;padding:30px;width:90%;max-width:350px;box-shadow:0 10px 30px rgba(0,0,0,.3);text-align:center}
		.contact-title{color:#333;font-size:18px;margin-bottom:20px}
		.qq-info{display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:20px;padding:15px;background:#f5f5f5;border-radius:8px}
		.qq-number{font-size:18px;font-weight:bold;color:#333}
		.contact-buttons{display:flex;gap:10px;justify-content:center}
		.about-page{background:#f5f5f5;min-height:100vh;position:fixed;top:0;left:0;width:100%;padding:80px 20px 20px;z-index:500;display:none}
		.about-header{position:fixed;top:0;left:0;width:100%;background:#fff;border-bottom:1px solid #e5e5e5;padding:15px 20px;display:flex;align-items:center;justify-content:space-between;z-index:600}
		.back-btn{background:none;border:none;font-size:18px;cursor:pointer;padding:5px 10px;border-radius:5px}
		.back-btn:hover{background:#f0f0f0}
		.header-title{font-size:16px;font-weight:bold;color:#333}
		.app-info{text-align:center;margin-top:20px}
		.app-icon{width:80px;height:80px;background:#4CAF50;border-radius:15px;margin:0 auto 10px;display:flex;align-items:center;justify-content:center;font-size:36px;color:#fff}
		.app-icon img{width:100%;height:100%;object-fit:cover;border-radius:15px}
		.app-name{font-size:18px;font-weight:bold;color:#333;margin-bottom:5px}
		.version-display{font-size:14px;color:#666}
		.settings-page{background:#f5f5f5;min-height:100vh;position:fixed;top:0;left:0;width:100%;padding:80px 20px 20px;z-index:500;display:none}
		.settings-header{position:fixed;top:0;left:0;width:100%;background:#fff;border-bottom:1px solid #e5e5e5;padding:15px 20px;display:flex;align-items:center;justify-content:space-between;z-index:600}
		.settings-icon-container{margin:20px auto;width:80px;height:80px;border-radius:18px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,.1);background:#fff}
		.settings-icon{width:100%;height:100%;object-fit:cover}
		.settings-content{background:#fff;border-radius:10px;padding:20px;margin-top:20px;box-shadow:0 2px 10px rgba(0,0,0,.1)}
		.setting-item{padding:15px 0;border-bottom:1px solid #f0f0f0;display:flex;justify-content:space-between;align-items:center}
		.setting-item:last-child{border-bottom:none}
		.setting-label{font-size:16px;color:#333}
		.setting-value{font-size:14px;color:#666;display:flex;align-items:center;gap:8px}
		.wechat-notification{position:fixed;top:-200px;left:50%;transform:translateX(-50%);width:90%;max-width:320px;background:linear-gradient(135deg,#07bb07,#00d100);border-radius:8px;padding:15px;box-shadow:0 4px 20px rgba(0,0,0,.3);z-index:2000;transition:top .5s cubic-bezier(.25,.46,.45,.94);color:#fff;cursor:pointer}
		.wechat-notification.show{top:20px}
		.wechat-notification:active{top:-200px!important}
		.notification-header{display:flex;align-items:center;margin-bottom:8px}
		.studio-name{font-size:16px;font-weight:bold;margin-left:8px}
		.notification-content{font-size:13px;opacity:.9;line-height:2.2}
		.notification-icon{width:20px;height:20px;background:rgba(255,255,255,.2);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px}
		.copy-success-modal{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,.8);color:#fff;padding:15px 25px;border-radius:8px;z-index:1500;display:none;font-size:16px}
		.copy-success-modal.show{display:block;animation:fadeInOut 2s}
		@keyframes fadeInOut{0%{opacity:0}20%{opacity:1}80%{opacity:1}100%{opacity:0}}
		.terms-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);z-index:3000;display:none;justify-content:center;align-items:center;backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px)}
		.terms-overlay.show{display:flex}
		.terms-modal{background:#fff;border-radius:15px;width:90%;max-width:600px;max-height:80vh;position:relative;box-shadow:0 20px 60px rgba(0,0,0,.4);display:flex;flex-direction:column}
		.terms-header{padding:20px;border-bottom:1px solid #eee;display:flex;justify-content:space-between;align-items:center;background:#f8f9fa;border-radius:15px 15px 0 0}
		.terms-title{font-size:18px;font-weight:bold;color:#333;margin:0}
		.terms-close{background:none;border:none;font-size:24px;color:#999;cursor:pointer;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .3s}
		.terms-close:hover{background:#f0f0f0;color:#333}
		.terms-content{padding:20px;overflow-y:auto;flex:1;line-height:1.6;color:#555;font-size:14px}
		.loading-text{text-align:center;color:#999;font-style:italic;padding:40px}
		.error-text{text-align:center;color:#f44336;font-style:italic;padding:40px}
		.link-modal{background:#fff;border-radius:10px;padding:20px;width:90%;max-width:400px;box-shadow:0 10px 30px rgba(0,0,0,.3)}
		.link-modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid #eee}
		.link-modal-title{font-size:18px;font-weight:bold;color:#333}
		.link-modal-close{background:none;border:none;font-size:20px;color:#999;cursor:pointer}
		.link-content{margin:15px 0}
		.link-url{width:100%;padding:10px;border:1px solid #ddd;border-radius:6px;font-size:14px;word-break:break-all;margin-bottom:10px}

		/* æ–‡ä»¶å¤¹å †å ç‰¹æ•ˆï¼ˆå¤šå±‚é€æ˜å±‚å è§†è§‰ï¼‰ */
		.folder-stack {
			position: relative;
			display: inline-block;
			margin-right: 8px;
		}
		.folder-stack::before,
		.folder-stack::after {
			content: '';
			position: absolute;
			width: 20px;
			height: 16px;
			background: #4CAF50;
			border-radius: 2px;
			box-shadow: 0 1px 2px rgba(0,0,0,0.2);
		}
		.folder-stack::before {
			top: -2px;
			left: 2px;
			z-index: 1;
			background: #66BB6A; /* ä¸­é—´å±‚é¢œè‰² */
			opacity: 0.8; /* é€æ˜åº¦æ¨¡æ‹Ÿå±‚å  */
		}
		.folder-stack::after {
			top: 0;
			left: 0;
			z-index: 2;
			background: #81C784; /* é¡¶å±‚é¢œè‰² */
			opacity: 0.9;
		}
		.folder-stack .folder-icon {
			position: relative;
			z-index: 3;
			font-size: 16px;
			color: white;
			width: 20px;
			height: 16px;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		/* å †å ç©ºæ¡† */
		.stack-placeholder {
			display: flex;
			align-items: center;
			padding: 15px 20px;
			margin: 0 20px 10px;
			background: #f0f0f0;
			border: 1px dashed #ccc;
			border-radius: 8px;
			color: #999;
			font-size: 14px;
			position: relative;
		}
		.stack-placeholder::before,
		.stack-placeholder::after {
			content: '';
			position: absolute;
			width: 20px;
			height: 16px;
			background: #ddd;
			border-radius: 2px;
			box-shadow: 0 1px 2px rgba(0,0,0,0.1);
		}
		.stack-placeholder::before {
			top: -2px;
			left: 2px;
			z-index: 1;
			background: #e0e0e0;
			opacity: 0.7;
		}
		.stack-placeholder::after {
			top: 0;
			left: 0;
			z-index: 2;
			background: #e8e8e8;
			opacity: 0.8;
		}
		.stack-placeholder .folder-icon {
			position: relative;
			z-index: 3;
			font-size: 16px;
			color: #aaa;
			width: 20px;
			height: 16px;
			display: flex;
			align-items: center;
			justify-content: center;
			margin-right: 12px;
		}

		/* å±•å¼€åŠ¨ç”» */
		.sub-item {
			max-height: 0;
			overflow: hidden;
			transition: max-height 0.3s ease-out, padding 0.3s ease-out;
			padding: 0 20px;
			border-bottom: 1px solid transparent;
		}
		.sub-item.show {
			max-height: 60px;
			padding: 15px 20px;
			border-bottom: 1px solid #f0f0f0;
		}

		/* å½©è›‹æŒ‰é’®æ ·å¼ */
		.easter-egg-btn {
			background: none;
			border: none;
			font-size: 18px;
			cursor: pointer;
			margin-left: 8px;
			vertical-align: middle;
			padding: 2px 6px;
			border-radius: 4px;
			transition: background 0.2s;
		}
		.easter-egg-btn:hover {
			background: rgba(0,0,0,0.05);
		}
	</style>
</head>
<body>
	<div class="user-info-bar">
		<div class="welcome-text" id="welcomeText">æ¬¢è¿è®¿é—®</div>
		<div>
			<span id="loginStatus" class="login-btn" onclick="showLoginModal()">ç‚¹å‡»ç™»å½•</span>
			<span id="logoutBtn" class="logout-btn" onclick="logout()" style="display:none;margin-left:10px">é€€å‡º</span>
		</div>
	</div>

	<div id="functionListContainer" class="function-list"></div>

	<!-- ç™»å½•å¼¹çª—ï¼ˆä¿æŒåŸæ ·ï¼‰ -->
	<div id="loginModal" class="modal-overlay" onclick="closeLoginModal(event)">
		<div class="login-modal" onclick="event.stopPropagation()">
			<div class="modal-header"><h2>ç”¨æˆ·ç™»å½•</h2></div>
			<form id="loginForm">
				<div class="form-group">
					<label for="username">è´¦å·ï¼š</label>
					<input type="text" id="username" class="form-input" placeholder="è‡³å°‘2ä½å­—ç¬¦">
					<div id="usernameError" class="error-message">è´¦å·è‡³å°‘éœ€è¦2ä½å­—ç¬¦</div>
				</div>
				<div class="form-group">
					<label for="password">å¯†ç ï¼š</label>
					<input type="password" id="password" class="form-input" placeholder="8-12ä½ï¼Œéœ€å«è‹±æ–‡å’Œæ•°å­—">
					<div id="passwordError" class="error-message">å¯†ç éœ€8-12ä½ï¼Œä¸”å¿…é¡»åŒ…å«è‹±æ–‡å’Œæ•°å­—</div>
				</div>
				<div class="modal-buttons">
					<button type="button" class="btn btn-secondary" onclick="closeLoginModal()">å–æ¶ˆ</button>
					<button type="submit" class="btn btn-primary">ç¡®å®š</button>
				</div>
			</form>
		</div>
	</div>

	<!-- è”ç³»ä½œè€…å¼¹çª—ï¼ˆä¿æŒåŸæ ·ï¼‰ -->
	<div id="contactModal" class="modal-overlay" onclick="closeContactModal(event)">
		<div class="contact-modal" onclick="event.stopPropagation()">
			<h2 class="contact-title">è”ç³»ä½œè€…</h2>
			<div class="qq-info">
				<span>ä½œè€…QQï¼š</span>
				<span class="qq-number" id="qqDisplay">2019947085</span>
			</div>
			<div class="contact-buttons">
				<button class="btn btn-secondary" onclick="closeContactModal()">å…³é—­</button>
				<button class="btn btn-primary" onclick="copyQQFromModal()">å¤åˆ¶QQå·</button>
			</div>
		</div>
	</div>

	<!-- é“¾æ¥å¼¹çª—ï¼ˆä¿æŒåŸæ ·ï¼‰ -->
	<div id="linkModal" class="modal-overlay" onclick="closeGenericModal('linkModal',event)">
		<div class="link-modal" onclick="event.stopPropagation()">
			<div class="link-modal-header">
				<div class="link-modal-title" id="linkTitle">é“¾æ¥</div>
				<button class="link-modal-close" onclick="closeGenericModal('linkModal')">Ã—</button>
			</div>
			<div class="link-content">
				<div id="linkUrl" class="link-url"></div>
				<button class="btn btn-primary" onclick="copyGenericLinkFromModal('linkModal')">å¤åˆ¶é“¾æ¥</button>
			</div>
			<div class="modal-buttons">
				<button class="btn btn-secondary" onclick="closeGenericModal('linkModal')">å…³é—­</button>
				<button class="btn btn-primary" onclick="openGenericLinkFromModal('linkModal')">æ‰“å¼€é“¾æ¥</button>
			</div>
		</div>
	</div>

	<div id="link1Modal" class="modal-overlay" onclick="closeGenericModal('link1Modal',event)">
		<div class="link-modal" onclick="event.stopPropagation()">
			<div class="link-modal-header">
				<div class="link-modal-title" id="link1Title">é“¾æ¥1</div>
				<button class="link-modal-close" onclick="closeGenericModal('link1Modal')">Ã—</button>
			</div>
			<div class="link-content">
				<div id="link1Url" class="link-url"></div>
				<button class="btn btn-primary" onclick="copyGenericLinkFromModal('link1Modal')">å¤åˆ¶é“¾æ¥</button>
			</div>
			<div class="modal-buttons">
				<button class="btn btn-secondary" onclick="closeGenericModal('link1Modal')">å…³é—­</button>
				<button class="btn btn-primary" onclick="openGenericLinkFromModal('link1Modal')">æ‰“å¼€é“¾æ¥</button>
			</div>
		</div>
	</div>

	<!-- å¾®ä¿¡é€šçŸ¥ï¼ˆä¿æŒåŸæ ·ï¼‰ -->
	<div id="wechatNotification" class="wechat-notification" onclick="hideWeChatNotification()">
		<div class="notification-header">
			<div class="notification-icon">ğŸ’¬</div>
			<div class="studio-name">å¤å…´å·¥ä½œå®¤</div>
		</div>
		<div class="notification-content">
			<div style="font-weight:bold;margin-bottom:3px">æ¤åˆ›é­”ç›’</div>
			<div>æˆ‘ä»¬åªæ˜¯PVZçš„å¿ å®çˆ±å¥½è€…ï¼</div>
		</div>
	</div>

	<div id="copySuccessModal" class="copy-success-modal">å·²å¤åˆ¶åˆ°å‰ªè´´æ¿</div>

	<div id="termsOverlay" class="terms-overlay" onclick="closeTermsModal(event)">
		<div class="terms-modal" onclick="event.stopPropagation()">
			<div class="terms-header">
				<h2 class="terms-title">æ¤åˆ›é­”ç›’éœ¸ç‹æ¡æ¬¾</h2>
				<button class="terms-close" onclick="closeTermsModal()">Ã—</button>
			</div>
			<div class="terms-content" id="termsContent">
				<div class="loading-text">æ­£åœ¨åŠ è½½æ¡æ¬¾å†…å®¹...</div>
			</div>
		</div>
	</div>

	<div class="bottom-nav" id="bottomNav"></div>

	<div id="aboutPage" class="about-page">
		<div class="about-header">
			<button class="back-btn" onclick="hideAbout()">â†</button>
			<div class="header-title">å…³äºæˆ‘ä»¬</div>
		</div>
		<div class="app-info">
			<div class="app-icon">
				<img src="å›¾æ ‡.jpg" alt="åº”ç”¨å›¾æ ‡" onerror="this.style.display='none';this.parentNode.innerHTML='ğŸ“±';this.parentNode.style.fontSize='36px';this.parentNode.style.display='flex';this.parentNode.style.alignItems='center';this.parentNode.style.justifyContent='center'">
			</div>
			<div class="app-name">è½¯ä»¶æœç´¢ä¸‹è½½</div>
			<div class="version-display" id="versionDisplay">ç‰ˆæœ¬ 2.2</div>
		</div>
	</div>

	<div id="settingsPage" class="settings-page">
		<div class="settings-header">
			<button class="back-btn" onclick="hideSettings()">â†</button>
			<div class="header-title" style="font-size:18px;font-weight:bold;flex:1;text-align:center">è®¾ç½®</div>
			<div style="width:40px"></div>
		</div>
		<div class="settings-icon-container">
			<img src="å›¾æ ‡.jpg" alt="åº”ç”¨å›¾æ ‡" class="settings-icon" onerror="this.style.display='none';this.parentNode.innerHTML='âš™ï¸';this.parentNode.style.fontSize='36px';this.parentNode.style.display='flex';this.parentNode.style.alignItems='center';this.parentNode.style.justifyContent='center'">
		</div>
		<div class="settings-content">
			<div class="setting-item">
				<span class="setting-label">åº”ç”¨ç‰ˆæœ¬</span>
				<span class="setting-value" id="settingsVersionDisplay">2.2</span>
			</div>
			<div class="setting-item">
				<span class="setting-label">å¼€å‘è€…</span>
				<span class="setting-value">å¤å…´å·¥ä½œå®¤</span>
			</div>
			<div class="setting-item">
				<span class="setting-label">è”ç³»æ–¹å¼</span>
				<span class="setting-value">QQ: 2019947085</span>
			</div>
			<div class="setting-item">
				<span class="setting-label">ä¸»é¢˜æ¨¡å¼</span>
				<span class="setting-value">æµ…è‰²æ¨¡å¼</span>
			</div>
		</div>
		<div class="function-list" style="margin-top:30px">
			<div class="list-item" onclick="showTermsModal()">
				<div class="list-item-left">
					<div class="list-icon">ğŸ“‹</div>
					<div class="list-text">æ¤åˆ›é­”ç›’éœ¸ç‹æ¡æ¬¾</div>
				</div>
				<button class="view-btn" onclick="event.stopPropagation();showTermsModal()">é˜…è¯»</button>
			</div>
		</div>
	</div>

	<script>
		const NAV_CONFIG = [
			{icon:'home.png',text:'ä¸»é¡µ',link:'indexhome.html',active:true},
			{icon:'author.png',text:'è®ºå›',link:'index2.html'},
			{icon:'my.png',text:'æˆ‘çš„',link:'index3.html'}
		];

		const FUNCTION_LIST_CONFIG = [
			{id:'contact',icon:'ğŸ“',text:'è”ç³»ä½œè€…',actionType:'modal',actionTarget:'contactModal',btnText:'æŸ¥çœ‹'},
			{id:'settings',icon:'âš™ï¸',text:'è®¾ç½®',actionType:'function',actionTarget:'goToSettings',btnText:'',showBtn:false},
			{id:'about',icon:'â„¹ï¸',text:'å…³äºæˆ‘ä»¬',actionType:'function',actionTarget:'showAboutNotification',btnText:'',showBtn:false},
			{id:'official-site',icon:'â¤ï¸â€ğŸ”¥',text:'æ”¯æŒä½œè€…ï¼ˆçˆ±å‘ç”µï¼‰',actionType:'link',actionTarget:'linkModal',linkUrl:'https://afdian.com/a/DLHC1145',btnText:'è®¿é—®'},
			{id:'official-site-smr',icon:'ğŸ”§',text:'ç¥ç§˜äººå·¥å…·ç®±&ç¥ç§˜äººä¸»é¡µ',actionType:'link',actionTarget:'link1Modal',linkUrl:'https://b23.tv/MNqU5D2',btnText:'æŸ¥çœ‹'},
			{id:'official-site-zip',icon:'ğŸ“•',text:'ä¸€é”®è½¬æ¢å‹ç¼©åŒ…æ ¼å¼',actionType:'link',actionTarget:'link1Modal',linkUrl:'åŠŸèƒ½ï¼šä¿®æ”¹å‹ç¼©åŒ…æ ¼å¼.html',btnText:'æŸ¥çœ‹'},
			{id:'official-site-123',icon:'ğŸ”—',text:'ä¸€é”®è½¬æ¢æ•°å€¼è¿›åˆ¶',actionType:'link',actionTarget:'link1Modal',linkUrl:'æ•°å€¼è¿›åˆ¶è½¬æ¢.html',btnText:'æŸ¥çœ‹'},
			{id:'official-site-unix',icon:'â±ï¸',text:'åœ¨çº¿è·å–æ—¶é—´æˆ³',actionType:'link',actionTarget:'link1Modal',linkUrl:'æ—¶é—´æˆ³.html',btnText:'æŸ¥çœ‹'},
			{id:'official-site-mp42jpg',icon:'ğŸ“¹',text:'è§†é¢‘ä¸€é”®æŠ½å¸§ï¼ˆmp4è½¬jpgï¼‰',actionType:'link',actionTarget:'link1Modal',linkUrl:'è§†é¢‘æŠ½å¸§.html',btnText:'æŸ¥çœ‹'},
			{id:'officiqqal-site-**2webp',icon:'ğŸ§',text:'å®˜æ–¹QQ äº¤æµç¾¤(ï¿£_,ï¿£ )',actionType:'link',actionTarget:'link1Modal',linkUrl:'https://qun.qq.com/universal-share/share?ac=1&authKey=pKNKxoY%2FPwf9MVeWpQRvyCPX2ZeVgf0798JdPpi4%2Bl%2F%2BH6u7ISX9i%2Bo0AadZ1Mdo&busi_data=eyJncm91cENvZGUiOiI4NTczMTMyNDIiLCJ0b2tlbiI6InNOTEU1NWR4Rm5RZjNxQ05iaHVlaXljSzk4SHZBRlZoK0k4R096ZnptbEkvVk5mSlJpZ3BRckordEtoemUrTHgiLCJ1aW4iOiIyMDE5OTQ3MDg1In0%3D&data=LpkKsXNru5IsgrMrMplCddYk0Re-FyPSVL7Yn-Ca4BnLmqJSFiZz7R-k3zrlX7pddiVu9O_c7BF3c2XZCEheKw&svctype=4&tempid=h5_group_info',btnText:'åŠ å…¥'},		
			{id:'official-site-**2webp',icon:'ğŸŒ',text:'å›¾ç‰‡å‹ç¼©ï¼ˆ**è½¬webpï¼‰',actionType:'link',actionTarget:'link1Modal',linkUrl:'å›¾ç‰‡å‹ç¼©.html',btnText:'æŸ¥çœ‹'}							
		];

		// é€šç”¨å¼¹çª—å‡½æ•°ï¼ˆä¿æŒåŸæ ·ï¼‰
		function showGenericModal(modalId,title,url){
			const modal=document.getElementById(modalId);
			const baseId=modalId.replace('Modal','');
			const titleElement=document.getElementById(baseId+'Title');
			const urlElement=document.getElementById(baseId+'Url');
			if(titleElement)titleElement.textContent=title;
			if(urlElement){
				urlElement.innerHTML=`<a href="${url}" target="_blank">${url}</a>`;
				urlElement.setAttribute('data-link',url);
			}
			modal.classList.add('show');
		}

		function closeGenericModal(modalId,event){
			if(event&&event.target!==document.getElementById(modalId))return;
			document.getElementById(modalId).classList.remove('show');
		}

		function copyGenericLinkFromModal(modalId){
			const baseId=modalId.replace('Modal','');
			const urlElement=document.getElementById(baseId+'Url');
			const url=urlElement.getAttribute('data-link');
			const textArea=document.createElement("textarea");
			textArea.value=url;
			textArea.style.position="fixed";
			textArea.style.opacity=0;
			document.body.appendChild(textArea);
			textArea.focus();
			textArea.select();
			try{
				const successful=document.execCommand('copy');
				if(successful)showCopySuccess();
				else alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥');
			}catch(err){alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥');}
			document.body.removeChild(textArea);
		}

		function openGenericLinkFromModal(modalId){
			const baseId=modalId.replace('Modal','');
			const urlElement=document.getElementById(baseId+'Url');
			const url=urlElement.getAttribute('data-link');
			window.open(url,'_blank');
		}

		// åº•éƒ¨å¯¼èˆªï¼ˆä¿æŒåŸæ ·ï¼‰
		function generateBottomNav(){
			const bottomNav=document.getElementById('bottomNav');
			let navHTML='';
			NAV_CONFIG.forEach((item,index)=>{
				const isActive=item.active?'active':'';
				const text=item.text;
				const link=item.link;
				navHTML+=`<a href="${link}" class="nav-item ${isActive}" onclick="handleNavigation(${index},event)">
					<div class="nav-icon"><img src="${item.icon}" alt="${text}" onerror="this.style.display='none';this.parentNode.innerHTML='ğŸ“';this.parentNode.style.fontSize='20px';this.parentNode.style.display='flex';this.parentNode.style.alignItems='center';this.parentNode.style.justifyContent='center';"></div>
					<div class="nav-text">${text}</div>
				</a>`;
			});
			bottomNav.innerHTML=navHTML;
		}

		// å±•å¼€/æ”¶ç¼©çŠ¶æ€
		let folderExpanded = false;

		// ç”ŸæˆåŠŸèƒ½åˆ—è¡¨ï¼ˆæ ¸å¿ƒä¿®æ”¹éƒ¨åˆ†ï¼‰
		function generateFunctionList(){
			const container=document.getElementById('functionListContainer');
			const firstThree = FUNCTION_LIST_CONFIG.slice(0, 3);
			const remainingItems = FUNCTION_LIST_CONFIG.slice(3);
			let listHTML = '';

			// å‰3ä¸ªåŠŸèƒ½é¡¹ï¼ˆè”ç³»ä½œè€…ã€è®¾ç½®ã€å…³äºæˆ‘ä»¬ï¼‰
			firstThree.forEach(item => {
				if (item.id === 'about') {
					// å…³äºæˆ‘ä»¬ï¼šå·¦ä¾§æ–‡æœ¬+å›¾æ ‡ï¼Œå³ä¾§å½©è›‹æŒ‰é’®
					listHTML += `
						<div class="list-item" onclick="toggleFolder()">
							<div class="list-item-left">
								<div class="list-icon">${item.icon}</div>
								<div class="list-text">${item.text}</div>
							</div>
							<button class="easter-egg-btn" onclick="event.stopPropagation(); showAboutNotification()">ğŸ</button>
						</div>
					`;
				} else {
					// è”ç³»ä½œè€…ã€è®¾ç½®ï¼šä¸å¯æŠ˜å ï¼Œä»…æ‰§è¡ŒåŠŸèƒ½
					listHTML += `
						<div class="list-item" onclick="handleFunctionAction('${item.id}')">
							<div class="list-item-left">
								<div class="list-icon">${item.icon}</div>
								<div class="list-text">${item.text}</div>
							</div>
							${item.showBtn ? `<button class="view-btn" onclick="event.stopPropagation(); handleFunctionAction('${item.id}')">${item.btnText}</button>` : ''}
						</div>
					`;
				}
			});

			// å †å ç©ºæ¡†ï¼ˆä¿æŒåŸæ ·ï¼‰
			listHTML += `
				</div>
			
			`;

			// å‰©ä½™åŠŸèƒ½é¡¹ï¼ˆé»˜è®¤éšè—ï¼Œå¸¦å±•å¼€åŠ¨ç”»ï¼‰
			remainingItems.forEach(item => {
				listHTML += `
					<div class="list-item sub-item" onclick="handleFunctionAction('${item.id}')">
						<div class="list-item-left">
							<div class="list-icon">${item.icon}</div>
							<div class="list-text">${item.text}</div>
						</div>
						${item.showBtn ? `<button class="view-btn" onclick="event.stopPropagation(); handleFunctionAction('${item.id}')">${item.btnText}</button>` : ''}
					</div>
				`;
			});

			container.innerHTML = listHTML;
		}

		// å±•å¼€/æ”¶ç¼©å‡½æ•°
		function toggleFolder() {
			folderExpanded = !folderExpanded;
			const subItems = document.querySelectorAll('.sub-item');
			subItems.forEach(item => {
				if (folderExpanded) {
					item.classList.add('show');
				} else {
					item.classList.remove('show');
				}
			});
		}

		// åŠŸèƒ½å¤„ç†å‡½æ•°ï¼ˆä¿æŒåŸæ ·ï¼‰
		function handleFunctionAction(itemId){
			const item=FUNCTION_LIST_CONFIG.find(i=>i.id===itemId);
			if(!item)return;
			switch(item.actionType){
				case'modal':document.getElementById(item.actionTarget).classList.add('show');break;
				case'link':showGenericModal(item.actionTarget,item.text,item.linkUrl);break;
				case'page':document.getElementById(item.actionTarget).style.display='block';break;
				case'function':if(typeof window[item.actionTarget]==='function')window[item.actionTarget]();break;
			}
		}

		// å¯¼èˆªå¤„ç†ï¼ˆä¿æŒåŸæ ·ï¼‰
		function handleNavigation(index,event){
			if(event)event.preventDefault();
			const configItem=NAV_CONFIG[index];
			window.location.href=configItem.link;
			updateNavigationState(index);
		}

		function updateNavigationState(activeIndex){
			const navItems=document.querySelectorAll('.bottom-nav .nav-item');
			navItems.forEach((item,index)=>{
				if(index===activeIndex)item.classList.add('active');
				else item.classList.remove('active');
			});
		}

		// ç™»å½•çŠ¶æ€ç®¡ç†ï¼ˆä¿æŒåŸæ ·ï¼‰
		function saveLoginState(username){
			localStorage.setItem('username',username);
			localStorage.setItem('isLoggedIn','true');
			localStorage.setItem('loginTime',Date.now());
		}

		function getLoginState(){
			const isLoggedIn=localStorage.getItem('isLoggedIn')==='true';
			const username=localStorage.getItem('username');
			const loginTime=parseInt(localStorage.getItem('loginTime'),10);
			if(isLoggedIn&&loginTime){
				const now=Date.now();
				const oneYear=365*24*60*60*1000;
				if(now-loginTime>oneYear){clearLoginState();return{isLoggedIn:false,username:null};}
			}
			return{isLoggedIn,username};
		}

		function clearLoginState(){
			localStorage.removeItem('username');
			localStorage.removeItem('isLoggedIn');
			localStorage.removeItem('loginTime');
		}

		function extractVersionFromHTML(){
			const match=document.title.match(/(\d+\.\d+)/);
			return match?`ç‰ˆæœ¬ ${match[1]} å†…æµ‹ç‰ˆ`:'ç‰ˆæœ¬ 2.2';
		}

		function validateUsername(username){return username&&username.length>=2;}
		function validatePassword(password){
			if(!password||password.length<8||password.length>12)return false;
			return/[a-zA-Z]/.test(password)&&/\d/.test(password);
		}

		// ç™»å½•å¼¹çª—æ§åˆ¶ï¼ˆä¿æŒåŸæ ·ï¼‰
		function showLoginModal(){
			document.getElementById('loginModal').classList.add('show');
			document.getElementById('username').focus();
		}

		function closeLoginModal(event){
			if(event&&event.target!==document.getElementById('loginModal'))return;
			document.getElementById('loginModal').classList.remove('show');
			clearErrors();
			document.getElementById('loginForm').reset();
		}

		function clearErrors(){
			document.getElementById('usernameError').style.display='none';
			document.getElementById('passwordError').style.display='none';
		}

		function showError(elementId,message){
			const el=document.getElementById(elementId);
			el.textContent=message;
			el.style.display='block';
		}

		function handleLogin(e){
			e.preventDefault();
			const username=document.getElementById('username').value.trim();
			const password=document.getElementById('password').value;
			clearErrors();
			let valid=true;
			if(!validateUsername(username)){showError('usernameError','è´¦å·è‡³å°‘éœ€è¦2ä½å­—ç¬¦');valid=false;}
			if(!validatePassword(password)){showError('passwordError','å¯†ç éœ€8-12ä½ï¼Œä¸”å¿…é¡»åŒ…å«è‹±æ–‡å’Œæ•°å­—');valid=false;}
			if(!valid)return;
			saveLoginState(username);
			updateUserInterface(username);
			closeLoginModal();
			alert('ç™»å½•æˆåŠŸï¼æ¬¢è¿ '+username);
		}

		function logout(){
			if(confirm('ç¡®å®šé€€å‡ºç™»å½•å—ï¼Ÿ')){
				clearLoginState();
				updateUserInterface(null);
				alert('å·²é€€å‡ºç™»å½•');
			}
		}

		function updateUserInterface(username){
			const welcomeText=document.getElementById('welcomeText');
			const loginStatus=document.getElementById('loginStatus');
			const logoutBtn=document.getElementById('logoutBtn');
			if(username){
				welcomeText.textContent='æ¬¢è¿æ‚¨ï¼Œ'+username;
				loginStatus.textContent='å·²ç™»å½•';
				loginStatus.onclick=null;
				logoutBtn.style.display='inline-block';
			}else{
				welcomeText.textContent='æ¬¢è¿è®¿é—®';
				loginStatus.textContent='ç‚¹å‡»ç™»å½•';
				loginStatus.onclick=showLoginModal;
				logoutBtn.style.display='none';
			}
		}

		function checkLoginStatus(){
			const state=getLoginState();
			if(state.isLoggedIn&&state.username)updateUserInterface(state.username);
		}

		// è”ç³»ä½œè€…å¼¹çª—æ§åˆ¶ï¼ˆä¿æŒåŸæ ·ï¼‰
		function showContactModal(){document.getElementById('contactModal').classList.add('show');}
		function closeContactModal(event){
			if(event&&event.target!==document.getElementById('contactModal'))return;
			document.getElementById('contactModal').classList.remove('show');
		}

		function copyQQFromModal(){
			const qq='2019947085';
			const textArea=document.createElement("textarea");
			textArea.value=qq;
			textArea.style.position="fixed";
			textArea.style.opacity=0;
			document.body.appendChild(textArea);
			textArea.focus();
			textArea.select();
			try{
				if(document.execCommand('copy')){showCopySuccess();setTimeout(()=>closeContactModal({target:document.getElementById('contactModal')}),1500);}
				else alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶QQå·ï¼š'+qq);
			}catch(err){alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶QQå·ï¼š'+qq);}
			document.body.removeChild(textArea);
		}

		function showCopySuccess(){
			const modal=document.getElementById('copySuccessModal');
			modal.textContent='å·²å¤åˆ¶åˆ°å‰ªè´´æ¿';
			modal.classList.add('show');
			setTimeout(()=>modal.classList.remove('show'),2000);
		}

		// å…³äºæˆ‘ä»¬å¼¹çª—ï¼ˆåŸåŠŸèƒ½ï¼‰
		function showWeChatNotification(){document.getElementById('wechatNotification').classList.add('show');}
		function hideWeChatNotification(){document.getElementById('wechatNotification').classList.remove('show');}

		let lastShowTime=0;
		const COOLDOWN=3000;
		function showAboutNotification(){
			const now=Date.now();
			if(now-lastShowTime<COOLDOWN)return;
			showWeChatNotification();
			lastShowTime=now;
			setTimeout(hideWeChatNotification,3000);
		}

		// è®¾ç½®é¡µé¢ï¼ˆä¿æŒåŸæ ·ï¼‰
		function goToSettings(){
			document.getElementById('functionListContainer').style.display='none';
			document.getElementById('settingsPage').style.display='block';
			const ver=extractVersionFromHTML();
			document.getElementById('settingsVersionDisplay').textContent=ver.replace('ç‰ˆæœ¬ ','');
		}

		function hideSettings(){
			document.getElementById('settingsPage').style.display='none';
			document.getElementById('functionListContainer').style.display='block';
		}

		function hideAbout(){document.getElementById('aboutPage').style.display='none';}

		// éœ¸ç‹æ¡æ¬¾ï¼ˆä¿æŒåŸæ ·ï¼‰
		function loadTermsContent(){
			const xhr=new XMLHttpRequest();
			xhr.open('GET','éœ¸ç‹æ¡æ¬¾.txt',true);
			xhr.onreadystatechange=function(){
				if(xhr.readyState===4){
					const contentDiv=document.getElementById('termsContent');
					if(xhr.status===200)contentDiv.innerHTML=xhr.responseText.replace(/\n/g,'<br>');
					else contentDiv.innerHTML='<div class="error-text">è¯»å–éœ¸ç‹æ¡æ¬¾å¤±è´¥ï¼Œè¯·ç¡®ä¿"éœ¸ç‹æ¡æ¬¾.txt"æ–‡ä»¶å­˜åœ¨äºåŒç›®å½•ä¸‹</div>';
				}
			};
			xhr.send();
		}

		function showTermsModal(){
			document.getElementById('termsContent').innerHTML='<div class="loading-text">æ­£åœ¨åŠ è½½æ¡æ¬¾å†…å®¹...</div>';
			document.getElementById('termsOverlay').classList.add('show');
			loadTermsContent();
		}

		function closeTermsModal(event){
			if(!event||event.target===document.getElementById('termsOverlay')||event.target.classList.contains('terms-close')){
				document.getElementById('termsOverlay').classList.remove('show');
			}
		}

		// åˆå§‹åŒ–ï¼ˆä¿æŒåŸæ ·ï¼‰
		document.getElementById('loginForm').addEventListener('submit',handleLogin);
		checkLoginStatus();
		generateBottomNav();
		generateFunctionList();

		document.addEventListener('DOMContentLoaded',()=>{
			console.log('ğŸ”§ å¯é…ç½®å¯¼èˆªç³»ç»Ÿå·²åˆå§‹åŒ–');
			console.log('ğŸ“ è¯·ç¡®ä¿å›¾ç‰‡æ–‡ä»¶ä½äºåŒç›®å½•ä¸‹:',NAV_CONFIG.map(i=>i.icon).join(', '));
		});
	</script>
</body>
</html>