<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>è¿›åˆ¶è½¬æ¢å™¨ - 2025ç‰ˆ</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			min-height: 100vh;
			padding: 20px;
			color: #333;
		}

		.container {
			max-width: 800px;
			margin: 0 auto;
			background: rgba(255, 255, 255, 0.95);
			border-radius: 20px;
			box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
			backdrop-filter: blur(10px);
			overflow: hidden;
		}

		.header {
			background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
			padding: 25px;
			text-align: center;
			color: white;
		}

		.header h1 {
			font-size: 2.2em;
			margin-bottom: 8px;
			font-weight: 700;
			text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
		}

		.header p {
			font-size: 1em;
			opacity: 0.9;
		}

		.main-content {
			padding: 30px;
		}

		/* è¾“å…¥åŒºåŸŸ */
		.input-section {
			background: #fff;
			border-radius: 15px;
			padding: 25px;
			margin-bottom: 25px;
			box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
			border: 1px solid #e1e8ed;
		}

		.input-row {
			display: flex;
			gap: 15px;
			margin-bottom: 20px;
			align-items: end;
		}

		.input-group {
			flex: 1;
		}

		.input-group label {
			display: block;
			margin-bottom: 8px;
			font-weight: 600;
			color: #34495e;
			font-size: 0.95em;
		}

		.input-field {
			width: 100%;
			padding: 12px 15px;
			border: 2px solid #e1e8ed;
			border-radius: 10px;
			font-size: 1.1em;
			transition: all 0.3s ease;
			background: #f8f9fa;
			font-family: 'Courier New', monospace;
		}

		.input-field:focus {
			outline: none;
			border-color: #4facfe;
			background: white;
			box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
		}

		/* è¿›åˆ¶é€‰æ‹©æŒ‰é’®ç»„ - åªä¿ç•™è‡ªå®šä¹‰ */
		.base-selector {
			display: flex;
			gap: 8px;
			flex-wrap: wrap;
		}

		.base-btn {
			padding: 10px 16px;
			border: 2px solid #e1e8ed;
			background: #f8f9fa;
			border-radius: 8px;
			cursor: pointer;
			transition: all 0.3s ease;
			font-weight: 600;
			font-size: 0.9em;
			min-width: 80px;
			text-align: center;
		}

		.base-btn:hover {
			border-color: #4facfe;
			background: #e3f2fd;
		}

		.base-btn.active {
			background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
			color: white;
			border-color: #4facfe;
		}

		/* è‡ªå®šä¹‰è¿›åˆ¶è®¾ç½® */
		.custom-base-setting {
			background: #f8f9fa;
			border-radius: 10px;
			padding: 15px;
			margin-top: 15px;
			border-left: 4px solid #feca57;
			display: block; /* å§‹ç»ˆæ˜¾ç¤º */
		}

		.custom-range-group {
			display: flex;
			align-items: center;
			gap: 15px;
			margin-bottom: 10px;
		}

		.range-slider {
			flex: 1;
			height: 6px;
			border-radius: 3px;
			background: #ddd;
			outline: none;
			-webkit-appearance: none;
		}

		.range-slider::-webkit-slider-thumb {
			-webkit-appearance: none;
			appearance: none;
			width: 18px;
			height: 18px;
			border-radius: 50%;
			background: #feca57;
			cursor: pointer;
			box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
		}

		.range-slider::-moz-range-thumb {
			width: 18px;
			height: 18px;
			border-radius: 50%;
			background: #feca57;
			cursor: pointer;
			border: none;
			box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
		}

		.range-value {
			background: #feca57;
			color: white;
			padding: 4px 10px;
			border-radius: 12px;
			font-weight: bold;
			min-width: 40px;
			text-align: center;
			font-size: 0.9em;
		}

		/* æ§åˆ¶æŒ‰é’® */
		.control-buttons {
			text-align: center;
			margin: 20px 0;
		}

		.btn {
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			color: white;
			border: none;
			padding: 12px 25px;
			border-radius: 25px;
			font-size: 1em;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s ease;
			margin: 0 8px;
			box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
		}

		.btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
		}

		.btn:active {
			transform: translateY(0);
		}

		.btn-clear {
			background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
			box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
		}

		.btn-clear:hover {
			box-shadow: 0 8px 25px rgba(255, 107, 107, 0.6);
		}

		/* ç»“æœæ˜¾ç¤ºåŒºåŸŸ */
		.result-section {
			background: #fff;
			border-radius: 15px;
			padding: 25px;
			margin-bottom: 25px;
			box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
			border: 1px solid #e1e8ed;
		}

		.result-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 20px;
			flex-wrap: wrap;
			gap: 15px;
		}

		.result-title {
			font-size: 1.3em;
			font-weight: 700;
			color: #2c3e50;
		}

		.export-buttons {
			display: flex;
			gap: 10px;
			flex-wrap: wrap;
		}

		.export-btn {
			background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
			color: white;
			border: none;
			padding: 8px 15px;
			border-radius: 15px;
			font-size: 0.85em;
			cursor: pointer;
			transition: all 0.3s ease;
			box-shadow: 0 2px 10px rgba(17, 153, 142, 0.3);
		}

		.export-btn:hover {
			transform: translateY(-1px);
			box-shadow: 0 4px 15px rgba(17, 153, 142, 0.4);
		}

		/* è¾“å‡ºè¿›åˆ¶é€‰æ‹© */
		.output-base-selector {
			margin-bottom: 20px;
		}

		.output-base-selector label {
			display: block;
			margin-bottom: 10px;
			font-weight: 600;
			color: #34495e;
		}

		/* ç»“æœå±•ç¤º */
		.result-display {
			background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
			border-radius: 12px;
			padding: 20px;
			text-align: center;
			margin-bottom: 20px;
		}

		.result-label {
			font-size: 0.9em;
			color: #7f8c8d;
			margin-bottom: 8px;
		}

		.result-value {
			font-size: 1.5em;
			font-weight: bold;
			color: #2c3e50;
			word-break: break-all;
			font-family: 'Courier New', monospace;
			cursor: pointer;
			padding: 10px;
			background: rgba(255, 255, 255, 0.8);
			border-radius: 8px;
			transition: all 0.3s ease;
		}

		.result-value:hover {
			background: rgba(255, 255, 255, 1);
			transform: scale(1.02);
		}

		/* æ‰€æœ‰è¿›åˆ¶ç»“æœ */
		.all-results {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
			gap: 15px;
		}

		.mini-result {
			background: #f8f9fa;
			padding: 15px;
			border-radius: 10px;
			text-align: center;
			border: 1px solid #e1e8ed;
			transition: all 0.3s ease;
		}

		.mini-result:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
		}

		.mini-result-label {
			font-size: 0.8em;
			color: #7f8c8d;
			margin-bottom: 5px;
		}

		.mini-result-value {
			font-size: 1em;
			font-weight: bold;
			color: #2c3e50;
			word-break: break-all;
			font-family: 'Courier New', monospace;
			cursor: pointer;
			padding: 5px;
			border-radius: 4px;
			transition: all 0.3s ease;
		}

		.mini-result-value:hover {
			background: #e3f2fd;
			color: #4facfe;
		}

		.error-message {
			color: #e74c3c;
			font-size: 0.85em;
			margin-top: 5px;
			display: none;
		}

		.footer {
			text-align: center;
			padding: 20px;
			color: #7f8c8d;
			font-size: 0.9em;
			border-top: 1px solid #e1e8ed;
		}

		/* å“åº”å¼è®¾è®¡ */
		@media (max-width: 768px) {
			.header h1 {
				font-size: 1.8em;
			}
			
			.main-content {
				padding: 20px;
			}
			
			.input-row {
				flex-direction: column;
				align-items: stretch;
			}
			
			.base-selector {
				justify-content: center;
			}
			
			.result-header {
				flex-direction: column;
				align-items: stretch;
				text-align: center;
			}
			
			.export-buttons {
				justify-content: center;
			}
			
			.btn {
				display: block;
				width: 100%;
				margin: 8px 0;
			}
			
			.all-results {
				grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
				gap: 10px;
			}
		}

		/* åŠ¨ç”»æ•ˆæœ */
		.animation-pulse {
			animation: pulse 0.5s ease-in-out;
		}

		@keyframes pulse {
			0% { transform: scale(1); }
			50% { transform: scale(1.02); }
			100% { transform: scale(1); }
		}

		/* åŠ è½½åŠ¨ç”» */
		.loading {
			display: inline-block;
			width: 20px;
			height: 20px;
			border: 3px solid rgba(255,255,255,.3);
			border-radius: 50%;
			border-top-color: #fff;
			animation: spin 1s ease-in-out infinite;
		}

		@keyframes spin {
			to { transform: rotate(360deg); }
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="header">
			<h1>ğŸ”¢ è¿›åˆ¶è½¬æ¢å™¨</h1>
			<p>2025ç‰ˆ - åè¿›åˆ¶åŠä»¥ä¸‹è¿›åˆ¶è½¬æ¢å·¥å…·</p>
		</div>

		<div class="main-content">
			<!-- è¾“å…¥åŒºåŸŸ -->
			<div class="input-section">
				<div class="input-row">
					<div class="input-group">
						<label for="number-input">ğŸ“ è¾“å…¥æ‚¨çš„æ•°å­—</label>
						<input type="text" id="number-input" class="input-field" placeholder="è¯·è¾“å…¥è¦è½¬æ¢çš„æ•°å­—..." autocomplete="off">
						<div class="error-message" id="input-error">è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å­—</div>
					</div>
				</div>
				
				<div class="input-row">
					<div class="input-group">
						<label>ğŸ”§ é€‰æ‹©è¾“å…¥è¿›åˆ¶ï¼ˆ2-10è¿›åˆ¶ï¼‰</label>
						<div class="base-selector">
							<div class="base-btn active" data-base="custom">è‡ªå®šä¹‰è¿›åˆ¶</div>
						</div>
						
						<div class="custom-base-setting">
							<div class="custom-range-group">
								<label>è¿›åˆ¶åŸºæ•°:</label>
								<div class="range-input">
									<input type="range" id="custom-base-slider" class="range-slider" min="2" max="10" value="2">
								</div>
								<div class="range-value" id="custom-base-value">2</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- æ§åˆ¶æŒ‰é’® -->
			<div class="control-buttons">
				<button class="btn" onclick="convertNumber()" id="convertBtn">
					ğŸ”„ å¼€å§‹è½¬æ¢
				</button>
				<button class="btn btn-clear" onclick="clearAll()">
					ğŸ—‘ï¸ æ¸…ç©º
				</button>
			</div>

			<!-- ç»“æœæ˜¾ç¤ºåŒºåŸŸ -->
			<div class="result-section">
				<div class="result-header">
					<div class="result-title">ğŸ“Š è½¬æ¢ç»“æœ</div>
					<div class="export-buttons">
						<button class="export-btn" onclick="copyResult()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
						<button class="export-btn" onclick="exportAsTxt()">ğŸ“„ å¯¼å‡ºTXT</button>
						<button class="export-btn" onclick="exportAsJson()">ğŸ”– å¯¼å‡ºJSON</button>
					</div>
				</div>

				<div class="output-base-selector">
					<label>ğŸ¯ é€‰æ‹©è¦ç”Ÿæˆçš„è¿›åˆ¶ï¼š</label>
					<div class="base-selector">
						<div class="base-btn active" data-output="all">å…¨éƒ¨æ˜¾ç¤º</div>
						<div class="base-btn" data-output="2">äºŒè¿›åˆ¶</div>
						<div class="base-btn" data-output="8">å…«è¿›åˆ¶</div>
						<div class="base-btn" data-output="10">åè¿›åˆ¶</div>
						<div class="base-btn" data-output="16">åå…­è¿›åˆ¶</div>
					</div>
				</div>

				<div class="result-display" id="mainResult" style="display: none;">
					<div class="result-label" id="resultLabel">è½¬æ¢ç»“æœ</div>
					<div class="result-value" id="resultValue" onclick="copyToClipboard(this.textContent)">-</div>
				</div>

				<div class="all-results" id="allResults" style="display: none;">
					<!-- æ‰€æœ‰è¿›åˆ¶ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
				</div>
			</div>
		</div>

		<div class="footer">
			<p>Â© 2025 è¿›åˆ¶è½¬æ¢å™¨ | æ”¯æŒ2-10è¿›åˆ¶è¾“å…¥ï¼Œçˆ±æ¥è‡ªçº¢èŒ¶</p>
		</div>
	</div>

	<script>
		// å…¨å±€å˜é‡
		let inputBase = 2; // é»˜è®¤ä¸º2è¿›åˆ¶
		let outputBase = 'all';
		let customBase = 2;
		let currentResults = {};

		// åˆå§‹åŒ–
		document.addEventListener('DOMContentLoaded', function() {
			initializeEventListeners();
			updateCustomBaseDisplay();
		});

		// åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
		function initializeEventListeners() {
			// è¾“å‡ºè¿›åˆ¶é€‰æ‹©æŒ‰é’®ï¼ˆåªå¤„ç†éè‡ªå®šä¹‰çš„æŒ‰é’®ï¼‰
			document.querySelectorAll('.base-selector .base-btn[data-output]').forEach(btn => {
				if (btn.dataset.output !== 'custom') {
					btn.addEventListener('click', function() {
						selectOutputBase(this);
					});
				}
			});

			// è‡ªå®šä¹‰è¿›åˆ¶æ»‘å—
			document.getElementById('custom-base-slider').addEventListener('input', updateCustomBase);

			// è¾“å…¥æ¡†å›è½¦é”®
			document.getElementById('number-input').addEventListener('keypress', function(e) {
				if (e.key === 'Enter') {
					convertNumber();
				}
			});

			// å®æ—¶è¾“å…¥éªŒè¯
			document.getElementById('number-input').addEventListener('input', validateInput);
		}

		// é€‰æ‹©è¾“å‡ºè¿›åˆ¶
		function selectOutputBase(button) {
			// æ›´æ–°æŒ‰é’®çŠ¶æ€
			document.querySelectorAll('.base-selector .base-btn[data-output]').forEach(btn => {
				btn.classList.remove('active');
			});
			button.classList.add('active');

			outputBase = button.dataset.output;
			displayResults();
		}

		// æ›´æ–°è‡ªå®šä¹‰è¿›åˆ¶
		function updateCustomBase() {
			const slider = document.getElementById('custom-base-slider');
			const valueDisplay = document.getElementById('custom-base-value');
			
			customBase = parseInt(slider.value);
			inputBase = customBase; // è¾“å…¥è¿›åˆ¶å°±æ˜¯è‡ªå®šä¹‰è¿›åˆ¶
			valueDisplay.textContent = customBase;
			
			validateInput();
		}

		// æ›´æ–°è‡ªå®šä¹‰è¿›åˆ¶æ˜¾ç¤º
		function updateCustomBaseDisplay() {
			document.getElementById('custom-base-value').textContent = customBase;
		}

		// éªŒè¯è¾“å…¥
		function validateInput() {
			const input = document.getElementById('number-input');
			const error = document.getElementById('input-error');
			const value = input.value.trim();

			if (value === '') {
				error.style.display = 'none';
				input.style.borderColor = '#e1e8ed';
				return true;
			}

			// åªéªŒè¯è‡ªå®šä¹‰è¿›åˆ¶è¾“å…¥
			let isValid = validateCustomInput(value);

			if (isValid) {
				error.style.display = 'none';
				input.style.borderColor = '#4facfe';
			} else {
				error.style.display = 'block';
				input.style.borderColor = '#e74c3c';
			}

			return isValid;
		}

		// éªŒè¯è‡ªå®šä¹‰è¿›åˆ¶è¾“å…¥
		function validateCustomInput(value) {
			if (value === '') return true;
			
			const validChars = '0123456789'.substring(0, customBase);
			const upperValue = value.toUpperCase();
			
			for (let char of upperValue) {
				if (!validChars.includes(char)) {
					return false;
				}
			}
			return true;
		}

		// è¿›åˆ¶è½¬æ¢ä¸»å‡½æ•°
		function convertNumber() {
			const input = document.getElementById('number-input').value.trim();
			const convertBtn = document.getElementById('convertBtn');
			
			if (!input) {
				alert('è¯·è¾“å…¥è¦è½¬æ¢çš„æ•°å­—ï¼');
				return;
			}

			if (!validateInput()) {
				alert('è¾“å…¥çš„æ•°å­—æ ¼å¼ä¸æ­£ç¡®ï¼è¯·ç¡®ä¿æ•°å­—ç¬¦åˆå½“å‰è¿›åˆ¶è§„åˆ™ã€‚');
				return;
			}

			try {
				// æ˜¾ç¤ºåŠ è½½çŠ¶æ€
				const originalText = convertBtn.innerHTML;
				convertBtn.innerHTML = '<span class="loading"></span> è½¬æ¢ä¸­...';
				convertBtn.disabled = true;

				// ä½¿ç”¨setTimeoutæ¥æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ
				setTimeout(() => {
					try {
						// è½¬æ¢ä¸ºåè¿›åˆ¶ï¼ˆé€šè¿‡è‡ªå®šä¹‰è¿›åˆ¶è§£æï¼‰
						const upperInput = input.toUpperCase();
						const decimalValue = parseCustomBase(upperInput);

						if (isNaN(decimalValue) || !isFinite(decimalValue)) {
							throw new Error('æ— æ•ˆçš„æ•°å­—');
						}

						// æ£€æŸ¥æ˜¯å¦è¶…å‡ºå®‰å…¨æ•´æ•°èŒƒå›´
						if (Math.abs(decimalValue) > Number.MAX_SAFE_INTEGER) {
							throw new Error(`æ•°å­—è¶…å‡ºå®‰å…¨èŒƒå›´ï¼å½“å‰è¿›åˆ¶(${customBase})ä¸‹æ­¤æ•°å­—è¿‡å¤§ã€‚`);
						}

						// è®¡ç®—æ‰€æœ‰è¿›åˆ¶çš„ç»“æœï¼ˆä¸å†è®¡ç®—è‡ªå®šä¹‰è¿›åˆ¶çš„ç»“æœç”¨äºæ˜¾ç¤ºï¼‰
						currentResults = {
							binary: decimalValue.toString(2),
							octal: decimalValue.toString(8),
							decimal: decimalValue.toString(10),
							hexadecimal: decimalValue.toString(16).toUpperCase()
						};

						// å•ç‹¬ä¿å­˜è‡ªå®šä¹‰è¿›åˆ¶çš„ç»“æœï¼ˆä½†ä¸æ˜¾ç¤ºåœ¨å¸¸è§„é€‰é¡¹ä¸­ï¼‰
						currentResults.custom = convertToCustomBase(decimalValue);

						// æ˜¾ç¤ºç»“æœ
						displayResults();
						
						// æ·»åŠ åŠ¨ç”»æ•ˆæœ
						document.querySelector('.result-section').classList.add('animation-pulse');
						setTimeout(() => {
							document.querySelector('.result-section').classList.remove('animation-pulse');
						}, 500);

					} catch (error) {
						alert('è½¬æ¢å‡ºé”™ï¼š' + error.message);
					} finally {
						// æ¢å¤æŒ‰é’®çŠ¶æ€
						convertBtn.innerHTML = originalText;
						convertBtn.disabled = false;
					}
				}, 300);

			} catch (error) {
				alert('è½¬æ¢å‡ºé”™ï¼š' + error.message);
				// æ¢å¤æŒ‰é’®çŠ¶æ€
				convertBtn.innerHTML = originalText;
				convertBtn.disabled = false;
			}
		}

		// è§£æè‡ªå®šä¹‰è¿›åˆ¶
		function parseCustomBase(value) {
			const validChars = '0123456789'.substring(0, customBase);
			let result = 0;
			
			for (let i = 0; i < value.length; i++) {
				const char = value[i];
				const digit = validChars.indexOf(char);
				if (digit === -1) {
					throw new Error(`æ— æ•ˆçš„å­—ç¬¦: ${char}ã€‚åœ¨${customBase}è¿›åˆ¶ä¸­åªèƒ½ä½¿ç”¨: ${validChars}`);
				}
				result = result * customBase + digit;
			}
			
			return result;
		}

		// è½¬æ¢ä¸ºè‡ªå®šä¹‰è¿›åˆ¶
		function convertToCustomBase(decimalValue) {
			if (decimalValue === 0) return '0';
			
			let result = '';
			const validChars = '0123456789'.substring(0, customBase);
			let num = Math.abs(decimalValue);
			
			while (num > 0) {
				const remainder = num % customBase;
				result = validChars[remainder] + result;
				num = Math.floor(num / customBase);
			}
			
			return decimalValue < 0 ? '-' + result : result;
		}

		// æ˜¾ç¤ºç»“æœ
		function displayResults() {
			const mainResult = document.getElementById('mainResult');
			const allResults = document.getElementById('allResults');
			const resultLabel = document.getElementById('resultLabel');
			const resultValue = document.getElementById('resultValue');

			if (outputBase === 'all') {
				// æ˜¾ç¤ºæ‰€æœ‰ç»“æœï¼ˆä¸åŒ…æ‹¬è‡ªå®šä¹‰è¿›åˆ¶ï¼‰
				mainResult.style.display = 'none';
				allResults.style.display = 'grid';
				renderAllResults();
			} else {
				// æ˜¾ç¤ºå•ä¸ªç»“æœ
				mainResult.style.display = 'block';
				allResults.style.display = 'none';
				
				const baseNames = {
					'2': 'äºŒè¿›åˆ¶',
					'8': 'å…«è¿›åˆ¶',
					'10': 'åè¿›åˆ¶',
					'16': 'åå…­è¿›åˆ¶'
				};

				const baseKeys = {
					'2': 'binary',
					'8': 'octal',
					'10': 'decimal',
					'16': 'hexadecimal'
				};

				const key = baseKeys[outputBase];
				const name = baseNames[outputBase];

				resultLabel.textContent = `${name} ç»“æœ:`;
				resultValue.textContent = currentResults[key] || '-';
			}
		}

		// æ¸²æŸ“æ‰€æœ‰ç»“æœ
		function renderAllResults() {
			const container = document.getElementById('allResults');
			const baseNames = {
				binary: 'äºŒè¿›åˆ¶',
				octal: 'å…«è¿›åˆ¶',
				decimal: 'åè¿›åˆ¶',
				hexadecimal: 'åå…­è¿›åˆ¶'
			};

			let html = '';
			for (let [key, value] of Object.entries(currentResults)) {
				// ä¸æ˜¾ç¤ºè‡ªå®šä¹‰è¿›åˆ¶çš„ç»“æœ
				if (key === 'custom') continue;
				
				const name = baseNames[key] || key;
				html += `
					<div class="mini-result">
						<div class="mini-result-label">${name}</div>
						<div class="mini-result-value" onclick="copyToClipboard('${value}')">${value}</div>
					</div>
				`;
			}
			container.innerHTML = html;
		}

		// å¤åˆ¶ç»“æœ
		function copyResult() {
			if (Object.keys(currentResults).length === 0) {
				alert('æ²¡æœ‰å¯å¤åˆ¶çš„ç»“æœï¼');
				return;
			}

			let textToCopy;
			if (outputBase === 'all') {
				textToCopy = Object.entries(currentResults)
					.filter(([key, value]) => key !== 'custom') // æ’é™¤è‡ªå®šä¹‰è¿›åˆ¶
					.map(([key, value]) => {
						const names = {
							binary: 'äºŒè¿›åˆ¶',
							octal: 'å…«è¿›åˆ¶',
							decimal: 'åè¿›åˆ¶',
							hexadecimal: 'åå…­è¿›åˆ¶'
						};
						const name = names[key] || key;
						return `${name}: ${value}`;
					})
					.join('\n');
			} else {
				const baseNames = {
					'2': 'äºŒè¿›åˆ¶',
					'8': 'å…«è¿›åˆ¶',
					'10': 'åè¿›åˆ¶',
					'16': 'åå…­è¿›åˆ¶'
				};
				const baseKeys = {
					'2': 'binary',
					'8': 'octal',
					'10': 'decimal',
					'16': 'hexadecimal'
				};
				const key = baseKeys[outputBase];
				const name = baseNames[outputBase];
				textToCopy = `${name}: ${currentResults[key]}`;
			}

			copyToClipboard(textToCopy);
			showNotification('ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼', 'success');
		}

		// å¯¼å‡ºä¸ºTXT
		function exportAsTxt() {
			if (Object.keys(currentResults).length === 0) {
				alert('æ²¡æœ‰å¯å¯¼å‡ºçš„ç»“æœï¼');
				return;
			}

			let content = `è¿›åˆ¶è½¬æ¢ç»“æœ\n`;
			content += `è½¬æ¢æ—¶é—´: ${new Date().toLocaleString()}\n`;
			content += `è¾“å…¥è¿›åˆ¶: ${customBase}\n`;
			content += `è¾“å…¥æ•°å€¼: ${document.getElementById('number-input').value}\n\n`;
			content += `è½¬æ¢ç»“æœ:\n`;

			const baseNames = {
				binary: 'äºŒè¿›åˆ¶',
				octal: 'å…«è¿›åˆ¶',
				decimal: 'åè¿›åˆ¶',
				hexadecimal: 'åå…­è¿›åˆ¶'
			};

			for (let [key, value] of Object.entries(currentResults)) {
				// ä¸å¯¼å‡ºè‡ªå®šä¹‰è¿›åˆ¶çš„ç»“æœ
				if (key === 'custom') continue;
				content += `${baseNames[key]}: ${value}\n`;
			}

			downloadFile(content, 'è¿›åˆ¶è½¬æ¢ç»“æœ.txt', 'text/plain');
			showNotification('TXTæ–‡ä»¶å¯¼å‡ºæˆåŠŸï¼', 'success');
		}

		// å¯¼å‡ºä¸ºJSON
		function exportAsJson() {
			if (Object.keys(currentResults).length === 0) {
				alert('æ²¡æœ‰å¯å¯¼å‡ºçš„ç»“æœï¼');
				return;
			}

			// åˆ›å»ºä¸åŒ…å«è‡ªå®šä¹‰è¿›åˆ¶çš„ç»“æœå¯¹è±¡
			const exportResults = {
				binary: currentResults.binary,
				octal: currentResults.octal,
				decimal: currentResults.decimal,
				hexadecimal: currentResults.hexadecimal
			};

			const exportData = {
				timestamp: new Date().toISOString(),
				input_base: customBase,
				input_value: document.getElementById('number-input').value,
				custom_base: customBase,
				results: exportResults
			};

			const content = JSON.stringify(exportData, null, 2);
			downloadFile(content, 'è¿›åˆ¶è½¬æ¢ç»“æœ.json', 'application/json');
			showNotification('JSONæ–‡ä»¶å¯¼å‡ºæˆåŠŸï¼', 'success');
		}

		// ä¸‹è½½æ–‡ä»¶
		function downloadFile(content, filename, mimeType) {
			const blob = new Blob([content], { type: mimeType });
			const url = URL.createObjectURL(blob);
			const a = document.createElement('a');
			a.href = url;
			a.download = filename;
			document.body.appendChild(a);
			a.click();
			document.body.removeChild(a);
			URL.revokeObjectURL(url);
		}

		// å¤åˆ¶æ–‡æœ¬åˆ°å‰ªè´´æ¿
		function copyToClipboard(text) {
			if (navigator.clipboard) {
				navigator.clipboard.writeText(text).then(() => {
					showCopyFeedback();
				}).catch(() => {
					fallbackCopyTextToClipboard(text);
				});
			} else {
				fallbackCopyTextToClipboard(text);
			}
		}

		// å¤‡ç”¨å¤åˆ¶æ–¹æ³•
		function fallbackCopyTextToClipboard(text) {
			const textArea = document.createElement("textarea");
			textArea.value = text;
			textArea.style.position = "fixed";
			textArea.style.opacity = "0";
			textArea.style.top = "0";
			textArea.style.left = "0";
			
			document.body.appendChild(textArea);
			textArea.focus();
			textArea.select();
			
			try {
				const successful = document.execCommand('copy');
				if (successful) {
					showCopyFeedback();
				} else {
					showNotification('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶', 'error');
				}
			} catch (err) {
				console.error('å¤åˆ¶å¤±è´¥:', err);
				showNotification('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶', 'error');
			}
			
			document.body.removeChild(textArea);
		}

		// æ˜¾ç¤ºå¤åˆ¶åé¦ˆ
		function showCopyFeedback() {
			showNotification('å¤åˆ¶æˆåŠŸï¼', 'success');
		}

		// æ˜¾ç¤ºé€šçŸ¥
		function showNotification(message, type = 'info') {
			// åˆ›å»ºé€šçŸ¥å…ƒç´ 
			const notification = document.createElement('div');
			notification.style.cssText = `
				position: fixed;
				top: 20px;
				right: 20px;
				padding: 12px 20px;
				border-radius: 8px;
				color: white;
				font-weight: 600;
				z-index: 1000;
				transform: translateX(100%);
				transition: transform 0.3s ease;
				${type === 'success' ? 'background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);' :
				  type === 'error' ? 'background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);' :
				  'background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);'}
			`;
			notification.textContent = message;
			
			document.body.appendChild(notification);
			
			// æ˜¾ç¤ºåŠ¨ç”»
			setTimeout(() => {
				notification.style.transform = 'translateX(0)';
			}, 100);
			
			// è‡ªåŠ¨éšè—
			setTimeout(() => {
				notification.style.transform = 'translateX(100%)';
				setTimeout(() => {
					document.body.removeChild(notification);
				}, 300);
			}, 3000);
		}

		// æ¸…ç©ºæ‰€æœ‰
		function clearAll() {
			document.getElementById('number-input').value = '';
			document.getElementById('input-error').style.display = 'none';
			document.getElementById('number-input').style.borderColor = '#e1e8ed';
			document.getElementById('mainResult').style.display = 'none';
			document.getElementById('allResults').style.display = 'none';
			currentResults = {};
			showNotification('å·²æ¸…ç©ºæ‰€æœ‰å†…å®¹', 'info');
		}

		// é˜²æ­¢å³é”®èœå•ï¼ˆå¯é€‰ï¼‰
		document.addEventListener('contextmenu', function(e) {
			// e.preventDefault(); // å–æ¶ˆæ³¨é‡Šä»¥ç¦ç”¨å³é”®èœå•
		});

		// é”®ç›˜å¿«æ·é”®æ”¯æŒ
		document.addEventListener('keydown', function(e) {
			// Ctrl+Enter å¿«é€Ÿè½¬æ¢
			if (e.ctrlKey && e.key === 'Enter') {
				e.preventDefault();
				convertNumber();
			}
			// Ctrl+L æ¸…ç©º
			else if (e.ctrlKey && e.key === 'l') {
				e.preventDefault();
				clearAll();
			}
		});
	</script>
</body>
</html>